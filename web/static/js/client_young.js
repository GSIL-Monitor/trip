function loginFail(data){var corphost="http://ct.ctrip.com/crptravel/index.aspx?cardno="+data.uid;var errmsg=["RiskInputVerifyCode","RiskControlRule","BaojieActivedRule","UIDExitsAfterFindRule","UIDInvaildRule","UIDLockedRule","UIDInBlackListRule","CheckNullUserName","CheckNullPassword","CheckPasswordRule","statuslock","canResetPwd","expireResetPwd","TicketSecurityRedirect","Exception","UnKnowmError","UIDForbidenRuler","DynamicPwdError","DynamicPwdPast","DynamicPwdIsNull","DynamicPwdPhoneIsNull","DyException","NotService","CardNotMatch","NoSuchUserType","NoSuchSourceId","CardNotActive","CannotLogin","CardPleaseActive","ResetPasswordByPwdIsNull","CorpLogin"],errmsg_st=["请输入正确验证码！","用户名或密码错误！","激活邮件已发至您宝洁邮箱，请点击链接激活！","用户名或密码错误！","已经注销的用户！","您连续输错密码，锁定30分钟！","很抱歉，携程无法满足您的服务需求！","缺少用户名！","缺少密码！","用户名或密码错误！","您的登录密码存在风险，请点击“忘记密码”","可以重置密码！","临时码过期！",'<![CDATA[<a href="login.aspx" target="_blank">登录页面</a>登录！]]',"系统错误！","未知错误！","您帐号已锁定,如有疑问请拨打客服电话！","请填写正确的动态密码！","动态密码已失效，请重新获取！","请输入动态密码！","请输入手机号！","出错了，请稍后再试！","很抱歉，携程无法满足您的服务需求！","卡号和公司不匹配！","没有该类用户！","没有指定渠道！","卡号未开通！","该渠道不允许登录！","请先激活您的卡！","您的登录密码存在风险，请点击忘记密码！","请进入商旅首页<a href="+corphost+' target="_blank">登录</a>查询'],errmsg_bt=["請輸入正確驗證碼！","用戶名或密碼錯誤！","啟動郵件已發至您寶潔郵箱，請點選連結啟動！","用戶名或密碼錯誤！","已經註銷的用戶！","您連續丟失錯誤密碼，鎖30分鐘！","很抱歉，攜程無法滿足您的服務需求！","缺少用戶名！","缺少密碼！","用戶名或密碼錯誤！","您的登錄密碼存在風險，請點擊“忘記密碼”","可以重置密碼！","臨時碼過期！",'<![CDATA[<a href="login.aspx" target="_blank">登錄頁面</a>登錄！]]',"系統錯誤！","未知錯誤！","您帳號已鎖定,如有疑問請撥打客服電話！","請填寫正確的動態密碼！","動態密碼已失效，請重新獲取！","請輸入動態密碼！","請輸入手機號！","出錯了，請稍後再試！","很抱歉，攜程無法滿足您的服務需求！","卡號和公司不匹配！","沒有該類用戶！","沒有指定渠道！","卡號未開通！","該渠道不允許登錄！","請先激活您的卡！","您的登錄密碼存在風險，請點擊忘記密碼！","請進入商旅首頁<a href="+corphost+' target="_blank">登錄</a>查詢'];var IsBig5=function(){var thisURL=window.location.hostname.toLowerCase();if(thisURL.indexOf(".big5")>=0||thisURL.indexOf(".hk")>=0){return true}else{return false}};if(data.rurl){window.location.href=unescape(data.rurl);return}var displayMsg="";var notfindMsg=true;if(data.errmessage){var i=errmsg.indexOf(data.errmessage);if(i>-1){if(IsBig5()){displayMsg=errmsg_bt[i]}else{displayMsg=errmsg_st[i]}notfindMsg=false}}if(data.actionName){var i=errmsg.indexOf(data.actionName);if(i>-1){if(IsBig5()){displayMsg=errmsg_bt[i]}else{displayMsg=errmsg_st[i]}notfindMsg=false}}if(!!notfindMsg){if(!!data.errmessage){displayMsg=decodeURIComponent(escape(data.errmessage))}}if(displayMsg===""){displayMsg="系统错误"}sso_popLogin.showErrors(data.loginType,displayMsg);if(sso_divVerifyCode.style.display!="none"&&data.loginType==="0"){returnFlag=true;sso_popLogin.isBlack()}}function getReturn(search){var getQueryString=function(search,name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i");var r=search.substr(1).match(reg);if(r!=null){return unescape(r[2])}return null};var success=getQueryString(search,"success"),result={};if(success=="T"){result.success=success;result.errmessage=getQueryString(search,"errmessage");result.buttonId=getQueryString(search,"buttonId");result.ticketStr=getQueryString(search,"ticketStr");result.authkey=getQueryString(search,"authkey")}else{result.success=success;result.errmessage=getQueryString(search,"errmessage");result.rurl=getQueryString(search,"rurl");result.actionName=getQueryString(search,"ActionName");result.isNeedModifyPwd=getQueryString(search,"IsNeedModifyPwd");result.uid=getQueryString(search,"Uid");result.coopName=getQueryString(search,"coopName");result.verifyCodeFlag=getQueryString(search,"VerifyCodeFlag");result.loginType=getQueryString(search,"loginType")}loginResult=result;return result}var $__SSO_ID=function(id){return document.getElementById(id)};var sso_maskDIv=$__SSO_ID("sso_maskDIv"),sso_domUser=$__SSO_ID("sso_domUser"),sso_phonePwd=$__SSO_ID("sso_phonePwd"),sso_domUserUl=$__SSO_ID("sso_domUserUl"),sso_phonePwdUl=$__SSO_ID("sso_phonePwdUl"),sso_memberlogin=$__SSO_ID("sso_memberlogin"),sso_txtUid=$__SSO_ID("sso_txtUid"),sso_txtPwd=$__SSO_ID("sso_txtPwd"),sso_chkAutoLogin=$__SSO_ID("sso_chkAutoLogin"),sso_chkAutoLoginDy=$__SSO_ID("sso_chkAutoLoginDy"),sso_imgCode=$__SSO_ID("sso_imgCode"),sso_divVerifyCode=$__SSO_ID("sso_divVerifyCode"),sso_verifyCode=$__SSO_ID("sso_verifyCode"),sso_btnSubmit=$__SSO_ID("sso_btnSubmit"),sso_membererror=$__SSO_ID("sso_membererror"),sso_mobilePhone=$__SSO_ID("sso_mobilePhone"),sso_txtCodePwd=$__SSO_ID("sso_txtCodePwd"),sso_dyPwd=$__SSO_ID("sso_dyPwd"),sso_dyPwdFirst=$__SSO_ID("sso_dyPwdFirst"),sso_divVerifyCodes=$__SSO_ID("sso_divVerifyCodes"),sso_imgCodePhone=$__SSO_ID("sso_imgCodePhone"),sso_reSend=$__SSO_ID("sso_reSend"),sso_btnSubmitLogin=$__SSO_ID("sso_btnSubmitLogin"),sso_dymembererror=$__SSO_ID("sso_dymembererror"),sso_commonlogin=$__SSO_ID("sso_commonlogin"),sso_thirdlogin=$__SSO_ID("sso_thirdlogin"),sso_cardName=$__SSO_ID("sso_cardName"),sso_hidSourceId=$__SSO_ID("sso_hidSourceId"),sso_txtCUid=$__SSO_ID("sso_txtCUid"),sso_txtcPwd=$__SSO_ID("sso_txtcPwd"),sso_btnCSubmit=$__SSO_ID("sso_btnCSubmit"),sso_cardError=$__SSO_ID("sso_cardError"),sso_lkbtnGetPwd=$__SSO_ID("sso_lkbtnGetPwd"),sso_commonerror=$__SSO_ID("sso_commonerror"),sso_noneloginDiv=$__SSO_ID("sso_noneloginDiv"),sso_btnDirectBook=$__SSO_ID("sso_btnDirectBook"),sso_divClose=$__SSO_ID("sso_divClose"),sso_qq=$__SSO_ID("sso_qq"),sso_sina=$__SSO_ID("sso_sina"),sso_nete=$__SSO_ID("sso_nete"),sso_renren=$__SSO_ID("sso_renren"),sso_baidu=$__SSO_ID("sso_baidu"),sso_clogin=$__SSO_ID("sso_clogin"),sso_mlogin=$__SSO_ID("sso_mlogin"),sso_mlogin2=$__SSO_ID("sso_mlogin2"),sso_tlogin=$__SSO_ID("sso_tlogin"),sso_register=$__SSO_ID("sso_register"),sso_register2=$__SSO_ID("sso_register2"),sso_ifrprocxy=$__SSO_ID("sso_ifrprocxy"),sso_ie6=!-[1,]&&!window.XMLHttpRequest,jpIsBlack=false,jpIsBlackForMobile=false,jsptoken="N",loginResult={},riskLevel,sso_phoneCodeLi=$__SSO_ID("sso_phoneCodeLi");
returnFlag=false;(function(){var imgCode="",jpVerifyCode=false;return JSP={checkIsBlack:function(data){var retCode=data.Code;if(retCode==295){sso_popLogin.showErrors(sso_consts.sso_logintype_member,"您帐号已锁定,如有疑问请拨打客服电话。");sso_divVerifyCode.style.display="none";jpIsBlack="block"}else{if(retCode==285){sso_popLogin.showErrors(sso_consts.sso_logintype_member,"您连续输错密码，锁定30分钟。");sso_divVerifyCode.style.display="none";jpIsBlack="block"}else{if(retCode==1){sso_divVerifyCode.style.display="block";jpIsBlack="true";var imgUrl="data:image/gif;base64,"+data.Image;var Hash=data.CaptchaId;sso_imgCode.datahash=Hash;sso_imgCode.src=imgUrl}else{sso_divVerifyCode.style.display="none";jpIsBlack="false"}}}jsptoken=data.jsptoken},checkIsBlackForMobile:function(data){var retCode=data.Code;if(retCode==295){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,"您帐号已锁定,如有疑问请拨打客服电话。");sso_phoneCodeLi.style.display="none";$__SSO_ID("sso_phoneLoginTip").style.display="none";jpIsBlackForMobile="block"}else{if(retCode==285){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,"您连续输错密码，锁定30分钟。");sso_phoneCodeLi.style.display="none";$__SSO_ID("sso_phoneLoginTip").style.display="none";jpIsBlackForMobile="block"}else{if(retCode==1){sso_phoneCodeLi.style.display="block";jpIsBlackForMobile="true";var imgUrl="data:image/gif;base64,"+data.Image;var Hash=data.CaptchaId;sso_imgCodePhone.datahash=Hash;sso_imgCodePhone.src=imgUrl}else{sso_phoneCodeLi.style.display="none";jpIsBlackForMobile="false"}}}jsptoken=data.jsptoken},checkVerifyCode:function(data){jpVerifyCode=data.code==="1"},getImageCode:function(data){imgCode=data.code;sso_imgCode.src=sso_Config.url.verifyCodeUrl+"?"+imgCode},getImageCodePhone:function(data){imgCode=data.code;sso_imgCodePhone.src=sso_Config.url.verifyCodePhoneUrl+"?"+imgCode},sendDyncPwd:function(data){if(data.code!="5"){sso_popLogin.isBlackForMobile()}switch(data.code){case"1":sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyDyncPhone);sso_mobilePhone.focus();return;case"2":case"3":sso_popLogin.showErrors(sso_consts.sso_logintype_phone,"用户未注册");sso_mobilePhone.focus();return;case"5":sso_popLogin.showErrors(sso_consts.sso_logintype_phone);$__SSO_ID("sso_phoneLoginTip").style.display=consts.display.block;sso_popLogin.countDownPhone();sso_dyPwdFirst.focus();break;case"7":sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyverycode);sso_txtCodePwd.focus();break;case"8":sso_popLogin.showErrors(sso_consts.sso_logintype_phone,"验证码错误");sso_txtCodePwd.value="";sso_txtCodePwd.focus();break;case"9":sso_popLogin.showErrors(sso_consts.sso_logintype_phone,"动态密码获取频繁，请一分钟后再试");$__SSO_ID("sso_phoneLoginTip").style.display=consts.display.none;break;case"285":sso_popLogin.showErrors(sso_consts.sso_logintype_phone,"您连续输错密码，锁定30分钟");break;case"295":sso_popLogin.showErrors(sso_consts.sso_logintype_phone,"您帐号已锁定,如有疑问请拨打客服电话。");break;case"0":case"4":default:sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_WaitForTry);return}}}})();function sso_member_enter(){var event=arguments.callee.caller.arguments[0]||window.event;if(event.keyCode==13){event.returnValue=false;sso_btnSubmit.click()}return false}function sso_phone_enter(){var event=arguments.callee.caller.arguments[0]||window.event;if(event.keyCode==13){event.returnValue=false;sso_btnSubmitLogin.click()}return false}function sso_card_enter(){var event=arguments.callee.caller.arguments[0]||window.event;if(event.keyCode==13){event.returnValue=false;sso_btnCSubmit.click()}return false}function getChannelName(channelid){var arrCard=Alliances.split("@");for(var i=0;i<arrCard.length;i++){var cardinfo=arrCard[i].length>0?arrCard[i].split("||"):null;if(cardinfo==null){continue}var channelID=cardinfo[1].split("|")[0];if(channelID==channelid){return cardinfo[0]}}return null}function isPwd1(pwd){return/^\S{4,20}$/.test(pwd)}var sso_popLogin={init:function(){this.binder();sso_txtUid.onclick=function(){if(sso_txtUid.value==""||sso_txtUid.value==sso_consts.sso_tip_name){sso_txtUid.value=""}sso_txtUid.style.color="black"};sso_popLogin.sso_showTip(sso_mobilePhone,sso_consts.sso_tip_mobile);sso_popLogin.sso_showTip(sso_txtCodePwd,sso_consts.sso_tip_verycode);sso_popLogin.sso_showTip(sso_cardName,sso_consts.sso_tip_cardname);sso_popLogin.sso_showTip(sso_txtCUid,sso_consts.sso_tip_name);sso_popLogin.sso_showTip(sso_verifyCode,sso_consts.sso_tip_verycode)},binder:function(){this.onuidblur();this.onbtnclick();this.onthridlogin();this.onrefreshvcode();this.onrefreshPhonevcode();$__SSO_ID("sso_corpLogin").onclick=function(e){e=e||window.event;if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}}},onbtnclick:function(){sso_register.onclick=sso_register2.onclick=function(){window.open(sso_consts.rootUrl+"/member/emailregist.aspx")};sso_mlogin.onclick=sso_mlogin2.onclick=function(){sso_memberlogin.style.display="block";sso_commonlogin.style.display="none";sso_thirdlogin.style.display="none";var selectCard=$__SSO_ID("selectCardName");
if(selectCard){selectCard.style.display="none"}var searchCard=$__SSO_ID("searchCardName");if(searchCard){searchCard.style.display="none"}};sso_clogin.onclick=function(){if(typeof(Alliances)==="undefined"){var s=document.createElement("script");s.type="text/javascript";s.async=false;s.src=sso_Config.jsonpUrl.getChannelData;var h=document.getElementsByTagName("head")[0];h.appendChild(s)}sso_memberlogin.style.display="none";sso_commonlogin.style.display="block";sso_thirdlogin.style.display="none";$ss.bind(sso_cardName,"sso_hidSourceId")};sso_tlogin.onclick=function(){sso_thirdlogin.style.display="block";sso_memberlogin.style.display="none";sso_commonlogin.style.display="none"};$__SSO_ID("sso_memberRadio").onclick=function(){sso_domUserUl.style.display="block";sso_phonePwdUl.style.display="none";$__SSO_ID("sso_memberRadio").checked=true};$__SSO_ID("sso_cardRadio").onclick=function(){sso_popLogin.onmobileblur();sso_domUserUl.style.display="none";sso_phonePwdUl.style.display="block";$__SSO_ID("sso_cardRadio").checked=true};sso_divClose.onclick=function(){sso_popLogin.showErrors(sso_consts.sso_logintype_member);sso_popLogin.showErrors(sso_consts.sso_logintype_card);sso_popLogin.showErrors(sso_consts.sso_logintype_phone);sso_maskShow(null,true)};sso_btnDirectBook.onclick=function(){sso_popLogin.submitLogin("N","N","","F",sso_consts.sso_logintype_quick)};sso_reSend.onclick=sso_popLogin.SendSmsByLogin;sso_btnSubmit.onclick=function(){var uid=sso_txtUid.value,psd=sso_txtPwd.value,vcode=encodeURI(sso_verifyCode.value),vcodeID=sso_imgCode.datahash;autolog="F",valid_status=true;var validForm=function(uid,psd,vcode){if(uid){if(uid===sso_consts.sso_tip_name||sso_trim(uid)===""){sso_popLogin.showErrors(sso_consts.sso_logintype_member,sso_consts.sso_error_emptyuid);sso_txtUid.focus();return false}}else{sso_popLogin.showErrors(sso_consts.sso_logintype_member,sso_consts.sso_error_emptyuid);return false}if(jpIsBlack==="block"){return false}if(!psd){sso_popLogin.showErrors(sso_consts.sso_logintype_member,sso_consts.sso_error_emptypwd);sso_txtPwd.focus();return false}return true};var loginIfm=function(){if(valid_status){sso_popLogin.hideErrors();if(sso_chkAutoLogin.checked){autolog="T"}sso_popLogin.submitLogin(uid,psd,vcode||"",autolog,sso_consts.sso_logintype_member,vcodeID)}};valid_status=validForm(uid,psd,vcode);if(valid_status){if(sso_divVerifyCode.style.display!="none"){if(vcode){if(vcode===encodeURI(sso_consts.sso_tip_verycode)||sso_trim(vcode)===""){sso_popLogin.showErrors(sso_consts.sso_logintype_member,sso_consts.sso_error_emptyverycode);sso_verifyCode.focus();return}else{sso_popLogin.showErrors(sso_consts.sso_logintype_member);loginIfm()}}else{sso_popLogin.showErrors(sso_consts.sso_logintype_member,sso_consts.sso_error_emptyverycode);sso_verifyCode.focus();return}}else{loginIfm()}}};sso_btnSubmitLogin.onclick=function(){$__SSO_ID("sso_phoneLoginTip").style.display="none";var uid=sso_mobilePhone.value,psd=sso_dyPwdFirst.value,vcode=sso_txtCodePwd.value,autolog="F",valid_status=true;var validForm=function(uid,psd){if(uid){if(!isMobile_SSO(sso_trim(uid))){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_wrongPhone);return false}if(uid===sso_consts.sso_tip_mobile||sso_trim(uid)===""){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyDyncPhone);return false}}else{sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyDyncPhone);return false}if(jpIsBlackForMobile==="block"){return false}if(!psd||psd===sso_consts.sso_tip_dyncpwd||sso_trim(psd)===""){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyDyncPwd);return false}return true};var loginIfm=function(){if(valid_status){sso_popLogin.hideErrors();if(sso_chkAutoLoginDy.checked){autolog="T"}sso_popLogin.submitLogin(uid,psd,vcode||"",autolog,sso_consts.sso_logintype_phone)}};valid_status=validForm(uid,psd);if(valid_status){loginIfm()}};sso_lkbtnGetPwd.onclick=function(){if((sso_cardName.value===sso_consts.sso_tip_cardname?"":sso_cardName.value).length===0){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_emptyCardName);return false}if((sso_txtCUid.value===sso_consts.sso_tip_name?"":sso_txtCUid.value).length===0){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_emptyuid);return false}else{var callbackcheckcard="tmp_"+parseInt(Math.random()*1000000,10);var url=sso_Config.jsonpUrl.checkCoCard+"?sourceid="+sso_hidSourceId.value+"&cardno="+sso_txtCUid.value+"&tmp="+Math.floor(Math.random()*1000)+"&jsonp="+callbackcheckcard;sso_popLogin.jsonpRequest(url);window[callbackcheckcard]=function(data){if(data.code==="F"){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_wrongUid);return false}else{var callbackgetuid="tmp_"+parseInt(Math.random()*1000000,10);var url2=sso_Config.jsonpUrl.AjaxGetCoCardUid+"?sourceid="+sso_hidSourceId.value+"&cardno="+sso_txtCUid.value+"&tmp="+Math.floor(Math.random()*1000)+"&jsonp="+callbackgetuid;
sso_popLogin.jsonpRequest(url2);window[callbackgetuid]=function(data){if(data.code==="ssof"){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_wrongUid);return false}else{window.location.href="https://accounts.ctrip.com/member/PassWord/VerifyUserInfo.aspx?uid="+data.code}}}}}};sso_btnCSubmit.onclick=function(){if((sso_cardName.value===sso_consts.sso_tip_cardname?"":sso_cardName.value).length===0){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_emptyCardName);return false}if((sso_txtCUid.value===sso_consts.sso_tip_name?"":sso_txtCUid.value).length===0){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_emptyuid);return false}else{var callbackcheckcard="tmp_"+parseInt(Math.random()*1000000,10);var url=sso_Config.jsonpUrl.checkCoCard+"?sourceid="+sso_hidSourceId.value+"&cardno="+sso_txtCUid.value+"&tmp="+Math.floor(Math.random()*1000)+"&jsonp="+callbackcheckcard;window[callbackcheckcard]=function(data){if(data.code==="F"){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_wrongUid);return false}else{if(sso_txtcPwd.value.length===0){sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_emptypwd);return false}else{if(isPwd1(sso_txtcPwd.value)){sso_popLogin.showErrors(sso_consts.sso_logintype_card)}else{sso_popLogin.showErrors(sso_consts.sso_logintype_card,sso_consts.sso_error_wrongPwd);return false}sso_popLogin.showErrors(sso_consts.sso_logintype_card);sso_popLogin.submitLogin(sso_txtCUid.value,sso_txtcPwd.value,"","F",sso_consts.sso_logintype_card)}}};sso_popLogin.jsonpRequest(url)}}},onthridlogin:function(){var aliurl=sso_Config.thirdUrl.popalipay,qqurl=sso_Config.thirdUrl.popqq,wburl=sso_Config.thirdUrl.popweibo,nete=sso_Config.thirdUrl.popnete,renren=sso_Config.thirdUrl.poprenren,baidu=sso_Config.thirdUrl.popbaidu;openwin=function(url,h,w,t,l){window.open(url+"?DivMaskFlagBackUrl="+sso_popLogin.getProcxyUrl(),"newwindow","height="+h+",width="+w+",top="+t+",left="+l+",toolbar=no,menubar=no,scrollbars=no, resizable=yes,location=no, status=no")};sso_qq.onclick=function(){openwin(qqurl,600,800,300,300)};sso_sina.onclick=function(){openwin(wburl,600,800,300,300)};sso_nete.onclick=function(){openwin(nete,600,800,300,300)};sso_renren.onclick=function(){openwin(renren,600,800,200,300)};sso_baidu.onclick=function(){openwin(baidu,600,800,300,300)}},onrefreshvcode:function(){sso_imgCode.onclick=function(){sso_popLogin.isBlack();sso_verifyCode.focus()}},onrefreshPhonevcode:function(){sso_imgCodePhone.onclick=function(){sso_popLogin.isBlackForMobile();sso_txtCodePwd.focus()}},onuidblur:function(){sso_txtUid.onblur=function(){sso_popLogin.isBlack()}},onmobileblur:function(){sso_mobilePhone.onblur=function(){sso_popLogin.isBlackForMobile()}},gettmp:function(c,r){return c+"tmp="+Math.floor(Math.random()*r)},jsonpRequest:function(url,isAsync,fuc){var script=document.createElement("script");script.type="text/javascript";script.async=isAsync||false;script.src=url;document.body.insertBefore(script,document.body.firstChild)},getCookie:function(c_name){if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1){c_end=document.cookie.length}return unescape(document.cookie.substring(c_start,c_end))}}return""},setCookie:function(c_name,value,expiredays){var exdate=new Date();exdate.setDate(exdate.getDate()+expiredays);document.cookie=c_name+"="+escape(value)+((expiredays==null)?"":";expires="+exdate.toGMTString())},postRequest:function(url,callback){var xmlhttp="";var requstdata="";if(window.XMLHttpRequest){xmlhttp=new XMLHttpRequest()}else{xmlhttp=new ActiveXObject("Microsoft.XMLHTTP")}xmlhttp.open("POST",url,true);xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlhttp.withCredentials=true;xmlhttp.send();xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4&&xmlhttp.status==200){requstdata=xmlhttp.responseText;callback(eval("("+requstdata+")"))}}},isBeforeIE10:function(){var Sys={};var ua=navigator.userAgent.toLowerCase();var s;(s=ua.match(/rv:([\d.]+)\) like gecko/))?Sys.ie=s[1]:(s=ua.match(/msie ([\d.]+)/))?Sys.ie=s[1]:0;if(Sys.ie){var ver=parseInt(Sys.ie);if(ver<10){return true}else{return false}}return false},isLogin:function(isNoneLogin){sso_popLogin.isLoginByAuth(isNoneLogin)},isLoginByAuth:function(isNoneLogin){if(sso_popLogin.isBeforeIE10()&&window.location.protocol==="http:"){var callbackislogin="tmp_"+parseInt(Math.random()*1000000,10);var url=sso_consts.rootUrl+"/ssoproxy/checkloginstatus?jsonp="+callbackislogin;window[callbackislogin]=function(data){if(data.code!="0"){SSO_NotLoginCallBack(isNoneLogin)}else{sso_hideMask()}};sso_popLogin.jsonpRequest(url,false)}else{var url=sso_consts.rootUrl+"/ssoproxy/checkloginstatus";var callback=function(data){if(data.returnCode==0){sso_hideMask()}else{SSO_NotLoginCallBack(isNoneLogin)}};sso_popLogin.postRequest(url,callback)
}},createIframe:function(o){if(sso_ie6&&o){var ifr=document.createElement("iframe"),w=o.clientWidth+10,h=o.clientHeight+10;ifr.style.cssText="display:none;_display:block;position:absolute;top:0;left:-5;z-index:-1;filter:mask();width:"+w+"px;height:"+h+"px;";if(!document.body){var bd=document.createElement("body");document.appendChild(bd)}o.appendChild(ifr)}},SendSmsByLogin:function(){if(jpIsBlackForMobile==="block"){return false}sso_popLogin.hideDynamicErrors();$__SSO_ID("sso_phoneLoginTip").style.display="none";sso_dyPwdFirst.value="";var uid=sso_mobilePhone.value,vcode=sso_txtCodePwd.value,valid_status=true;var validForm=function(uid,vcode){if(uid){if(!isMobile_SSO(sso_trim(uid))){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_wrongPhone);return false}if(uid===sso_consts.sso_tip_mobile||sso_trim(uid)===""){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyDyncPhone);return false}}else{sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyDyncPhone);return false}if($__SSO_ID("sso_phoneCodeLi").style.display=="block"&&(!vcode||vcode===sso_consts.sso_tip_verycode||sso_trim(vcode)==="")){sso_popLogin.showErrors(sso_consts.sso_logintype_phone,sso_consts.sso_error_emptyverycode);sso_txtCodePwd.value="";sso_txtCodePwd.focus();return false}return true};valid_status=validForm(uid,vcode);if(valid_status){var sendPwdUrl=sso_Config.jsonpUrl.sendDyncPwd+sso_popLogin.gettmp("&",1000)+"&mobile="+uid+"&vcode="+escape(vcode)+"&captchaID="+sso_imgCodePhone.datahash;sso_popLogin.jsonpRequest(sendPwdUrl)}},countDownPhone:function(){sso_reSend.onclick=function(){return false};sso_reSend.className="lg_btn3_disabled";countDown(60,function(){if(sso_reSend.value){sso_reSend.value="发送动态密码"}else{sso_reSend.innerHTML="发送动态密码"}sso_reSend.className="lg_btn3";sso_reSend.onclick=sso_popLogin.SendSmsByLogin},sso_reSend,"秒后重发")},sso_showTip:function(obj,defaultvalue){obj.onfocus=obj.onclick=function(){if(obj.value==""||obj.value==defaultvalue){obj.value=""}obj.style.color="black";obj.focus()};obj.onblur=function(){if(obj.value==""||obj.value==defaultvalue){obj.value=defaultvalue;obj.style.color="gray"}}},showErrors:function(logintype,msg){if(logintype==sso_consts.sso_logintype_member){sso_popLogin.showMemberErrors(msg)}if(logintype==sso_consts.sso_logintype_card){sso_popLogin.showCommonErrors(msg)}if(logintype==sso_consts.sso_logintype_phone){sso_popLogin.showDynamicErrors(msg)}},showMemberErrors:function(t){if(t){$__SSO_ID("sso_domErrorli").style.display="block";sso_membererror.innerHTML="<i class='lg_ico_alert'></i>"+t;sso_membererror.style.visibility="visible"}else{$__SSO_ID("sso_domErrorli").style.display="none";sso_membererror.style.visibility="hidden"}},showCommonErrors:function(t){if(t){sso_cardError.style.display=consts.display.block;sso_commonerror.style.visibility=consts.visibility.visible;sso_commonerror.innerHTML="<i class='lg_ico_alert'></i>"+t}else{sso_cardError.style.display="none";sso_commonerror.style.visibility="hidden"}},showDynamicErrors:function(t){if(t){$__SSO_ID("sso_phoneLoginErr").style.display="block";sso_dymembererror.innerHTML="<i class='lg_ico_alert'></i>"+t;sso_dymembererror.style.visibility="visible"}else{$__SSO_ID("sso_phoneLoginErr").style.display="none";sso_dymembererror.style.visibility="hidden"}},hideErrors:function(){$__SSO_ID("sso_domErrorli").style.display="none";sso_membererror.style.visibility="hidden"},hideDynamicErrors:function(){$__SSO_ID("sso_phoneLoginErr").style.display="none";sso_dymembererror.style.visibility="hidden"},getProcxyUrl:function(){var sso_loginprocxyPath=$__SSO_ID("sso_loginprocxyPath");if(sso_loginprocxyPath){return sso_loginprocxyPath.value}else{var pathName=window.location.pathname.substring(1);var webName=pathName==""?"":pathName.substring(0,pathName.indexOf("/"));return window.location.protocol+"//"+window.location.host+"/"+webName+"/"+"loginprocxy.html"}},isBlack:function(){if(!returnFlag){sso_popLogin.hideErrors()}else{returnFlag=false}var uid=sso_txtUid.value;if(uid){if(uid===sso_consts.sso_tip_name||sso_trim(uid)===""){sso_txtUid.value=sso_consts.sso_tip_name;sso_txtUid.style.color="gray";return}if(uid.length<=60){sso_verifyCode.value=sso_consts.sso_tip_verycode;sso_verifyCode.style.color="gray";this.jsonpRequest(sso_Config.jsonpUrl.checkIsBlack+this.gettmp("&",1000)+"&username="+uid)}else{this.showErrors(sso_consts.sso_logintype_member,"登陆名最多只能输入60个字符")}}else{sso_txtUid.value=sso_consts.sso_tip_name;sso_txtUid.style.color="gray"}return jpIsBlack},isBlackForMobile:function(){sso_popLogin.hideDynamicErrors();var mobile=sso_mobilePhone.value;if(mobile){sso_txtCodePwd.value=sso_consts.sso_tip_verycode;sso_txtCodePwd.style.color="gray";this.jsonpRequest(sso_Config.jsonpUrl.checkIsBlackForMobile+this.gettmp("&",1000)+"&username="+mobile)}else{sso_mobilePhone.value=sso_consts.sso_tip_mobile;sso_phoneCodeLi.style.display="none";sso_mobilePhone.style.color="gray"}return jpIsBlackForMobile},showVcode:function(show){if(show){sso_divVerifyCode.style.display="block";
var callbacksend="tmp_"+parseInt(Math.random()*1000000,10);var url=sso_Config.jsonpUrl.simpleValidateCode+"?t=div&resultLevel="+riskLevel+"&tmp="+Math.round(Math.random()*10000)+"&jsonp="+callbacksend;window[callbacksend]=function(data){if(data.code=="1"){var imgUrl="data:image/gif;base64,"+data.imageStr;var Hash=data.captcbaid;sso_imgCode.datahash=Hash;sso_imgCode.src=imgUrl}};sso_popLogin.jsonpRequest(url)}else{sso_divVerifyCode.style.display="none"}},showPhoneVcode:function(show){if(show){sso_phoneCodeLi.style.display="block";var callbacksend="tmp_"+parseInt(Math.random()*1000000,10);var url=sso_Config.jsonpUrl.simpleValidateCode+"?resultLevel="+riskLevel+"&tmp="+Math.round(Math.random()*10000)+"&jsonp="+callbacksend;window[callbacksend]=function(data){if(data.code=="1"){var imgUrl="data:image/gif;base64,"+data.imageStr;var Hash=data.captcbaid;sso_imgCodePhone.datahash=Hash;sso_imgCodePhone.src=imgUrl}};sso_popLogin.jsonpRequest(url)}else{sso_phoneCodeLi.style.display="none"}},IsCardNum:function(txtVal){return/^[0-9][0-9]{7}|^[0-9][0-9]{9}$/.test(txtVal)},submitLogin:function(signin_uid,signin_pwd,txtCode,IsAuto,NewSSOLoginType,txtCodeID){var backUrl=sso_popLogin.getProcxyUrl()+sso_popLogin.gettmp("?",10000),idoc=sso_ifrprocxy.contentDocument||sso_ifrprocxy.contentWindow.document,ifrm=idoc.createElement("form");if(!idoc.body){var bd=document.createElement("body");idoc.appendChild(bd)}var createHidden=function(frm,id,val){var hid=idoc.createElement("input");hid.id=hid.name=id;hid.value=val;frm.appendChild(hid)};ifrm.name="NewPostLogin";ifrm.action=sso_Config.jsonpUrl.login+sso_popLogin.gettmp("&",1000);ifrm.method="POST";createHidden(ifrm,"buttonId",sso_buttonID);if(3==NewSSOLoginType){createHidden(ifrm,"sem","NoneLogin")}createHidden(ifrm,"signin_uid",signin_uid);createHidden(ifrm,"signin_pwd",signin_pwd);createHidden(ifrm,"txtCode",txtCode);createHidden(ifrm,"vcodeID",txtCodeID);createHidden(ifrm,"IsAuto",IsAuto);createHidden(ifrm,"NewSSO","T");createHidden(ifrm,"NewSSOBackURL",backUrl);createHidden(ifrm,"NewSSOToken",jsptoken);if(sso_consts.sso_logintype_card==NewSSOLoginType){createHidden(ifrm,"sso_hidSourceId",sso_hidSourceId.value)}createHidden(ifrm,"NewSSOLoginType",NewSSOLoginType);idoc.body.appendChild(ifrm);ifrm.submit()}};sso_popLogin.init();