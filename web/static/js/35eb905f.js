/**
 * Created by Administrator on 2018/2/9.
 */
/**BuildTime: 2017-11-16 11:25:55 *If you found any bug, please mail to zhizhuochen@ctrip.com*/ /*! Sea.js 2.1.1 | seajs.org/LICENSE.md */(function(t,u){function v(b){return function(c){return Object.prototype.toString.call(c)==="[object "+b+"]"}}function Q(){return w++}function I(b,c){var a;a=b.charAt(0);if(R.test(b))a=b;else if("."===a){a=(c?c.match(E)[0]:h.cwd)+b;for(a=a.replace(S,"/");a.match(J);)a=a.replace(J,"/")}else a="/"===a?(a=h.cwd.match(T))?a[0]+b.substring(1):b:h.base+b;return a}function K(b,c){if(!b)return"";var a=b,d=h.alias,a=b=d&&F(d[a])?d[a]:a,d=h.paths,g;if(d&&(g=a.match(U))&&F(d[g[1]]))a=d[g[1]]+g[2];g=a;var e=h.vars; e&&-11*navigator.userAgent.replace(/.*AppleWebKit\/(\d+)\..*/,"$1"),Z=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,$=/\\\\/g,r=f.cache={},C,G={},H={},D={},j=e.STATUS={FETCHING:1, SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};e.prototype.resolve=function(){for(var b=this.dependencies,c=[],a=0,d=b.length;a=j.LOADING)){this.status=j.LOADING;var b=this.resolve();m("load",b);for(var c=this._remain=b.length,a,d=0;d=j.EXECUTING)return this.exports;this.status=j.EXECUTING;var c=this.uri;b.resolve=function(a){return e.resolve(a,c)};b.async=function(a,g){e.use(a,g,c+"_async_"+w++);return b};var a=this.factory,a= x(a)?a(b,this.exports={},this):a;a===u&&(a=this.exports);null===a&&!O.test(c)&&m("error",this);delete this.factory;this.exports=a;this.status=j.EXECUTED;m("exec",this);return a};e.resolve=function(b,c){var a={id:b,refUri:c};m("resolve",a);return a.uri||K(a.id,c)};e.define=function(b,c,a){var d=arguments.length;1===d?(a=b,b=u):2===d&&(a=c,A(b)?(c=b,b=u):c=u);if(!A(c)&&x(a)){var g=[];a.toString().replace($,"").replace(Z,function(a,b,c){c&&g.push(c)});c=g}d={id:b,uri:e.resolve(b),deps:c,factory:a};if(!d.uri&& n.attachEvent){var f=W();f&&(d.uri=f.src)}m("define",d);d.uri?e.save(d.uri,d):C=d};e.save=function(b,c){var a=e.get(b);a.status0&&document.forms.length>1?window.fm=document.forms[1]:window.fm=document.forms[0]}var S={_elem:function(t,e,n){"function"==typeof t.bind&&(t=t[0]);var r=n+"ElementSibling",i=n+"Sibling";"first"==n||"last"==n?(r=n+"ElementChild",i=n+"Child"):"parent"==n&&(r=i="parentNode");var o;for(o=t[r]||t[i];o&&1!=o.nodeType||o&&e&&!Sizzle.matchesSelector(o,e);)o=o[i];return o},prev:function(t,e){return S._elem(t,e,"previous")},next:function(t,e){return S._elem(t,e,"next")},firstChild:function(t,e){return S._elem(t,e,"first")},lastChild:function(t,e){return S._elem(t,e,"last")},parent:function(t,e){return S._elem(t,e,"parent")},insertBefore:function(t,e){"function"==typeof t.bind&&(t=t[0]),"function"==typeof e.bind&&(e=e[0]),e.parentNode.insertBefore(t,e)},insertAfter:function(t,e){"function"==typeof t.bind&&(t=t[0]),"function"==typeof e.bind&&(e=e[0]);var n=e.parentNode,r=n.lastChild;if(r==e)n.appendChild(t);else{var i=S.next(e);n.insertBefore(t,i)}},show:function(t){t&&("function"!=typeof t.removeClass&&(t=$(t)),t.removeClass("hidden"))},hide:function(t){t&&("function"!=typeof t.addClass&&(t=$(t)),t.addClass("hidden"))},trigger:function(t,e){if(t)if("function"==typeof t.bind&&(t=t[0]),t.dispatchEvent){var n=document.createEvent("Event");n.initEvent(e,!0,!0),t.dispatchEvent(n)}else t.fireEvent("on"+e)},fix:function(t){return t.preventDefault||(t.preventDefault=function(){t.returnValue=!1}),t.stopPropagation||(t.stopPropagation=function(){t.cancelBubble=!0}),t.stop||(t.stop=function(){this.preventDefault(),this.stopPropagation()}),t},toArray:function(t){try{return Array.prototype.slice.apply(t)}catch(e){for(var n=[],r=0,i=t.length;i>r;r++)n.push(t[r]);return n}},format:function(t){var e=arguments;return 0==e.length?t:t.replace(/\$(\d+)/g,function(t,n){return void 0==e[n]?"":e[n]})},limitSubmit:function(){function t(){clearTimeout(e),e=setTimeout(function(){r=!1},2e3)}restFm();var e,n=fm.submit,r=!1;fm.submit=function(){if(!r){r=!0,t();try{n.apply(fm)}catch(e){n()}}},fm.onsubmit=function(){return r?!1:(r=!0,void t())}},dateDiff:function(t,e,n,r){"date"!==$.type(t)&&(t=t.toDate()),"date"!==$.type(e)&&(e=e.toDate());var i=Math.abs(t.getTime()-e.getTime());switch(n){case"S":return i;case"s":return Math.round(i/1e3);case"m":return Math.round(i/1e3/60);case"h":return Math.round(i/1e3/60/60);case"d":return Math.round(i/1e3/60/60/24);case"M":return Math.abs(12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth()));case"y":return Math.abs(t.getFullYear()-e.getFullYear());default:return null}},dateDiffP:function(t,e,n,r){"date"!==$.type(t)&&(t=t.toDate()),"date"!==$.type(e)&&(e=e.toDate());var i=t.getTime()-e.getTime();switch(n){case"S":return i;case"s":return Math.round(i/1e3);case"m":return Math.round(i/1e3/60);case"h":return Math.round(i/1e3/60/60);case"d":return Math.round(i/1e3/60/60/24);case"M":return Math.abs(12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth()));case"y":return Math.abs(t.getFullYear()-e.getFullYear());default:return null}},postForm:function(t,e){if(e){var n=S.fix(e);n.preventDefault(),n.stopPropagation()}restFm(e),fm.target="_self";var r;"string"==typeof t?r=t:t&&(t.href||t.getAttribute("href"))?(r=t.href||t.getAttribute("href"),fm.target=t.target||"_self"):r=fm.action,r=/^(javascript:)/i.test(r)?window.location.href:r,fm.action=r,fm.submit()},create:function(t){var e=document.createElement("div"),n=/^<([a-zA-Z0-9]+)(?=\s|\/>|>)[\s\S]*>$/,r={colgroup:"table",col:"colgroup",thead:"table",tfoot:"table",tbody:"table",tr:"tbody",th:"tr",td:"tr",optgroup:"select",option:"optgroup",legend:"fieldset"};return S.create=function(t){if(t=t.trim(),!n.test(t))return document.createElement(t);var i=r[t.match(n)[1]];if(!i)return e.innerHTML=t,e.removeChild(e.firstChild);var o=0,a=e;do t="<"+i+">"+t+"",o++;while(i=r[i]);a.innerHTML=t;do a=a.removeChild(a.firstChild);while(--o>-1);return a},S.create(t)},formSerialize:function(t){var e=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,n=/^(?:select|textarea)/i;restFm();var r=t.elements?S.toArray(t.elements):[],i={};return r.each(function(t,r){t.name&&!t.disabled&&(t.checked||n.test(t.nodeName)||e.test(t.type))&&(t.name in i?i[t.name]+=","+$(t).value():i[t.name]=$(t).value())}),i},height:function(t){"function"!=typeof t.css&&(t=$(t));var e=parseInt(t.css("height"));return isNaN(e)&&(e=t[0].offsetHeight),e},width:function(t){"function"!=typeof t.css&&(t=$(t));var e=parseInt(t.css("width"));return isNaN(e)&&(e=t[0].offsetWidth),e},actFormDoPost:function(t,e,n){if(e){var r=S.fix(e);r.preventDefault(),r.stopPropagation()}n.target="_self";var i;"string"==typeof t?i=t:t&&(t.href||t.getAttribute("href"))?(i=t.href||t.getAttribute("href"),n.target=t.target||"_self"):i=n.action,i=/^(javascript:)/i.test(i)?window.location.href:i,n.action=i,n.submit()},actFormDoPostIE8:function(t,e,n){n.target="_self";var r;"string"==typeof t?r=t:t&&(t.href||t.getAttribute("href"))?(r=t.href||t.getAttribute("href"),n.target=t.target||"_self"):r=n.action,r=/^(javascript:)/i.test(r)?window.location.href:r,n.action=r,n.submit()}};!function(S){S.ajax=function(t,e){var n=e.onsuccess;e.onerror||cQuery.COMMON_DONOTHING;e.onsuccess=function(t,e){try{var r=cQuery.parseJSON(e)}catch(i){return void cQuery.log("Taocan","Invalid data format.")}r.success?n(r.data):cQuery.log("Taocan",r.info)},e.onerror=function(){cQuery.log("Taocan","Some error occured when getting the data.")},$.ajax(t,e)}}(S),function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return-1;var o=+e||0;if(Math.abs(o)===1/0&&(o=0),o>=i)return-1;for(n=Math.max(o>=0?o:i-Math.abs(o),0);i>n;){if(n in r&&r[n]===t)return n;n++}return-1}),Array.prototype.contains||(Array.prototype.contains=function(t){if(null==this)throw new TypeError('"this" is null or not defined');for(var e=0;ee;e++)if(t(this[e],e))return this[e];return void 0},Array.prototype.last=function(t){if("function"!=typeof t)return this.length?this[this.length-1]:void 0;for(var e=this.length-1;e>=0;e--)if(t(this[e],e))return this[e];return void 0},Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,u=[];for(o in i)t.call(i,o)&&u.push(o);if(e)for(a=0;r>a;a++)t.call(i,n[a])&&u.push(n[a]);return u}}())}();var Mod={showTips:function(t,e,n,r,i){return Mod.formValidator||(Mod.formValidator=$(document).regMod("validate","1.1")),"function"!=typeof t.bind&&(t=$(t)),Mod.formValidator.method("show",{$obj:t,data:e,removeErrorClass:!0,hideEvent:i||"none",isFocus:r,isScroll:n,group:t.uid()}),$("#"+t.uid()).css("z-index","199"),!1},hideTips:function(t){if(t&&(t="function"!=typeof t.bind?$(t):t,t.length>1&&t.each(function(t){var e=$(t);e.removeClass("f_error");var n=$("#"+e.uid());n.length>0&&n.remove()}),1==t.length)){t.removeClass("f_error");var e=$("#"+t.uid());e.length>0&&e.remove()}return!0},hideMessage:function(t){if(t&&(t="function"!=typeof t.bind?$(t):t,t.length>1&&t.each(function(t){var e=$(t),n=$("#"+e.uid());n.length>0&&n.remove()}),1==t.length)){var e=$("#"+t.uid());e.length>0&&e.remove()}return!0},showLoading:function(t,e,n){"function"==typeof t.bind&&(t=t[0]);var r=S.height(t),i=S.width(t),o=Math.abs((r-80)/2),a=Math.abs(r-o);if(t._loading&&S.parent(t._loading))t._loading.style.width=i+"px",t._loading.style.height=a+"px",t._loading.style.paddingTop=o+"px",S.show(t._loading);else{var u='

    $4
    ';t._loading=S.create(S.format(u,i,o,a,e||"正在加载，请稍候......")),t.appendChild(t._loading)}n&&$(t._loading).css(n)},hideLoading:function(t){"function"==typeof t.bind&&(t=t[0]),t._loading&&S.hide(t._loading)},initSubmitLoading:function(){function t(){$("#divLoading").removeClass("hidden").mask(),(cQuery.browser.isIE6||cQuery.browser.isIE7)&&setTimeout(function(){$("#divLoading").find("img")[0].src="//pic.c-ctrip.com/common/loading_50.gif"},50)}restFm();var e=fm.submit;fm.submit=function(){t();try{e.apply(fm)}catch(n){e(),window.event&&(window.event.returnValue=!1)}},fm.onsubmit=function(){t()}},regJMP:function(){$(document).regMod("jmp","1.0")}};!function(t){if(!("onmouseenter"in document.createElement("div"))){var e=$.fn.bind,n={mouseenter:"mouseover",mouseleave:"mouseout"};$.fn.bind=function(t,r){var i=Array.prototype.slice.call(arguments);if("mouseenter"!==t&&"mouseleave"!==t)return e.apply(this,i);var o=this[0],a=function(t){var e=t.relatedTarget;e&&(e===o||16&o.compareDocumentPosition(e))||r(t)};return e.apply(this,[n[t],a])}}}(),function(t,exports){var e=t.fn.mask,n=t.fn.unmask;t.fn.mask=function(t,n){if(e.call(this),t){var r=this.data("__mask__");if("maskHide"in r)return this;var i=this;r.stopHide=function(t){t.stopPropagation()},r.maskHide=function(t){i.unmask(!0)},r.hideCallback=n,this.bind("click",r.stopHide),this.parentNode().bind("click",r.maskHide),this.data("__mask__",r)}return this},t.fn.unmask=function(t){if(t){var e=this.data("__mask__");if(!(e&&"maskHide"in e))return n.call(this);this.unbind("click",e.stopHide),this.parentNode().unbind("click",e.maskHide),e.hideCallback(),delete e.stopHide,delete e.maskHide,delete e.hideCallback}return n.call(this),this}}(cQuery,Mod),function(t){var e=t.parseJSON;t.parseJSON=function(n){return"string"==t.type(n)&&n?(n=n.replace(/\t|\n|\r/g,""),e(n)):null}}(cQuery),function(cQuery){cQuery.UnBindEvent=function(target,event){try{if(target.length>1)for(var i=0;in;n++)this[n].value=t}function e(){$.fn.value!=t&&(n=$.fn.value,$.fn.value=t,$.fn.val=t)}function i(t){var e=t.attr("placeholder");e&&new r(t,e)}var n,a="placeholder"in document.createElement("input"),r=function(t,e){""==t[0].value.trim()&&(t[0].value=e),this.txt=t,this.msg=e,t[0].setAttribute("placeholder",e),t[0].value==e&&t.css({color:"gray"}),t.bind("focus",this.hide.bind(this)).bind("blur",this.show.bind(this))};r.prototype={show:function(){var t=this.txt;(this.msg==t[0].value||""==t[0].value.trim())&&(t[0].value=this.msg,t[0].style.color="gray")},hide:function(){var t=this.txt;this.msg==t[0].value&&(t[0].value="",t[0].style.color="")}},exports.enable=function(t){a||(t.find||(t=$(t)),t.find("input[type=text]").each(i),t.find("textarea").each(i),e())};var u=!1;exports.init=function(){return u?void 0:(exports.enable($(document.body)),u=!0,this)}});; define("webresource/widget/dpSearchEntry/dpSearchEntry.FMultiCICtripIndex.widget.js", [], function(require,exports,module){var t=(require("tools/common.js").S,require("tools/common.js").Mod,require("webresource/model/dpSearchEntry.model.js"),{}),e=require("webresource/component/dpSearchEntryModule/dpSearchEntry.publicMod.js"),n={sourceIndex:5,withHistory:!1,abVersion:"A",entryMark:{},component:{},_configUrl:"",init:function(t,i,r){this.sourceIndex=t,this.withHistory=i,this.initCallBack=r,this.entryMark=null;var o=n;7==t&&e.entryVersionAB(o.ABTestDataFormat)},ABTestDataFormat:function(t){if(t&&t.Data){var e="A";t.Data.AB&&t.Data.AB>"A"&&(e="B"),n.abVersion=e,n.public_init(e)}else n.public_init("A")},UpdateConfigAjaxUrl:function(t,e){var n="",i="/"==window.location.pathname?"":window.location.pathname.split("/"),r=FHXConfig.DATA&&FHXConfig.DATA.IsOffline,o=FHXConfig.hasOwnProperty("DATA")&&r&&("true"==r||"True"==r);return n=o?i.length>0?"/"+i[1]:"/freetravel-offline":2==e||7==e||6==e||5==e||8==e?"http://taocan.ctrip.com/FreeTravel":i.length>0?"/"+i[1]:"/FreeTravel",-1==t.indexOf(n)&&(t=n+t),t},public_init:function(i){var r=this,o=[r.sourceIndex,r.withHistory,r.entryMark],a=o[0],u=o[1],s=o[2];window.location.href;t=require("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCIComponent.js"),t.ComFun.initVersionMod(i,t),t.ABtest_type_value=i,n.component=t,n.HistoryKeeper=t.ComFun.HistoryKeeper,r.initCallBack(n),$("#js-dpSearcher").addClass(" new_four_box"),t.EntriesDiff.defaultInitObj.init(t),1==a&&t.EntriesDiff.sdpIndexObj._CreateDPEntryHtml(),t.ComFun.setOneWayState();var c=t.ComFun.TraceLog;if(c&&c.LogUB_ABTrack(i,"170913_ddb_syrko"),this.LogUB=function(e){return t.ComFun.TraceLog.LogUB(e,t)},e.init(t),t.ComFun.clearData(),t.withHistory=u,t.entryMark=s,t.ComFun.CheckSourceIndex_Init(a)){t.ComFun.UpdateConfigAjaxUrl(),t.ComFun.GetPreData();var l=t.sourceName;l.isCtripIndex&&t.EntriesDiff.ctripIndexSearchObject.init(),t.withHistory?t.ComFun.HistoryKeeper.recover(t):t.ComFun.setDefault._setDefaultDate(),(l.isDpConfirm||l.isCtripIndex||l.isHotelInternational)&&(t.isShowWeek=!0),l.isHotelInternational||t.PersonSelectComponent.init(t),t.FlightComponent.init(t),l.isHotelInternational||t.HotelComponent.init(t),t.SearchBtnComponent.init(),l.isCtripIndex&&(n.txtFrom=t.fltTextBoxs[0]),t.ComFun.ComponentFinished.init()}},LogUB:function(e){return t.ComFun&&t.ComFun.TraceLog.LogUB(e,t)}};module.exports=n});; define("webresource/model/dpSearchEntry.model.js", [], function(require,exports,module){var t={};return t.GetFlightCityData={execute:function(t,e){$.jsonp(t,{onload:function(t){e(t)}})}},t.publicAjaxData={execute:function(t,e,n){$.jsonp(t,{onload:function(t){e(t)},onerror:function(t){n(t)}})}},t.GetCityMapping={execute:function(t,e){$.jsonp(t,{onload:function(t){e(t)}})}},t.GetFlightCityBlackList={execute:function(t,e){$.jsonp(t,{onload:function(t){e(t)}})}},t.CheckDPShow={execute:function(t,e){$.jsonp(t,{onload:function(t){e(t)}})}},t});; define("webresource/component/dpSearchEntryModule/dpSearchEntry.publicMod.js", [], function(require,exports,module){var t=require("tools/jquery"),e={init:function(t){this.mainComponent||(this.mainComponent=t)},setFilterData:function(t,e){var n="",i="",r="",o="";return t.Items.each(function(t){n=t.CityEnName,i=t.Type&&"City"!=t.Type&&"IntlCity"!=t.Type&&t.Name?t.Name:"",i+=i&&t.CityName?"，"+t.CityName:t.CityName&&!i?t.CityName:"",i+="IntlProvince"!=t.Type&&t.ProvinceName?"，"+t.ProvinceName:"",i+=t.CountryName?"，"+t.CountryName:"","中国"!=t.CountryName&&(r=t.Ename?t.Ename+"，":"",r+=t.CityEnName?t.CityEnName+"，":"",r+=t.CountryEName?t.CountryEName:""),o=t.Type;var a=t.Id;e.data+="@"+n+"|"+i+"|"+t.CityId+"|"+t.CityEnName+"|"+t.CityEnName+"|"+r+"|"+o+"|"+a,r=""}),e},checkType:function(t){var n=e.check_txt;return n(t,"Hotel")?"酒店":n(t,"Markland")||n(t,"IntlPOILandmark")?"地标":n(t,"Zone")?"商业区":n(t,"RailwayStation")||n(t,"Airport")||n(t,"IntlPOIAirport")?"机场车站":n(t,"Location")?"行政区":n(t,"City")||n(t,"IntlCity")?"城市":n(t,"District")||n(t,"IntlDistrict")?"景区":n(t,"RailwayStation")?"车站":n(t,"Airport")||n(t,"IntlAirport")||n(t,"IntIPOIAirport")?"机场":n(t,"IntlProvince")?"省":""},check_txt:function(t,e){return t.data&&t.data.indexOf(e)>=0},editFilterData:function(t){var n=e,i=n.checkeAndSetType();if(!t||!t.list||0==t.list.length)return t;for(var r=0;r";e.bottom&&0!=e.bottom.length?(e.isLand=-1,e.bottom=e.bottom?e.bottom.replace(new RegExp(n,"g"),r):""):e.isLand=1,e.typeName=i,e.colorRight=e.right?e.right.replace(new RegExp(n,"g"),r):"",t.push(e)},getData:function(e){return e.newData=t,e}}},getblackCity:function(){var t=e.mainComponent,n=t.blackList;return n?!1:void $.loader.jsonp(getURl,{charset:this.charset,onload:function(t){n=t||{}}.bind(this)})},needvalidateFn:function(t,e){var n=t.optType,i=t.optTarget,r=i.parent(),o=r.find("input[name=ToCities]").value()||r.parent().find("input[name=ToCities]").value(),a=r.find("input[name=fltToCities]").value()||r.parent().find("input[name=fltToCities]").value();return"to"!=n&&"checkin"!=n||!(o&&e.hotelCityId==o||a&&e[a])?!0:!1},blackCityOpt:function(t){var n=e.mainComponent,i=n.blackList;return i&&0!=i.length&&i[t]?!1:!0},getBlackHotelName:function(t,n){var i=e.mainComponent,r=i.blackList;if(r&&r[t]){var o=r[t].split("$");return o[o.length-1]}return n},getAjaxURL:function(t,n,i,r){var o="",a="online",u=t,s=e.isOffline(r);return s&&(a="offline",u=n),a&&t&&n&&(o="/node/proxy/"+a+"/"+u+"/"+i+".json"),o},isOffline:function(t){return t&&t.isDpConfirm?FRTPage&&FRTPage.DATA&&FRTPage.DATA.IsOffline:!1},entryVersionAB:function(n){var i=e.getAjaxURL("12446","WirelessGeneralService","getabpreinfo"),r={ExpCode:"170913_ddb_syrko",IsUidAssign:!1,Version:"70700",PlatformId:4,ChannelCode:5};t.ajax({type:"POST",url:i,data:cQuery.stringifyJSON(r),dataType:"json",contentType:"application/json",success:function(t){n(t)},error:function(t){window.console&&console.log("Service 'ABTest' error..."),n(null)}})},hotelInfoAjax:function(n,i,r,o){var a=e.getAjaxURL("12446","WirelessGeneralService","GetFHXDPCity",o);if(!a)return void n("","");var u={requestType:r?"flightcode":"keyword",flightCode:r?r:"",keyWordInfo:{keyword:i,appType:1004,isExactSame:!0},platformId:4,version:70700,channelCode:0};t.ajax({type:"POST",url:a,data:cQuery.stringifyJSON(u),dataType:"json",contentType:"application/json",success:function(t){var e="",i="";if(t&&t.Data&&t.Data.Cities&&t.Data.Cities.length){var r=t.Data.Cities[0].HotelCity;e=r.Name,i=r.Id,n(e,i)}else n("","")},error:function(t){window.console&&console.log("Service 'GetFHXDPCity' error..."),n("","")}})},getFHXDPCityInfo:function(n,i,r){var o=e.getAjaxURL("12446","WirelessGeneralService","GetFHXDPCity"),a={requestType:r?"flightcode":"keyword",flightCode:r?r:"",keyWordInfo:{keyword:i,appType:1004,isExactSame:!0},platformId:4,version:70700,channelCode:0},u={CityName:"",CityId:""};t.ajax({type:"POST",url:o,data:cQuery.stringifyJSON(a),dataType:"json",contentType:"application/json",success:function(t){t&&t.Data&&t.Data.Cities&&t.Data.Cities.length&&(u.CityName=r?t.Data.Cities[0].HotelCity.Name:t.Data.Cities[0].FlightCity.Name,u.CityId=r?t.Data.Cities[0].HotelCity.Id:t.Data.Cities[0].FlightCity.Id),n(u)},error:function(t){window.console&&console.log("Service 'GetFHXDPCity' error...")}})}};return e});; define("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCIComponent.js", [], function(require,exports,module){require("tools/FHXAddressNew.js");var S=require("tools/common.js").S,Mod=require("tools/common.js").Mod,e=require("webresource/model/dpSearchEntry.model.js"),t=require("webresource/component/dpSearchEntryCtripIndex/dpSearchPersonSelect.FMultiCIComponent.js"),n=require("webresource/component/dpSearchEntryCtripIndex/dpSearchHistory.FMultiCIComponent.js"),i=require("webresource/component/dpSearchEntryCtripIndex/dpSearchFlight.FMultiCIComponent.js"),r=require("webresource/component/dpSearchEntryCtripIndex/dpSearchHotel.FMultiCIComponent.js"),o=require("webresource/component/dpSearchEntryCtripIndex/dpSearchVailter.FMultiCIComponent.js"),a=require("webresource/component/dpSearchEntryCtripIndex/dpSearchEntryDiffs.FMultiCIComponent.js"),s=require("webresource/component/dpSearchEntryModule/dpSearchEntry.publicMod.js"),l=require("webresource/component/dpSearchEntryCtripIndex/dpSearchTraceLog.FMultiCIComponent.js"),u=require("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCICommon.js"),c=require("webresource/component/dpSearchEntryCtripIndex/dpSearcheEntry.FMultiCIDpInt.js");Mod.EventDispatcher=require("tools/eventdispatcher.js"),Mod.EventEmitter=require("tools/eventemitter.js"),Mod.Placeholder=require("tools/placeholder.js"),Mod.Placeholder.init();var f=require("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCIConfig.js"),d=require("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCINewVersion.js"),h={self:null},p={dpConfirm_default_html:[],sourceName:[],withHistory:!1,CITY_MAPPING:[],FlightBlackList:[],textboxes:[],fltTextBoxs:[],hotelCityChanged:!1,isShowWeek:!1,entryMark:null,_isLoadBlack:!1,ABtest_type_value:"",isOneway:0,oneway_or_goback_clicked:0,cur_fhTabsIndex:0,suggestionContainer:{flight_oldHtml:"",hotel_oldHtml:""},isChange_oneOrback:"0",babyChooseState:!1,qtTabChangeState:!1,defFHTabIndex:-1,blackList:{757:"fltCityName$夏威夷|夏威夷·火奴魯魯,hotCityName$欧胡岛",hotelCityId:3783},componentsObj:{S:S,config:f,Model:e,Mod:Mod,vailterComponent:o,entryDiffComponent:a,flightComponent:i,hotelComponent:r,_personSelect:t,publicMod:s,Common:u,DpInt:c},DpConfirmDefaultObj:{editHtml:"",defaultHtml:"",selectedTabsIndex:"",hotelValues:[],otherValues:{},isOneWay:0,hotelHtml:""},ComFun:{clearData:function(){h.self.sourceName=[],h.self.withHistory=!1,h.self.CITY_MAPPING=[],h.self.FlightBlackList=[],h.self.textboxes=[],h.self.hotelCityChanged=!1,h.self.isShowWeek=!1,h.self._isLoadBlack=!1,h.self.cur_fhTabsIndex=0,h.self.isOneway=0,h.self.defFHTabIndex=-1,h.self.babyChooseState=!1,h.self.fltTextBoxs=[],h.self.dpConfirm_default_html=[],h.self.isChange_oneOrback="0"},setOneWayState:function(){var e=$("#GroupType");if(e&&e.length>0){var t=e.value();0==t||3==t?p.isOneWay=0:1==t||4==t?p.isOneWay=1:(5==t||6==t)&&(p.isOneWay=2)}},initVersionMod:function(e,t){d.initVersion(e,t)},showTips:function(e,t,n,i,r){return n=n||!1,i=i||!0,r=r||"blur",Mod.showTips(e,t,n,i,r)},CheckSourceIndex_Init:function(e){var t=parseInt(e);if(h.self.sourceName=[],!(e&&t>=1&&10>=t))return window.console&&console.log("当前页面无法访问自由行DP入口资源，未提供有效的模块编号"),!1;var n=new Array("","SdpIndex","SdpList","DpConfirm","OfflineIndex","VacationSearch","VacationIndex","CtripIndex","HotelInternational","FlightHome","FlightInternational");return h.self.sourceName["is"+n[t]]=!0,!0},IECheckVersion:function(){var e=navigator.userAgent;return e.indexOf("MSIE")>0||"Microsoft Internet Explorer"==navigator.appName?e.indexOf("MSIE 6.0")>0||e.indexOf("MSIE 7.0")>0||"MSIE8.0"==e.split(";")[1].replace(/[ ]/g,"")||e.indexOf("MSIE 9.0")>0&&!window.innerWidth||e.indexOf("MSIE 9.0")>0?!0:!1:void 0},UpdateConfigAjaxUrl:function(){var e=h.self.ComFun.getUrlMark(),t="//vacations.ctrip.com";-1==f.url.airportAndHotelCityMapping.indexOf(e)&&(f.url.airportAndHotelCityMapping=e+f.url.airportAndHotelCityMapping,f.url.getDpFlightBlackList=e+f.url.getDpFlightBlackList,f.url.getFlightToCityByKeyword=t+f.url.getFlightToCityByKeyword,f.url.getHotelCityByKeyword=t+f.url.getHotelCityByKeyword),h.self.ComFun.is_ABtest_DP()&&(getFlightToCityByKeyword=h.self.ComFun.update_Ajax_ConfigURL(f.url.getFlightToCityByKeyword),f.url.getHotelCityByKeyword=h.self.ComFun.update_Ajax_ConfigURL(f.url.getHotelCityByKeyword))},getUrlMark:function(){var e="";"/"==window.location.pathname?"":window.location.pathname.split("/");return e="//taocan.ctrip.com/FreeTravel",FHXConfig&&FHXConfig.bestone&&(e="//taocan.ctrip.com/FreeTravel"),e},gitCnfigAjaxUrl:function(){return f.url},update_Ajax_ConfigURL:function(e){return h.self.ComFun.is_ABtest_DP()&&(e.indexOf("SearchFlightPoi")>=0||e.indexOf("SearchHotelCity")>=0)&&(e=1==h.self.isOneway&&"B"!=h.self.ABtest_type_value?e.indexOf("&Itinerary")<0?e+"&Itinerary=1":e.replace("&Itinerary=2","&Itinerary=1"):e.indexOf("&Itinerary")<0?e+"&Itinerary=2":e.replace("&Itinerary=1","&Itinerary=2")),e},is_ABtest_DP:function(){return h.self.sourceName.isSdpIndex||h.self.sourceName.isSdpList||h.self.sourceName.isDpConfirm||h.self.sourceName.isVacationSearch||h.self.sourceName.isCtripIndex},FlightSameCityTip:function(e,t){if(0==$("#fltSameCityTipDiv").length){e.bind||(e=$(e));var n=e.offset(),i=S.format(f.html.flightSameCityTipHtml,t);$("body").append(S.create(i));var r=$("#fltSameCityTipDiv"),o=r.offset();o.height+=r.find("span").height();var a=n.top-o.height,s=n.left-(o.width-n.width);r.css({left:s+"px",top:a+"px"}),e.bind("blur",function(){$("#fltSameCityTipDiv").remove()}),e[0].focus()}else e[0].focus()},GetPreData:function(){var t=function(){e.GetFlightCityBlackList.execute(f.url.getDpFlightBlackList,function(e){e.DPFlightBlackList&&e.DPFlightBlackList.length>0&&(h.self.FlightBlackList=e.DPFlightBlackList,h.self._isLoadBlack=!0)})};t()},HistoryKeeper:n,setDefault:{_fields:{from:{id:2,name:"上海",en:"shanghai",date:(new Date).toFormatString("yyyy-MM-dd")},to:{id:"",name:"",en:"",date:(new Date).addDays(1).toFormatString("yyyy-MM-dd")},adults:2,children:0},_setDefaultDate:function(){var e=this;$("#txtFromDate").attr("fromDate",e._fields.from.date),$("#txtToDate").attr("toDate",e._fields.to.date),h.self.sourceName.isSdpIndex?$('#divHotelQuery [data-search="hotel"] input').each(function(t,n){switch(n){case 3:t.attr("fromDate",e._fields.from.date);break;case 4:t.attr("toDate",e._fields.to.date)}}):$('#divHotelQuery [data-search="hotel"] input').each(function(t,n){switch(n){case 4:t.attr("fromDate",e._fields.from.date);break;case 5:t.attr("toDate",e._fields.to.date)}})}},Validator:o,TraceLog:l,ComponentFinished:{init:function(){h.self.sourceName;$.mod&&$.mod.load("jmp","1.0",function(){$(document).regMod("jmp","1.0")})},checkBlackFlt:function(){if(!h.self.ComFun.is_ABtest_DP()){var e=this,t={};if(!h.self._isLoadBlack)return void(t=setTimeout(function(){clearTimeout(t),e.checkBlackFlt()},300));var n=cQuery.cookie.get("StartCity_Pkg","PkgStartCity"),i=$("#hToID").value();h.self.ComFun.Validator.isNotInFlightCityBlack(n,i,h.self)||h.self.sourceName.isSdpList||($("#hToID").value(""),$("#txtTo").value(""))}}},setDpDomOpt:function(){var e=h.self.DpConfirmDefaultObj;e&&e.hotelValues.length>0||(h.self.textboxes.each(function(t,n){e.hotelValues.push(t)}),h.self.ComFun.restoreFltHiddenInput(),t.savePersonSelectedDom())},restoreFltHiddenInput:function(){var e=h.self.DpConfirmDefaultObj;$("#divFlightQuery").find("input[type=hidden]").each(function(t,n){t.value(e.otherValues[t.attr("name")])})},saveFltHiddenInput:function(){var e=h.self.DpConfirmDefaultObj;$("#divFlightQuery").find("input[type=hidden]").each(function(t,n){e.otherValues[t.attr("name")]=t.attr("data-default")})},restoreDpDomOpt:function(){var e=h.self.DpConfirmDefaultObj;if(!(e&&e.hotelValues.length<=0)){h.self.cur_fhTabsIndex;h.self.cur_fhTabsIndex=e.selectedTabsIndex,h.self.isOneway=e.isOneWay,e.hotelValues.each(function(e,t){e.calendar?e.calendar.method("setVal",e,e.attr("data-default")):e.value(e.attr("data-default"))});var t=[],n=$("#FHTabsBox li"),i=h.self.FH_TabsAction;switch(e.selectedTabsIndex){case 0:t=n.eq(0);break;case 1:t=n.eq(1);break;case 2:t=n.eq(2)}h.self.EntriesDiff.dpConfirmObj._operationF_reset(),i.publicOperate_reset(t,e.selectedTabsIndex,i)}},getSearchEntryIndex:function(){var e=1;return h.self.sourceName.isCtripIndex?e=7:h.self.sourceName.isHotelInternational?e=8:h.self.sourceName.isSdpIndex?e=1:h.self.sourceName.isSdpList?e=2:h.self.sourceName.isVacationSearch?e=5:h.self.sourceName.isVacationIndex?e=6:h.self.sourceName.isDpConfirm?e=3:h.self.sourceName.isOfflineIndex&&(e=4),e},getTabsCurIndex:function(){var e=0;return $("#FHTabsBox").find("li").each(function(t,n){$(t).hasClass("cur")&&(e=n)}),e},getblackCity:s.getblackCity,needvalidateFn:function(e,t){var n={optType:e,optTarget:t};return s.needvalidateFn(n,p.blackList)}},PersonSelectComponent:t,FlightComponent:i,HotelComponent:r,SearchBtnComponent:{init:function(){var e=this;e.H=h.self.HotelComponent,e.F=h.self.FlightComponent,e.P=h.self.PersonSelectComponent,this.bindEvent()},bindEvent:function(){var e=$("#FHX_btnSearch");e.bind("click",this.businessOpt.bind(this))},businessOpt:function(e){var t=(e||window.event,h.self.SearchBtnComponent);t.optForCtripIndex()},optForCtripIndex:function(){var e=h.self.SearchBtnComponent;h.self.ComFun.Validator.validateForSubmit(function(){var t=e.getUrl_multi();h.self.ComFun.HistoryKeeper.save("",h.self),$("#FHX_btnSearch").addClass("s_btn_ing2"),$("#FHX_btnSearch").value("搜索中...");var n=$("#FHX_form")[0];n.action=t,n.submit()},h.self)},optForHotelInternational:function(e){h.self.ComFun.Validator.validateForSubmit(function(){h.self.ComFun.HistoryKeeper.save("",h.self);var t=e.getUrl_multi();e.F.txtFromDate.attr("value",e.F.txtFromDate.value()),e.F.txtToDate.attr("value",e.F.txtToDate.value());var n=document.createElement("form");n.action=t,n.method="post",n.innerHTML=$("#FHX_SearchBox")[0].innerHTML.replace(/FHX_/g,""),document.body.appendChild(n),n.submit()},h.self)},getUrl:function(){var e=this,t=[],n=[],i=[],r=[],o=[],a=$('input[name="CheckInDate"]'),s=$('input[name="CheckOutDate"]'),l=$('input[name="searchid"]'),u=$('input[name="searchtype"]'),c=(h.self.fltTextBoxs[2],h.self.fltTextBoxs[3],h.self.SearchBtnComponent.getTrafficType());$("input[name=ToCities]").each(function(e,c){t.push(e.value()),n.push(a[c].value),i.push(s[c].value),r.push(l[c].value||""),o.push(u[c].value||"")});var f=$("#divFlightQuery"),d=f.find(".js_fltItem"),p=[],m=[],y=[],g=[];d.each(function(e,t){2==h.self.isOneway?(p.push(e.find("input[name=fltFromCities]").value()),m.push(e.find("input[name=fltToCities]").value()),y.push(e.find("input[name=txtFromDate]").value()),g.push(e.find("input[name=txtToDate]").value())):0==t&&(p.push(e.find("input[name=fltFromCities]").value()),m.push(e.find("input[name=fltToCities]").value()),y.push(e.find("input[name=txtFromDate]").value()),g.push(e.find("input[name=txtToDate]").value()))});var v=-1==FHXConfig.URL.FREE_COMBINE.indexOf("?")?"?":"&",C={htlSearchIdStr:r.join(","),htlSearchTypeStr:o.join(",")},b=this.setUrlParameter(FHXConfig.URL.FREE_COMBINE+v,[0==p.length?"":p.join(","),0==m.length?"":m.join(","),t.join(","),y.join(","),g.join(","),n.join(","),i.join(","),e.P.selectAdult.value(),e.P.selectChildren.value()],c,C);return b},getUrl_multi:function(){var e=this,t=[],n=[],i=[],r=[],o=[],a=$('input[name="CheckInDate"]'),s=$('input[name="CheckOutDate"]'),l=$('input[name="searchid"]'),u=$('input[name="searchtype"]'),c=(h.self.fltTextBoxs[2],h.self.fltTextBoxs[3],h.self.SearchBtnComponent.getTrafficType());$("input[name=ToCities]").each(function(e,c){t.push(e.value()),n.push(a[c].value),i.push(s[c].value),r.push(void 0!==l[c]?l[c].value||"":""),o.push(void 0!==l[c]?u[c].value||"":"")});var f=$("#divFlightQuery"),d=f.find(".js_fltItem"),p=[],m=[],y=[],g=[];d.each(function(e,t){2==h.self.isOneway?(p.push(e.find("input[name=fltFromCities]").value()),m.push(e.find("input[name=fltToCities]").value()),y.push(e.find("input[name=FromTime]").value()),g.push(e.find("input[name=ToTime]").value())):0==t&&(p.push(e.find("input[name=fltFromCities]").value()),m.push(e.find("input[name=fltToCities]").value()),y.push(e.find("input[name=FromTime]").value()),g.push(e.find("input[name=ToTime]").value()))});var v=-1==FHXConfig.URL.FREE_COMBINE.indexOf("?")?"?":"&",C={htlSearchIdStr:r.join(","),htlSearchTypeStr:o.join(",")},b=this.setUrlParameter(FHXConfig.URL.FREE_COMBINE+v,[0==p.length?"":p,0==m.length?"":m,t.join(","),y,g,n.join(","),i.join(","),e.P.selectAdult.value(),e.P.selectChildren.value()],c,C);return b=b+"&tabChangeState="+h.self.isChange_oneOrback+"&isContainBaby="+h.self.babyChooseState},setUrlParameter:function(e,t,n,i){var r="";i=i||{};var o=i,a=o.htlSearchIdStr,s=o.htlSearchTypeStr;htlSearchId="&hSearchIds="+a,htlSearchType="&hTypes="+s,r=this.setMultiParams(t[0],t[1],t[3],t[4]);var l={htlId:t[2],checkindate:t[5],checkoutdate:t[6]},u={trafficType:n,htlSearchId:htlSearchId,htlSearchType:htlSearchType,adults:t[7],children:t[8]};return d.isVersionB?d.getUrlParameter(e,l,u):0==h.self.cur_fhTabsIndex?S.format(e+r+"h=$1&checkindate=$2&checkoutdate=$3&adults=$4&children=$5"+n+htlSearchId+htlSearchType,t[2],t[5],t[6],t[7],t[8]):1==h.self.cur_fhTabsIndex?S.format(e+r+"&h=$1checkindate=$2&checkoutdate=$3&adults=$4&children=$5"+n+htlSearchId+htlSearchType,"","","",t[7],t[8]):2==h.self.cur_fhTabsIndex?S.format(e+r+"h=$1&checkindate=$2&checkoutdate=$3&adults=$4&children=$5"+n+htlSearchId+htlSearchType,t[2],t[5],t[6],t[7],t[8]):void 0},setMultiParams:function(e,t,n,i){var r=[],o=[],a=[],s=[];return e.length>=1&&(e.each(function(e,t){0==t?2!=h.self.cur_fhTabsIndex&&r.push("from="+e+"&"):2!=h.self.cur_fhTabsIndex&&r.push("from"+(t+1)+"="+e+"&")}),t.each(function(e,t){0==t?2!=h.self.cur_fhTabsIndex&&r.push("to="+e+"&"):2!=h.self.cur_fhTabsIndex&&r.push("to"+(t+1)+"="+e+"&")}),n.each(function(e,t){0==t?2!=h.self.cur_fhTabsIndex&&a.push("fromtime="+e+"&"):2!=h.self.cur_fhTabsIndex&&a.push("fromtime"+(t+1)+"="+e+"&")}),i.each(function(e,t){0==t?2!=h.self.cur_fhTabsIndex&&s.push("totime="+e+"&"):2!=h.self.cur_fhTabsIndex&&s.push("totime"+(t+1)+"="+e+"&")})),2==h.self.isOneway&&(s=["totime=&"]),0==e.length&&(r=["from=&"]),0==t.length&&(o=["to=&"]),0==n.length&&(a=["fromtime=&"]),0==i.length&&(s=["totime=&"]),r.join("")+o.join("")+a.join("")+s.join("")},getTrafficType:function(){var e="",t=h.self.ComFun.getTabsCurIndex();switch(t){case 0:e=0==h.self.isOneway?"&TrafficType=0":1==h.self.isOneway?"&TrafficType=1":"&TrafficType=6";break;case 1:e=0==h.self.isOneway?"&TrafficType=3":1==h.self.isOneway?"&TrafficType=4":"&TrafficType=7";break;case 2:e="&TrafficType=5"}return e}},EntriesDiff:a};return h.self=p,Mod.EventEmitter.extend(h.self),p});; define("tools/FHXAddressNew.js", [], function(require,exports,module){!function(t){function e(t,e){this._init(t,e)}function i(t){function e(){var t=this;i.each(function(e,i){e[0]==t?(e.addClass("hot_selected"),n[i].style.display=""):(e.removeClass("hot_selected"),n[i].style.display="none")})}var i=t.find("span"),n=t.find("ul");if(i.length){for(var r=30,o=0,a=i.length;a>o;o++)r+=i[o].offsetWidth;var s=t.find("div").first();s[0]&&r>278&&s.css("width",r+"px"),i.bind("mousedown",e),e.apply(i[0])}}function n(t){}var r={name:"addressNew",version:"1.0",init:function(){},uninit:function(){},module:e},o=100,a={change:1,userinput:1,enter:1,suggestion:1,filter:1},s="_"+r.name+"_"+r.version;t.extend(e.prototype,{target:null,target_get:function(){return this.target},name:null,name_get:function(){return this.name},name_set:function(t){this.name=t,this._checkEnable()},delay:0,source:null,source_get:function(e){return e?e in this.source?t.copy(this.source[e]):(t.error("mod ("+r.name+","+r.version+") source_get","invalid key "+e),null):t.copy(this.source)},source_set:function(e){e?this.source=t.extend(this.source||{},e):this.source=null,this._refresh()},jsonpSource:null,jsonpSource_get:function(){return this.jsonpSource},jsonpSource_set:function(e){this.jsonpSource=e,e?(this.source=null,this.jsonpSource=e,t.loader.jsonp(this.jsonpSource,{charset:this.charset,onload:function(e){"function"==t.type(this.jsonpSourceInit)&&(e=this.jsonpSourceInit(e)),this.source_set(e)}.bind(this)})):this.source?this.jsonpSource=null:t.error("mod ("+r.name+","+r.version+") jsonpSource_set","invalid source "+e)},jsonpFilter:null,jsonpFilter_get:function(){return this.jsonpFilter},jsonpFilter_set:function(t){this.jsonpFilter=t},jsopFilter_update:function(t){return t},update_jsonpSource:function(t,e){return t},update_html_filter:function(t,e){return t},FH_jsonpSource_filter_url:function(t,e){return t},editFilterDataFn:null,editFilterData:function(t){this.editFilterDataFn=t},jsonpSourceInit:null,jsonpFilterInit:null,needvalidateFn:null,sort:["^0$","^1$","^3+$","^0","^1","^3+","0","1","3+"],sort_get:function(){return t.copy(this.sort)},sort_set:function(e){this.sort=t.copy(e),this._sortReString=null,this._refresh()},display:{left:0,right:1,bottom:5,suggestion:1,value:1},display_get:function(e){return e?e in this.display?t.copy(this.display[e]):(t.error("mod ("+r.name+","+r.version+") display_get","invalid key "+e),null):t.copy(this.display)},display_set:function(e){e?t.extend(this.display,e):this.display={},this._refresh()},relate:{},relate_get:function(e){return e?e in this.relate?t.copy(this.relate[e]):(t.error("mod ("+r.name+","+r.version+") relate_get","invalid key "+e),null):t.copy(this.relate)},relate_set:function(e){e?this.relate=t.copy(e):this.relate={},this._refresh()},message:{suggestion:"从下列城市选择",filterResult:"${val}",noFilterResult:"对不起，找不到：${val}",sort:[]},message_set:function(e){e?t.extend(this.message,e):this.message={},this._refresh()},message_get:function(e){return e?e in this.message?t.copy(this.message[e]):(t.error("mod ("+r.name+","+r.version+") message_get","invalid key "+e),null):t.copy(this.message)},offset:null,offset_set:function(e){e?this.offset=t.copy(e):this.offset=null,this._refresh()},offset_get:function(e){return t.copy(this.offset)},minLength:1,isAutoCorrect:!1,isFocusNext:!1,isFilterSelect:!0,isFilterGetFirstWhenBlur:!0,isFilterGetHoverWhenBlur:!1,isOneway:!1,ABtest_type_value:"",keyboard:{up:!0,down:!0,left:!0,right:!0,enter:!0},template:{suggestion:'
    ${message.suggestion}
    {{enum(key) data}}
    ${key} {{/enum}}
    {{enum(key,arr) data}}
    {{each arr}}
    ${display} {{/each}}
    {{/enum}}
    ',suggestionStyle:" .c_address_box { background-color: #fff; font-size: 12px; width: 290px; } .c_address_box a { text-decoration: none; } .c_address_hd { height: 24px; border-color: #2C7ECF; border-style: solid; border-width: 1px 1px 0; background-color: #67A1E2; color:#CEE3FC; line-height: 24px; padding-left: 10px; } .c_address_hd strong{color:#fff;} .c_address_bd { border-color: #999999; border-style: solid; border-width: 0 1px 1px; overflow: hidden; padding:10px; } .c_address_ol { margin:0; padding:0 0 20px; border-bottom: 1px solid #5DA9E2; } .c_address_ol li { color: #005DAA; cursor: pointer; float: left; height: 20px; line-height: 20px; list-style-type: none; text-align: center; } .c_address_ol li span { padding:0 8px; white-space:nowrap; display:block; } .c_address_ol li .hot_selected { display:block; padding:0 7px; background-color: #FFFFFF; border-color: #5DA9E2; border-style: solid; border-width: 1px 1px 0; color: #000000; font-weight: bold; } .c_address_ul { width: 100%; margin:0; padding: 4px 0 0; } .c_address_ul li { float: left; height: 24px; overflow: hidden; width: 67px; } .c_address_ul li a { display: block; height: 22px; border: 1px solid #FFFFFF; color: #1148A8; line-height: 22px; padding-left: 5px; } .c_address_ul li a:hover { background-color: #E8F4FF; border: 1px solid #ACCCEF; text-decoration: none; } ",suggestionInit:i,filter:' {{if list}}
    {{if hasResult}}{{tmpl message.filterResult}}{{else}}{{tmpl message.noFilterResult}}{{/if}}
    {{each (i,item) list}} {{if cQuery.type(item)=="string"}} ${item} {{else}}
    ${left}${right}
    {{/if}} {{/each}}
    {{if page.max>-1}}
    {{if page.current>0}} <- {{/if}} {{if page.current<2}} {{loop(index) Math.min(5,page.max+1)}} ${index+1} {{/loop}} {{else page.current>page.max-2}} {{loop(index) Math.max(0,page.max-4),page.max+1}} ${index+1} {{/loop}} {{else}} {{loop(index) Math.max(0,page.current-2),Math.min(page.current+3,page.max+1)}} ${index+1} {{/loop}} {{/if}} {{if page.current-> {{/if}}
    {{/if}}
    {{/if}} ',filterStyle:" .c_address_hd { height: 24px; border-color: #2C7ECF; border-style: solid; border-width: 1px 1px 0; background-color: #67A1E2; color: #fff; line-height: 24px; padding-left: 10px; word-break: break-all; } .c_address_bd { border-color: #999999; border-style: solid; border-width: 0 1px 1px; overflow: hidden; padding:10px; } .c_address_select { width:222px; height:355px; font-family: Arial, Simsun; font-size: 12px; } .c_address_wrap { width: 220px; height:349px; min-height: 305px; margin: 0; padding: 0 0 4px; border: 1px solid #969696; background:#fff; text-align: left; } .c_address_hd { margin:-1px; } .c_address_list { margin: 0; padding: 0; height:300px; } .c_address_list label { border-bottom: 1px solid #FFFFFF; border-top: 1px solid #FFFFFF; display: block; height: 22px; line-height: 22px; min-height: 22px; overflow: hidden; padding: 1px 9px 0; text-align: center; } .c_address_list span { float: right; font: 10px/22px verdana; margin: 0; overflow: hidden; padding: 0; text-align: right; white-space: nowrap; width: 110px; } .c_address_list a { border-bottom: 1px solid #FFFFFF; border-top: 1px solid #FFFFFF; color: #0055AA; cursor: pointer; display: block; height: 22px; line-height: 22px; min-height: 22px; overflow: hidden; padding: 1px 9px 0; text-align: left; text-decoration: none; } .c_address_list a.hover { background: none repeat scroll 0 0 #E8F4FF; border-bottom: 1px solid #7F9DB9; border-top: 1px solid #7F9DB9; } .address_selected { background: none repeat scroll 0 0 #FFE6A6; color: #FFFFFF; height: 22px; } .c_address_pagebreak { line-height: 25px; margin: 0; padding: 0; text-align: center; } .c_address_pagebreak a { color: #0055AA; display: inline-block; font-family: Arial, Simsun, sans-serif; font-size: 14px; margin: 0; padding: 0 4px; text-align: center; text-decoration: underline; width: 15px; } a.address_current { color: #000; text-decoration: none; } ",filterInit:n,filterPageSize:60},defaultSuggestionInit:i,defaultSuggestionInit_get:function(){return i},defaultFilterInit:n,defaultFilterInit_get:function(){return n},sortFunction:function(t,e){return t.left>e.left?1:t.left==e.left?0:-1},validate:function(t,e){var i=this,n=this.target.value().trim().replace(/[\|@]/g,"");if(!n)return this._unselect(!0,!0),!1;if(this.needvalidateFn&&!this.needvalidateFn(this.name,this.target))return!1;if(this.jsonpFilter)return this.jsonpFilter=this.jsopFilter_update(this.jsonpFilter),this._filterDataByJsonp(this.jsonpFilter,n,t,!0,function(t){t?(i._select(t,!0),e&&e(!0)):(i._unselect(!1,!0),e&&e(!1))}),!1;var r=this._filterData(this.source.data,n,t,!0);return r?(this._select(r,!0),e&&e(!0),!0):(this._unselect(!1,!0),e&&e(!1),!1)},bind:function(t,e,i){return this._event("bind",t,e,i),this},unbind:function(t,e){return this._event("unbind",t,e),this},trigger:function(t,e){return this._event("trigger",t,e),this},focus:function(e){if(this._enabled){var i=this;e=t.extend({isHidden:!1,isSelected:!1},e),e.isHidden&&(i.hidden(),i._enabled=!1,setTimeout(function(){i._enabled=!0})),e.isSelected?i.target[0].select():i.target[0].focus()}},hidden:function(){this._isFocus&&(this._hideSuggestion(),this._hideFilter(),this._tmpValue=this._lastValue=this._fixVal(this.target.value()))},_enable:!1,_parentDocument:null,_parentWindow:null,_iframeDocument:null,_iframeWindow:null,_iframeObject:null,_iframeContainter:null,_lastIframeSize:null,_iframeClock:null,_iframeStyle:"width:0;height:0;position:absolute;top:-100000px;left:-100000px;z-index:200;",_placeHolder:t.browser.isIE?'
        placeholder
        ':"",_isFocus:!1,_focusClock:null,_checkClock:null,_tmpValue:null,_lastValue:null,_isCharIn:!1,_suggestionContainer:null,_suggestionStyle:"position:absolute;top:-100000px;left:-100000px;z-index:200;",_isSuggestionRender:!1,_filterContainer:null,_filterStyle:"position:absolute;top:-100000px;left:-100000px;z-index:200;",_sortReString:null,_displayRegExp:null,_displayHash:null,_colsHash:null,_lastFilterData:null,_lastFilterRendarData:null,_lastSelect:null,_suggestionEnable:!1,_filterEnable:!1,_filterCount:0,_selectFlag:!1,_getLengthRe:/[^\x00-\xFF]/g,_init:function(e,i){if(!i.name||"string"!=t.type(name))return void t.error("mod ("+r.name+","+r.version+") init","invalid name "+name);var n=this;if(this._enabled=!0,this.target=t(e),this.name=i.name,i.delay&&"number"==t.type(i.delay)&&i.delay>0&&(this.delay=i.delay),this.source=i.source||this.source,this.jsonpSource=i.jsonpSource||this.jsonpSource,i.update_jsonpFilter&&"function"==t.type(i.update_jsonpFilter)&&(this.jsopFilter_update=i.update_jsonpFilter),i.update_jsonpSource&&"function"==t.type(i.update_jsonpSource)&&(this.update_jsonpSource=i.update_jsonpSource),i.update_html_filter&&"function"==t.type(i.update_html_filter)&&(this.update_html_filter=i.update_html_filter),i.FH_jsonpSource_filter_url&&"function"==t.type(i.FH_jsonpSource_filter_url)&&(this.FH_jsonpSource_filter_url=i.FH_jsonpSource_filter_url),i.jsonpFilterInit&&"function"==t.type(i.jsonpFilterInit)&&(this.jsonpFilterInit=i.jsonpFilterInit),i.jsonpSourceInit&&"function"==t.type(i.jsonpSourceInit)&&(this.jsonpSourceInit=i.jsonpSourceInit),i.editFilterData&&"function"==t.type(i.editFilterData)&&(this.editFilterDataFn=i.editFilterData),i.needvalidateFn&&"function"==t.type(i.needvalidateFn)&&(this.needvalidateFn=i.needvalidateFn),this.isOneway="isOneway"in i?i.isOneway:this.isOneway,this.ABtest_type_value="ABtest_type_value"in i?i.ABtest_type_value:this.ABtest_type_value,this.charset=i.charset||cQuery.config("charset"),!this.source&&this.jsonpSource){var o=this.FH_jsonpSource_filter_url(this.jsonpSource,i.name);t.loader.jsonp(o,{charset:this.charset,onload:function(e){"function"==t.type(this.jsonpSourceInit)&&(e=this.jsonpSourceInit(e)),this.source_set(e)}.bind(this)})}this.jsonpFilter=i.jsonpFilter||this.jsonpFilter;var a=t.type(i.sort);(i.sort&&"array"==a||"function"==a)&&(this.sort=i.sort,this._sortReString=null),this.sortFunction=i.sortFunction||this.sortFunction,i.display&&(this.display=t.extend(!0,{},this.display,i.display)),this.relate=i.relate||this.relate,i.message&&(this.message=t.extend(!0,{},this.message,i.message)),this.offset="offset"in i?i.offset:this.offset,this.minLength="minLength"in i?i.minLength:this.minLength,this.priority="priority"in i?i.priority:this.priority,this.isAutoCorrect="isAutoCorrect"in i?i.isAutoCorrect:this.isAutoCorrect,this.isFocusNext="isFocusNext"in i?i.isFocusNext:this.isFocusNext,this.isFilterSelect="isFilterSelect"in i?i.isFilterSelect:this.isFilterSelect,this.isFilterGetFirstWhenBlur="isFilterGetFirstWhenBlur"in i?i.isFilterGetFirstWhenBlur:this.isFilterGetFirstWhenBlur,this.isFilterGetHoverWhenBlur="isFilterGetHoverWhenBlur"in i?i.isFilterGetHoverWhenBlur:this.isFilterGetHoverWhenBlur,i.keyboard&&(this.keyboard=t.extend(!0,{},this.keyboard,i.keyboard)),i.template&&(this.template=t.extend(!0,{},this.template,i.template)),this.isIframe=function(){if(i.hasOwnProperty("isIframe")&&!i.isIframe)return!1;var e=n.target[0].ownerDocument,r=e.defaultView||e.parentWindow;try{var o=r.frameElement||!!i.isIframe&&n.target[0];return o&&(n._parentDocument=o.ownerDocument,n._parentWindow=n._parentDocument.defaultView||n._parentDocument.parentWindow,n._iframeObject=t(n._parentDocument.createElement("iframe")),n._iframeObject.css(n._iframeStyle),n._iframeObject[0].frameBorder=0,n._iframeObject.prependTo(n._parentDocument.body),n._iframeObject.html('
        ',function(){n._iframeWindow=n._iframeObject[0].contentWindow||n._iframeObject[0].window,n._iframeDocument=n._iframeWindow.document,n._iframeContainer=t(n._iframeDocument.createElement("container")),n._iframeContainer.css("position","absolute"),n._iframeContainer.appendTo(n._iframeDocument.body)})),!!o}catch(a){return!1}}(),t.bindMethod(this),this.target.attr("autoComplete","on"),this._initTmpl(),this._initEvent(),this.uninit=this._uninit},_initTmpl:function(){},_initEvent:function(){this.target.bind("focus",this._focus),this.target.bind("blur",this._blur),this.target.bind("keydown",this._keydown),this.target.bind("keypress",this._keypress),this.target.bind("mouseup",this._mouseup),this.target.bind("mousedown",this._focus)},_initCols:function(){if(!this._colsHash){this._colsHash={};if(this.source.alias)for(var t=0,e=this.source.alias.length;e>t;t++)this._colsHash[this.source.alias[t]]=t}},_initSort:function(){if(this._initCols(),!this._sortReString){var e=this._sortReString={accurate:[],vague:[]},i=0,n=0;switch(t.type(this.sort)){case"array":for(var r=0,o=this.sort.length;o>r;r++){var a=this.sort[r].match(/^(\^?)([^\^\$\|@\r\n\+]+)(\+?)(\$?)$/);if(a){if(/^\d$/.test(a[2]))a[2]=parseInt(a[2],10);else{if(!(a[2]in this._colsHash)){t.error("address._initSort","invalid sort column "+a[2]);continue}a[2]=this._colsHash[a[2]]}var s=+a[2]||a[3]?"([^\\|@]*\\|){"+a[2]+(a[3]?",":"")+"}":"";e.accurate[i++]=["@("+s,"","(\\|[^@]*)?)(?=@)"],e.vague[n++]=["@("+s+(a[1]?"":"[^\\|@]*"),"",(a[4]?"(\\|[^@]*)?":"[^@]*")+")(?=@)"]}else t.error("address._initSort","invalid sort rule "+this.sort[r])}break;case"function":break;default:t.error("address._initSort","invalid sort type "+this.sort)}}},_initDisplay:function(){if(this._initCols(),!this._displayHash){var e,i,n=this._displayHash={};for(e in this.display)if(i=this.display[e],/^\d$/.test(i))n[e]=parseInt(i,10);else{if(!(i in this._colsHash)){n[e]=null,t.error("address._initDisplay","invalid display column "+arr[1]);continue}n[e]=this._colsHash[i]}}},_refresh:function(){this._colsHash=null,this._sortReString=null,this._tmpValue=this._lastValue=null,this._isSuggestionRender=!1,this._isFocus&&this._inputCheck()},_checkEnable:function(){},_focus:function(t){if(this._enabled){if(this._isFocus)return void(!this.source||this._suggestionEnable||this._filterEnable||this._showSuggestion());if(this._isFocus=!0,this.target.attr("autoComplete","off"),this._isCharIn=!1,this._tmpValue=this._lastValue=null,this._clearFilter(),t&&t.type&&this._inputCheck(),clearTimeout(this._checkClock),clearInterval(this._focusClock),this._focusClock=setInterval(this._focusInterval,o),this.isIframe&&(clearInterval(this._iframeClock),this._iframeClock=setInterval(this._fixIframeSize,o)),t&&t.type){var e=this.target[0];switch(t.type){case"mousedown":setTimeout(function(){e.select()});break;case"focus":e.select()}}}},_blur:function(){function t(t,i,n){var r=e.target.value();e.trigger("userinput",{arguments:{eventType:"blur",target:t,value:i,autoCorrectValue:r,data:n}})}if(this._enabled&&this._isFocus){this._isFocus=!1,this.target.attr("autoComplete","on");var e=this;if(!this._selectFlag){var i=null!==this._lastFilterData&&this._lastFilterData.length>0&&("isCityNoAP"==this._lastFilterData[0].left||"isCountry"==this._lastFilterData[0].left||"isDistrict"==this._lastFilterData[0].left);if(this.isFilterGetFirstWhenBlur&&i){var n=this._lastFilterData[0],r=n.data.split("|")[4].split("#")[0],o=r.split("-").join("|"),a=this.target.value();this._select(o),t(n,a,o)}else if(this.isFilterGetHoverWhenBlur&&this._lastSelect){var o=this._lastSelect.attr("data"),s=this._lastSelect[0],a=this.target.value();this._select(o),t(s,a,o)}else{var a=this.target.value();this.isAutoCorrect?this.source?(this._unselect(!1,!0),this.validate(!this.isAutoCorrect,function(i){i||(e._unselect(!0,!1),t(null,a,null))})):(this._unselect(!0,!0),t(null,a,null)):t(null,a,null)}}this._hideSuggestion(),this._hideFilter(),clearTimeout(this._checkClock),clearInterval(this._focusClock),this.isIframe&&clearInterval(this._iframeClock)}},check_input_txt:function(){function t(t,i,n){var r=e.target.value();e.trigger("userinput",{arguments:{eventType:"blur",target:t,value:i,autoCorrectValue:r,data:n}})}if(this._enabled){this._isFocus=!1,this.target.attr("autoComplete","on");var e=this;if(!this._selectFlag){var i=null!==this._lastFilterData&&this._lastFilterData.length>0&&("isCityNoAP"==this._lastFilterData[0].left||"isCountry"==this._lastFilterData[0].left);if(this.isFilterGetFirstWhenBlur&&i){var n=this._lastFilterData[0],r=n.data.split("|")[4].split("#")[0],o=r.split("-").join("|"),a=this.target.value();this._select(o),t(n,a,o)}else if(this.isFilterGetHoverWhenBlur&&this._lastSelect){var o=this._lastSelect.attr("data"),s=this._lastSelect[0],a=this.target.value();this._select(o),t(s,a,o)}else{var a=this.target.value();this.isAutoCorrect?this.source?(this._unselect(!1,!0),this.validate(!this.isAutoCorrect,function(i){i||(e._unselect(!0,!1),t(null,a,null))})):(this._unselect(!0,!0),t(null,a,null)):t(null,a,null)}}this._hideSuggestion(),this._hideFilter(),clearTimeout(this._checkClock),clearInterval(this._focusClock),this.isIframe&&clearInterval(this._iframeClock)}},_keypress:function(){this._isCharIn=!0},_keydown:function(e){switch(this._isFocus||this._focus(),e.keyCode){case 13:if(!this.keyboard.enter)return!0;if(this._filterEnable&&this._lastSelect){var i=this.target.value(),n=this._lastSelect.attr("data"),r=this._lastSelect[0];this._select(n);var o=this.target.value();this.trigger("userinput",{arguments:{eventType:"keydown",target:r,value:i,autoCorrectValue:o,data:n}});break}this.trigger("enter",{arguments:this.target.value()});break;case 37:case 39:if(!(this.keyboard.left&&37==e.keyCode||this.keyboard.right&&39==e.keyCode))return!0;if(this.template.filterPageSize<0)return!0;if(this._filterEnable){var a=this._lastFilterRendarData;if(a&&a.page.max>=0)switch(e.keyCode){case 37:a.page.current>0&&this._updateFilter(null,null,a.page.current-1);break;case 39:a.page.current=this.minLength&&this._isCharIn?this._showFilter(t):this._showSuggestion())},_showSuggestion:function(){if(this._suggestionEnable=!0,this._hideFilter(),this._clearFilter(),!this._suggestionContainer){if(this.isIframe){var e=this._iframeDocument.createElement("div");e.id="address_suggestionContainer_"+this.target.uid()}else{var e=document.createElement("div");e.id="address_suggestionContainer_"+this.target.uid(),e.style.cssText=this._suggestionStyle}this._suggestionContainer=t(e),this._suggestionContainer.bind("mousedown",this._filterMousedown)}if(""==this.ABtest_type_value||"B"!=this.ABtest_type_value?this._suggestionContainer.appendTo(this.isIframe?this._iframeContainer:t.container):(this._suggestionContainer.html(""),this._suggestionContainer.appendTo(this.isIframe?this._iframeContainer:t.container),this._isSuggestionRender=!1),!this._isSuggestionRender){var i=[],n=0,r=this._suggestionContainer[0].id;"string"==t.type(this.template.suggestionStyle)&&(i[n++]=this._placeHolder+"");var o={};o=""!=this.ABtest_type_value&&"B"==this.ABtest_type_value?this.update_jsonpSource(this.source.suggestion,this.name,this.target):this.source.suggestion;var a={data:o,message:this.message};i[n++]=t.tmpl.render(this.template.suggestion,a),this._suggestionContainer.html(i.join("")),"function"==t.type(this.template.suggestionInit)&&this.template.suggestionInit(this._suggestionContainer),this.trigger("suggestion",{arguments:[this._suggestionContainer]})}this.isIframe?(this._fixIframeSize(),this._iframeObject.offsetA(this.target,this.offset)):(this._suggestionContainer.offset(this.target,this.offset),this._suggestionContainer.cover())},_fixIframeSize:function(){if(this.isIframe){var t=this._iframeContainer[0],e=t.offsetWidth+"px",i=t.offsetHeight+"px";this._lastIframeSize&&e==this._lastIframeSize.width&&i==this._lastIframeSize.height||(this._lastIframeSize={width:e,height:i},this._iframeObject.css(this._lastIframeSize))}},_hideSuggestion:function(){if(this._suggestionEnable=!1,this._suggestionContainer){try{this._suggestionContainer.remove()}catch(t){}this.isIframe?(this._iframeObject.css(this._iframeStyle),this._lastIframeSize=null):(this._suggestionContainer.css(this._suggestionStyle),this._suggestionContainer.uncover())}},_showFilter:function(e){if(this._filterEnable=!0,this._filterCount++,this._hideSuggestion(),!this._filterContainer){if(this.isIframe){var i=this._iframeDocument.createElement("div");i.id="address_filterContainer_"+this.target.uid()}else{var i=document.createElement("div");i.id="address_filterContainer_"+this.target.uid(),i.style.cssText=this._filterStyle}this._filterContainer=t(i),this._filterContainer.bind("mouseover",this._filterMouseover),this._filterContainer.bind("mousedown",this._filterMousedown)}e=e.replace(/[\|@]/g,""),this.jsonpFilter?(this.jsonpFilter=this.jsopFilter_update(this.jsonpFilter),this._filterDataByJsonp(this.jsonpFilter,e,!1,!1)):this._filterData(this.source.data,e,!1,!1)},_clearFilter:function(){this._lastFilterData=null,this._lastFilterRendarData=null,this._lastSelect=null},_filterMouseover:function(t){for(var e=t.target;e&&"A"!=e.tagName;)e=e.parentNode;if(e){var i=e.getAttribute("data");if(i)return void this._showHover(e)}},_filterMousedown:function(e){function i(){var t=n.target.value();n.trigger("userinput",{arguments:{eventType:a,target:r,value:s,autoCorrectValue:t,data:o}})}for(var n=this,r=e.target;r&&"A"!=r.tagName;)r=r.parentNode;if(r){var o=r.getAttribute("data");if(o){var a="mousedown";this._suggestionEnable&&(a="suggestionMousedown"),this._filterEnable&&(a="filterMousedown");var s=this.target.value();t.browser.isIE?(r.onclick=function(){n._select(o),i()},this._isSuggestionRender=!1):(this._select(o),i())}var l=r.getAttribute("page");l&&this._updateFilter("","",+l)}return e.stop(),this.target[0].setCapture&&this.target[0].setCapture(),!1},_hideFilter:function(){if(this._filterEnable=!1,this._filterContainer){try{this._filterContainer.remove()}catch(t){}this.isIframe?(this._iframeObject.css(this._iframeStyle),this._lastIframeSize=null):(this._filterContainer.css(this._filterStyle),this._filterContainer.uncover())}},_filterData:function(e,i,n,r){this._initSort(),this._initDisplay();var o=this,a=[],s=0,l=e;switch(t.type(this.sort)){case"array":for(var u=this._sortReString[n?"accurate":"vague"],c=i.toReString(),h="array"==t.type(this.message.sort)?this.message.sort:[],d=0,f=u.length;f>d;d++){u[d][1]=c;var p=new RegExp(u[d].join(""),"gi"),m=[],g=0;if(l=l.replace(p,function(t,e){var i=e.split("|"),n={left:i[o._displayHash.left]||"",right:i[o._displayHash.right]||"",data:e};return m[g++]=n,""}),g){if(m.sort(this.sortFunction),r)return m[0].data;h[d]&&m.unshift(t.tmpl.render(h[d],{val:i,items:m})),a[s++]=m}}if(r)return!1;break;case"function":if(m=this.sort(e,i,n,r),r)return m.length?m[0].data:!1;a[s++]=m;break;default:return t.error("address._filterData","invalid sort type"),!1}a=Array.prototype.concat.apply([],a),this._updateFilter(a,i)},_filterDataByJsonp:function(e,i,n,r,o){this._initSort(),this._initDisplay();var a=[],s=0,l=this._filterCount,u=this.target;return i=i&&i.split("，")[0],e=t.tmpl.render(e,{key:encodeURIComponent(escape(i)),accurate:n?1:0}),t.loader.jsonp(e,{charset:this.charset,onload:function(e){if((this._filterEnable||r)&&l==this._filterCount){"function"==t.type(this.jsonpFilterInit)&&(e&&(e.target=u),e=this.jsonpFilterInit(e));for(var n=e.data.split("@"),c=0,h=n.length;h>c;c++)if(n[c]){if(r)return void("function"==t.type(o)&&o(n[c]));if("$="==n[c].slice(0,2))var d=t.tmpl.render(n[c].slice(2),{val:i});else var f=n[c].split("|"),d={left:f[this._displayHash.left]||"",right:f[this._displayHash.right]||"",bottom:f[this._displayHash.bottom]||"",data:n[c]};a[s++]=d}if(r&&!s)return void("function"==t.type(o)&&o(null));this._updateFilter(a,e.key)}}.bind(this)}),r?!1:void 0},_updateFilter:function(e,i,n){var r,o,a=[],s=0,l=this._filterContainer[0].id;"string"==t.type(this.template.filterStyle)&&(a[s++]=this._placeHolder+""),"array"==t.type(e)?e.length?(r=this._lastFilterData=e||[],o=!0):(r=this._lastFilterData||[],o=!1):(r=this._lastFilterData||[],o=this._lastFilterRendarData?this._lastFilterRendarData.hasResult:!1);var u=this._lastSelect?this._filterContainer.find("*[data],label").indexOf(this._lastSelect):-1;n=n||0;var c=this.template.filterPageSize;0>c&&(c=r.length);var h=Math.ceil(r.length/c)-1,d=Math.min(Math.max(0,n),h),f=h+1?r.slice(d*c,Math.min((d+1)*c,r.length)):[],p={val:i||this._lastValue,hasResult:o,list:f,page:{max:h,pageSize:c,current:d},message:this.message};"checkin"!=this.name?this._lastFilterRendarData=p:this.editFilterDataFn&&"function"==t.type(this.editFilterDataFn)?this._lastFilterRendarData=this.editFilterDataFn(p):this._lastFilterRendarData=p,a[s++]=t.tmpl.render(this.template.filter,p),this._filterContainer.html(a.join("")),"function"==t.type(this.template.filterInit)&&this.template.filterInit(this._filterContainer),this.trigger("filter",{arguments:[this._filterContainer]});var m=this._filterContainer.find("*[data],label");u=p.list&&p.list.length?Math.max(this.isFilterSelect?0:-1,Math.min(u,p.list.length-1,m.length-1)):-1,m[0]?(-1!=u&&"LABEL"==m[u].tagName&&(u==m.length-1?u-=1:u+=1),this.isFilterSelect?this._showHover(m[u]):this._showHover()):this._showHover(),this.isIframe?(this._filterContainer.appendTo(this._iframeContainer),this._fixIframeSize(),this._iframeObject.offsetA(this.target,this.offset)):(this._filterContainer.appendTo(t.container),this._filterContainer.offset(this.target,this.offset),this._filterContainer.cover())},_showHover:function(e){if(e?e=t(e):this.isFilterSelect&&(e=this._filterContainer.find("*[data]:first")),this._lastSelect){if(e&&e[0]&&this._lastSelect[0]==e[0])return;this._lastSelect.removeClass("hover")}e&&e[0]?(e.addClass("hover"),this._lastSelect=e):this._lastSelect=null},_getItems:function(t){this._initCols();for(var e=t.split("|"),i={length:e.length},n=0,r=e.length;r>n;n++)i[n]=e[n];var o=this.source.alias;if(o)for(var n=0,r=o.length;r>n;n++)i[o[n]]=e[n];return i},_select:function(e,i){var n=this;this._selectFlag=!0,setTimeout(function(){n._selectFlag=!1}),this._initDisplay();var r=e.split("|"),o=r[this._displayHash.value]||"";if(this._tmpValue=this._lastValue=this._fixVal(o),this.target.value(o),this._clearFilter(),this._hideSuggestion(),this._hideFilter(),this.relate)for(var a in this.relate)if(this.relate.hasOwnProperty(a)){var s=t(this.relate[a]);if(!s[0]){t.error("address._select","invalid relate element");continue}if(/^\d$/.test(a))a=parseInt(a,10);else{if(!(a in this._colsHash)){t.error("address._select","invalid relate column "+a);continue}a=this._colsHash[a]}s.value(r[a]||"")}if(this.trigger("change",{arguments:{value:o,data:e,items:this._getItems(e)}}),!i&&this.isFocusNext){var l=null;if(t.isCDom(this.isFocusNext))l=this.isFocusNext[0];else switch(t.type(this.isFocusNext)){case"string":l=t(this.isFocusNext)[0];break;case"object":"focus"in this.isFocusNext&&(l=this.isFocusNext);break;case"boolean":var u=this.target[0].form;if(u)for(var c=u.elements,h=0,d=0,f=c.length-1;f>d;d++){if(h){var p=t(c[d]);if((c[d].offsetWidth||c[d].offsetHeight)&&"none"!==p.css("display")&&"hidden"!==p.css("visibility")){l=c[d];break}}c[d]==this.target[0]&&(h=1)}}l&&setTimeout(function(){try{l.focus()}catch(t){}})}},_unselect:function(e,i){if(e&&(this._tmpValue=this._lastValue=null,this.target.value(""),this._clearFilter(),this._hideSuggestion(),this._hideFilter(),this.trigger("change",{arguments:{value:"",data:"",items:null}})),i&&this.relate)for(var n in this.relate)if(this.relate.hasOwnProperty(n)){var r=t(this.relate[n]);if(!r[0]){t.error("address._select","invalid relate element"); continue}r.value("")}},_event:function(e,i){switch(t.type(i)){case"string":i=[i];break;case"array":break;default:return void t.error("address."+e,"Invalid types "+i)}for(var n,r=0,o=i.length;o>r;r++)n=i[r].trim(),n&&"string"==t.type(n)?n in a?this.target[e].apply(this.target,[n+s].concat(Array.prototype.slice.call(arguments,2))):t.error("address."+e,"Unsupport type "+n):t.error("address."+e,"Invalid type "+n)},_uninit:function(){}}),t.mod.reg(r)}(cQuery),window.__bfi=window.__bfi||[],function(t){function e(e,i){var n=t(e)[0].ownerDocument,r=t(i)[0].ownerDocument;return n==r?!0:!1}function i(t,e){this.init(t,e)}var n={name:"validate",version:"1.1",init:function(){},uninit:function(){},module:i};t.extend(i.prototype,{init:function(){function i(t){var e=(new Date).getTime();w=e}function n(e){if(i(),!e)throw new"传入的值不能为空！";if(!e.$obj)throw new"传入的值中不存$obj属性！";var n=t.isCDom(e.$obj);if(!n)throw new"传入的值中：$obj属性不是cDom对象！";var r=t.copy(F),e=t.extend(r,e);return e}function r(e,n){i();var r,o=n||function(){};if(r=C[e]){var a=r.iframe,s=r.fun,l=s.indexOf(o);if(-1==l&&s.push(o),r.loaded){for(var u=0,c=s.length;c>u;u++){var o=s[u];o(a)}s.length=0}else setTimeout(arguments.callee,200)}else{var h=t(document.createElement("iframe"));h[0].src="about:blank",h[0].id="ifr_"+e,h[0].frameBorder="no",h[0].border="0",h[0].marginWidth="0",h[0].marginHeight="0",h[0].backgroundColor="transparent",h[0].scrolling="no",h[0].setAttribute("group",e),h[0].style.cssText="position:absolute;allowTransparency='true';left:-9999px;top: -9999px;background-color:transparent;",h.prependTo(document.body),h.html('
        ',function(){C[e]={iframe:h[0],loaded:!1,elems:{},fun:[]},C[e].loaded=!0,o(h[0])})}}function o(e,n,r,o){if(i(),!e.styles){if(t.browser.isIE){var a=n.createStyleSheet();if(a.cssText=r,o.ownerDocument!==n){var a=o.ownerDocument.createStyleSheet();a.cssText=".f_error {background-color: #FFF7D9 !important; border-color: #D80000 #E50000 #E50000 #D80000 !important; border-style: solid; border-width: 1px;}"}}else{var s=n.createElement("style");if(s.type="text/css",s.textContent=r,n.getElementsByTagName("head")[0].appendChild(s),o.ownerDocument!==n){var s=o.ownerDocument.createElement("style");s.type="text/css",s.textContent=".f_error {background-color: #FFF7D9 !important; border-color: #D80000 #E50000 #E50000 #D80000 !important; border-style: solid; border-width: 1px;}",o.ownerDocument.getElementsByTagName("head")[0].appendChild(s)}}e.styles=!0}}function a(){var t=C[x.group].elems[x.uid];return t[t.length-1]}function s(){i(),l(),_(),u(),c(),g()}function l(){i();var e=a(),n=e.opt,r=n.classNames,o=n.ids,s=n.css,l=e.group,u=(n.$obj,e.uid);if(0==t("#"+u,e.doc).length){var c=e.doc.createElement("div");c.innerHTML=t.tmpl.render(n.templs.tipTempl,{tipId:u,boxId:o.boxId,arrowId:o.arrowId,loadingId:o.loadingId,contentId:o.contentId,group:l,tip:r.tip,box:r.box,boxType:r.boxType,boxArrow:r.boxArrow,arrow:r.arrow,maxWidth:s.maxWidth,minWidth:s.minWidth,minHeight:s.minHeight,content:r.tipContent}),e.doc.body.appendChild(c.firstChild)}e.$tip=t("#"+u,e.doc),e.$box=t("#"+o.boxId,e.$tip[0]),e.$arrow=t("#"+o.arrowId,e.$tip[0]),e.$loading=t("#"+o.loadingId,e.$tip[0]),e.$content=t("#"+o.contentId,e.$tip[0]),e.$tip[0].style.zIndex=n.zIndex}function u(){i();var e=a(),n=t.tmpl.render(e.opt.temp,{txt:e.opt.data});e.$content.html(n)}function c(){i();var t=a(),n=t.opt.position.split("_"),r={},o={};r.arrow=[n[0].substring(0,1),n[0].substring(1,2)],o.arrow=[n[1].substring(0,1),n[1].substring(1,2)],function(e){t.$box[0].className=t.$box[0].className.replace(/[trblc]$/,e),t.opt.showArrow?"c"==e?t.$arrow[0].style.display="none":(t.$arrow[0].style.display="block",t.$arrow[0].className=t.$arrow[0].className.replace(/[trblc]$/,e)):t.$arrow[0].style.display="none"}(o.arrow[0]),o.pos={width:parseInt(t.$tip[0].offsetWidth,10),height:parseInt(t.$tip[0].offsetHeight,10)};var s=e(t.opt.$obj,t.$box);s?r.pos=t.opt.$obj.offset():r.pos=t.opt.$obj.offsetA();var l=r.pos.left,u=r.pos.top,c=r.pos.width,d=r.pos.height,f=o.pos.width,p=o.pos.height,m={tl:{left:l,top:u,offsetX:-8,offsetY:0},tm:{left:l-f/2,top:u,offsetX:0,offsetY:0},tr:{left:l-f,top:u,offsetX:8,offsetY:0},bl:{left:l,top:u-p,offsetX:-5,offsetY:0},bm:{left:l-f/2,top:u-p,offsetX:0,offsetY:0},br:{left:l-f,top:u-p,offsetX:4,offsetY:0},lt:{left:l,top:u,offsetX:0,offsetY:-8},lm:{left:l,top:u-p/2,offsetX:0,offsetY:0},lb:{left:l,top:u-p,offsetX:0,offsetY:4},rt:{left:l-f,top:u,offsetX:0,offsetY:-8},rm:{left:l-f,top:u-p/2,offsetX:0,offsetY:0},rb:{left:l-f,top:u-p,offsetX:0,offsetY:4},center:{left:l-f/2,top:u-p/2,offsetX:-4,offsetY:0}},g={bl:[0,d,"bottom","Left"],bm:[c/2,d,"bottom","Middle"],br:[c,d,"bottom","Right"],tl:[0,0,"top","Left"],tm:[c/2,0,"top","Middle"],tr:[c,0,"top","Right"],lt:[0,0,"left","Top"],lm:[0,d/2,"left","Middle"],lb:[0,d,"left","Bottom"],rt:[c,0,"right","Top"],rm:[c,d/2,"right","Middle"],rb:[c,d,"right","Bottom"],center:[c/2,d/2,"center","center"]},_=m[n[1]],v=g[n[0]],y=_.left+v[0],b=_.top+v[1],x=o.arrow,C=_.offsetX,F=_.offsetY,s={left:y,top:b,arrow:x,width:o.pos.width,height:o.pos.height,offsetX:C,offsetY:F};t.dot=s,h()}function h(){function e(e){var i={leftTop:5,rightTop:5,rightBottom:5,leftBottom:5,x:3,y:3},r=t.extend({},i,e||{}),o=r.leftTop+"px "+r.rightTop+"px "+r.rightBottom+"px "+r.leftBottom+"px";if(n.opt.showArrow)var o=r.leftTop+"px "+r.rightTop+"px "+r.rightBottom+"px "+r.leftBottom+"px";else var o=i.leftTop+"px "+i.rightTop+"px "+i.rightBottom+"px "+i.leftBottom+"px";r.x+"px "+r.y+"px 3px #888";n.$box.css({MozBorderRadius:o,borderRadius:""+o}),n.$tip.css({MozBorderRadius:o,borderRadius:""+o})}i();var n=a(),r=n.dot.arrow;n.$box.css({MozBorderRadius:"0",borderRadius:"0"}),n.$tip.css({webkitBoxShadow:"0",MozBoxShadow:"0",boxShadow:"0"}),n.$arrow.css({left:"",right:"",bottom:"",top:"",marginTop:""});var o=n.dot.width,s=n.dot.height;"t"==r[0]?(n.$arrow[0].style.marginTop="-7px","l"==r[1]?(n.$arrow[0].style.left="0",e({leftTop:0})):"m"==r[1]?(n.$arrow[0].style.left=o/2-8+"px",e()):"r"==r[1]&&(n.$arrow[0].style.left=o-16+"px",e({rightTop:0,x:-10}))):"r"==r[0]?(n.$arrow[0].style.right="-7px","t"==r[1]?(n.$arrow[0].style.marginTop="0px",e({rightTop:0,x:-10})):"m"==r[1]?(n.$arrow[0].style.marginTop=s/2-8+"px",e({x:-10})):"b"==r[1]&&(n.$arrow[0].style.marginTop=s-16+"px",e({rightBottom:0,x:-10,y:-10}))):"b"==r[0]?"l"==r[1]?(n.$arrow[0].style.right=o-16+"px",e({leftBottom:0,y:-10})):"m"==r[1]?(n.$arrow[0].style.right=o/2-8+"px",e({y:-10})):"r"==r[1]&&(n.$arrow[0].style.right="0px",e({rightBottom:0,x:-10,y:-10})):"l"==r[0]&&(n.$arrow[0].style.left="2px","t"==r[1]?(n.$arrow[0].style.marginTop="0px",e({leftTop:0})):"m"==r[1]?(n.$arrow[0].style.marginTop=s/2-8+"px",e()):"b"==r[1]&&(n.$arrow[0].style.marginTop=s-16+"px",e({leftBottom:0,y:-10})))}function d(e){if("-9999px"!=e.$tip[0].style.left&&(e.$tip.css({left:"-9999px",top:"-9999px"}),e.show=!1,e.opt.hide(e.elem),e.opt.errorClass&&e.opt.removeErrorClass&&t(e.elem).removeClass(e.opt.errorClass)),e.iframe!=e.doc){var i=e.iframe;"-9999px"!=i.style.left&&t(i).css({left:"-9999px",top:"-9999px",width:"auto",height:"auto"})}}function f(e){var i=0;if(e)if("string"==typeof e)i=2;else{if(!t.isCDom(e))throw new"hide::没有找到合适的类型";i=3}else i=1;for(var n in C){var r=C[n],o=r.elems,a=!1;if(3==i){if(!o[e.uid()])continue;o={temp:o[e.uid()]}}for(var s in o){for(var l=o[s],u=0,c=l.length;c>u;u++)if(1==i||3==i)l[u].show&&d(l[u]);else if(2==i&&l[u].hideID==e&&l[u].show){d(l[u]),a=!0;break}if(a)break}}}function p(t,e,i,n){function r(i){for(var n,r,o,s,l,u=0,c=e.length;c>u;u++)n=e[u],from=n[0],o=n[1],s=n[2],l=n[3],r=from+(o-from)*a(i),"opacity"==s?(t.style[s]=r,t.style.filter="alpha(opacity="+100*r+")"):t.style[s]=r+l}function o(e){r(e),n.call(t)}clearInterval(t._timer);var a=function(t){return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},s=function(e,i,n){var r,o,a=+new Date;t._timer=setInterval(function(){o=+new Date-a,r=o/n,r>=1?(clearInterval(t._timer),i(r)):e(r)},13)};s(r,o,i)}function m(t,e){t.style.opacity=e,t.style.filter="alpha(opacity="+100*e+")"}function g(){i();var e=a(),n=e.dot,r=n.width,o=n.height;if(e.opt.showArrow)var s=n.top+n.offsetY,l=n.left+n.offsetX;else var s=n.top,l=n.left;r=Math.floor(r),o=Math.floor(o),e.opt.errorClass&&t(e.elem).addClass(e.opt.errorClass),e.opt.animate&&(m(e.$tip[0],0),p(e.$tip[0],[[0,1,"opacity",""]],680,function(){})),e.iframe==e.doc?e.$tip.css({top:s+"px",left:l+"px"}):(e.$tip.css({left:"0px",top:"0px"}),t(e.iframe).css({top:s+"px",left:l+"px",width:r+"px",height:o+"px"})),e.show=!0,e.opt.show(e),e.opt.isFocus&&t(e.elem)[0].focus(),e.opt.hideEvent?(t(e.elem).unbind(e.opt.hideEvent,v),t(e.elem).bind(e.opt.hideEvent,v)):(t(e.elem.ownerDocument).unbind("mousedown",v),t(e.elem.ownerDocument).bind("mousedown",v)),e.opt.endshow(e)}function _(){i();var t=a(),e=t.group,n=C[e];if(n){var r=n.elems;for(var o in r)for(var s=r[o],l=0,u=s.length;u>l;l++)s[l].show&&d(s[l])}}function v(){f(),t(this).unbind("mousedown",v)}function y(e){var i="no";if(e)var i="outer";else if(t.browser.isIE6)var i="inner";return i}function b(e){var i=e.iframe||document,n=window,r=document,a=e.opt,l=a.styles;e.iframe&&(n=e.iframe.contentWindow||e.iframe.window,r=n.document,e.iframe.style.zIndex=a.zIndex);var u=a.$obj[0];o(i,r,l,u);var c=t.uid(u);x.uid=c;var h=x.group;e.iframe||C[h]||(C[h]={iframe:i,loaded:!0,elems:{},fun:[]});var d=C[h].elems;d[c]||(d[c]=[]),d[c].push({iframe:i,win:n,doc:r,opt:a,group:h,uid:c,hideID:a.hideID,elem:u,show:!1,dot:{left:null,top:null,arrow:null,width:null,height:null,offsetX:null,offsetY:null},$tip:null,$box:null,$arrow:null,$loading:null,$content:null}),s()}var x={uid:0,group:""},C={},F={isScroll:!0,zIndex:999,animate:!1,errorClass:"f_error",removeErrorClass:!1,hideEvent:null,isFocus:!1,iframe:!1,srollHeight:0,srollWidth:0,show:function(){},endshow:function(e){var i=e.elem,n=e.opt,r=t(i).offset(),o=n.srollWidth||t(i)[0].offsetWidth,a=n.srollHeight||t(i)[0].offsetHeight;n.isScroll&&window.scrollTo(r.left-o-5,r.top-a-5)},hide:function(){},position:"rm_lm",templs:{tipTempl:'${loadingImg}
        '},css:{maxWidth:"260",minWidth:"50"},group:"group",classNames:{tip:"tuna_jmpinfo",box:"base_jmp",boxType:"jmp_alert",boxArrow:"base_jmp_t",arrow:"tri_t",loading:"jmp_loading",tipContent:"jmp_content"},ids:{boxId:"boxId",arrowId:"arrowId",loadingId:"loadingId",contentId:"contentId"},temp:'
        ${txt}
        ',data:"提示信息!",showArrow:!0,styles:".tuna_jmpinfo {margin: 20px;color: #333;font: 12px/2 Arial,Tahoma,simsun;-webkit-text-size-adjust: none;}.tuna_jmpinfo ul,li{list-style: none;}.tuna_jmpinfo a{color: #00c;cursor: pointer;text-decoration: none;}.tuna_jmpinfo a: hover{color: #f00;text-decoration: underline;}.tuna_jmpinfo .font16{font-size: 16px;}.tuna_jmpinfo .jmp_hd{height:30px; padding-left:10px; background:url(http://pic.c-ctrip.com/common/un_base_btn.png) repeat-x 0 -390px; font-size:12px; line-height:30px; color:#333;} .tuna_jmpinfo .jmp_hd h3{font-size: 12px;} .tuna_jmpinfo .jmp_bd{padding: 2px 3px;} .tuna_jmpinfo .jmp_alert{border: 1px solid #ffb533; background: #fff5d1;} .tuna_jmpinfo .base_jmp b{position: absolute; width: 16px; height: 16px; background-image: url(http://pic.c-ctrip.com/common/un_jmp_tri.png); background-repeat: no-repeat; overflow: hidden;} .tuna_jmpinfo .base_jmp_t{margin-top: 8px;} .tuna_jmpinfo .base_jmp_r{margin-right: 8px;} .tuna_jmpinfo .base_jmp_b{margin-bottom: 7px;} .tuna_jmpinfo .base_jmp_l{margin-left: 8px;} .tuna_jmpinfo .base_jmp_t b{margin-top: -7px;} .tuna_jmpinfo .base_jmp_r b{margin-top: 10px; right: 0;} .tuna_jmpinfo .base_jmp_b b{bottom: -8px;} .tuna_jmpinfo .base_jmp_l b{margin-top: 10px; left: 9px;} .tuna_jmpinfo .jmp_title .tri_b{background-position: -32px -32px;} .tuna_jmpinfo .jmp_alert .tri_t{background-position: -16px 0;} .tuna_jmpinfo .jmp_alert .tri_r{background-position: -16px -16px;} .tuna_jmpinfo .jmp_alert .tri_b{background-position: -16px -32px;} .tuna_jmpinfo .jmp_alert .tri_l{background-position: -16px -48px;} .tuna_jmpinfo .jmp_table .tri_t{background-position: -32px 0;}.f_error {background-color: #FFF7D9 !important; border-color: #D80000 #E50000 #E50000 #D80000 !important; border-style: solid; border-width: 1px;}"},w=0;this.show=function(e){i();var e=n(e);if(e){var o=y(e.iframe),a=o+"_"+e.group;if(x.group=a,"no"!=o?r(a,function(t){b({iframe:t,opt:e})}):b({iframe:null,opt:e}),e.$obj&&e.$obj.length)for(var s=0;s0)t.selectAdult=$("#AdultSelect"),t.selectChildren=$("#ChildrenSelect"),t.selectAdult.value(t.selectAdult.attr("data-default")),t.selectChildren.value(t.selectChildren.attr("data-default")),n=!1;else{if(!($("#FHX_AdultSelect").length>0))return void(window.console&&console.log("未知的成人儿童选择控件！"));t.selectAdult=$("#FHX_AdultSelect"),t.selectChildren=$("#FHX_ChildrenSelect"),n=!0}n?this._personSelectBySelectControl.regAdultChildBond(t.selectAdult,t.selectChildren):this._personSelectByInputControl(e),t.chooseBaby_Opt(e,t)},_personSelectBySelectControl:{regAdultChildBond:function(e,t){this._regBond(e,t,0)},_regBond:function(e,t,n){var i=this;this._limitB(e,t,n),e.bind("change",function(r){i._limitB(e,t,n)})},_limitB:function(e,t,n){var i=+e.value(),r=+t.value(),o=this._relateFator[n](i);this._hideOptions(t,o+1),o>=r&&(t[0].value=r)},_relateFator:[function(e){return Math.min(2*e,9-e)},function(e){return e}],_hideOptions:function(e,t){this._showAllOptions(e),e.span||(e.span=document.createElement("span"),e.options=e.find("option"));var n=void 0;e.options.each(function(i,r){n=i[0].value,n>=t&&e.span.appendChild(i[0])})},_showAllOptions:function(e){e.span&&(e.options.each(function(t,n){e[0].appendChild(t[0])}),e.options.length>0&&(e[0].value=e.options[0].value))}},_personSelectByInputControl:function(e){var t=[];["AdultSelect","ChildrenSelect"].each(function(i,r){var o=$("#"+i),a=$("#"+i+"_Options");t.push(a),o.bind("click",function(e){t[r].hasClass("hidden")?t[r].removeClass("hidden"):t[r].addClass("hidden"),t.each(function(e,t){t!=r&&e.addClass("hidden")}),e.stopPropagation()}),a.bind("click",function(t){if("A"==t.target.nodeName){var i=+t.target.getAttribute("data-value");o.value(i),a.addClass("hidden"),0==r&&n(i),t.stop(),e.hotelCityChanged=!0}})});var n=function(e){var n=Math.min(2*e,9-e);t[1].find("a").each(function(e,t){t>n?e.addClass("hidden"):e.removeClass("hidden")});var i=$("#ChildrenSelect");i.value()>n&&i.value(0)};n(+$("#AdultSelect").value()),$(document).bind("click",function(){t.each(function(e){e.addClass("hidden")})})},restPersonSelected:function(t){$("#dpSearchInputBox dl").eq(2).html(e.personHtml),e.init(t)},restBabyInput_for_DpConfirm:function(e){if(e.sourceName.isDpConfirm){var t=$("#Js_ContainbabyCheckBox");t&&t.length>0?$("#isContainBaby").value(t.attr("isChecked")||"false"):$("#isContainBaby").value("false")}},restBabyInput_for_DpEntry:function(e){var t=$("#Js_ContainbabyCheckBox");t&&t.length>0&&t.attr("isChecked")&&"true"==t.attr("isChecked")?e.babyChooseState=!0:e.babyChooseState=!1},savePersonSelectedDom:function(){0==e.personHtml.length&&(e.personHtml=$("#dpSearchInputBox dl").eq(2).html())},chooseBaby_Opt:function(e,t){t.chooseBaby_for_otherDpEntry(e,t),t.restBabyInput_for_DpEntry(e)},chooseBaby_for_otherDpEntry:function(e,t){var n=e,i=(n.sourceName.isSdpList,n.sourceName.isVacationSearch,"choosed"),r=($("#new_person_content"),$("#personLi"),$("#child_select_choose"));r&&0!=r.length&&r.bind("click",function(e,t){var r=e.target;$(r).hasClass(i)?(n.babyChooseState=!1,$(r).removeClass(i)):(n.babyChooseState=!0,$(r).addClass(i))})},updaetIndexEntryBoxHeight:function(e,t){var n=$("#js-dpSearcher"),i=29,r=47;t.sourceName.isSdpIndex&&n&&0!=n.length&&(e?2==t.isOneway?n.css("height",n.height()+i+"px"):n.css("height",n.height()+r+"px"):2==t.isOneway?n.css("height",n.height()-i+"px"):n.css("height",n.height()-r+"px"))}};return e});; var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};define("webresource/component/dpSearchEntryCtripIndex/dpSearchHistory.FMultiCIComponent.js", [], function(require,exports,module){var S=require("tools/common.js").S,t=(require("tools/jquery"),require("tools/domainConfigure.js"),{_key:"FHXSearch",_keyCities:"FHXSearch_Cities",_fields:{from:{id:2,name:"上海",en:"shanghai",date:(new Date).toFormatString("yyyy-MM-dd")},to:{id:"",name:"",en:"",date:(new Date).addDays(1).toFormatString("yyyy-MM-dd")},adults:2,children:0},save:function(t,e){var i=window.location.href.indexOf("ctrip.com")>0?"ctrip.com":"ctripcorp.com",n=$("#divFlightQuery").find(".js_fltItem"),r={expires:1,domain:i,path:"/"},o=this._key,a="";(e.sourceName.isCtripIndex||e.sourceName.isHotelInternational)&&(o=this["_key"+(t||"")],cQuery.cookie.set(this._key,"tab",FHX.tabIndex,r),a="FHX_"),"SSH"==t?cQuery.cookie.set(o,"keyword",$("#"+a+"SSH_txtSearch").value(),r):(cQuery.cookie.set(o,"from.id",n.eq(0).find("input[name=fltFromCities]").value(),r),cQuery.cookie.set(o,"from.name",n.eq(0).find("input[name=txtFrom]").value(),r),cQuery.cookie.set(o,"from.en",n.eq(0).find("input[name=fltFromCitypy]").value(),r),cQuery.cookie.set(o,"from.date",n.eq(0).find("input[name=txtFromDate]").value(),r),cQuery.cookie.set(o,"to.id",n.eq(0).find("input[name=fltToCities]").value(),r),cQuery.cookie.set(o,"to.name",n.eq(0).find("input[name=txtTo]").value(),r),cQuery.cookie.set(o,"to.en",n.eq(0).find("input[name=fltToCitypy]").value(),r),cQuery.cookie.set(o,"to.date",n.eq(0).find("input[name=txtToDate]").value(),r),cQuery.cookie.set(o,"adults",$("#"+a+"AdultSelect").value(),r),cQuery.cookie.set(o,"children",$("#"+a+"ChildrenSelect").value(),r),this._saveCityHistories(e))},_saveCityHistories:function(t){var e=window.location.href.indexOf("ctrip.com")>0?"ctrip.com":"ctripcorp.com",i={expires:30,domain:e,path:"/"},n=this._keyCities,r=cQuery.cookie.get(n,"from"),o=cQuery.cookie.get(n,"to"),a=cQuery.cookie.get(n,"checkin"),s=(t.sourceName.isCtripIndex||t.sourceName.isHotelInternational?"FHX_":"",function(t,e){"array"!=$.type(e)&&(e=[e]),e=e.unique();var i=[];return t&&(i=t.split("|").filter(function(t){return-1==e.indexOf(t)})),i=e.concat(i).slice(0,6),i.join("|")}),l=t.fltTextBoxs;cQuery.cookie.set(n,"from",s(r,$(l[0]).value()),i),cQuery.cookie.set(n,"to",s(o,$(l[1]).value()),i);var u=[],c=$("#FHX_divHotelQuery").length?$("#FHX_divHotelQuery"):$("#divHotelQuery"),d=t.sourceName.isCtripIndex||t.sourceName.isHotelInternational?c.find("input.w07"):c.find('[data-search="hotel"] input[placeholder]:not([name])');d.each(function(t){t=t.value(),u.indexOf(t)>-1||(t=t.split("，")[0],u.push(t))}),cQuery.cookie.set(n,"checkin",s(a,u),i)},_createCityHistories:function(){var t=this._keyCities,e=function(t){if(!t)return"";var e='
        搜索历史

        ',i="";return t.split("|").each(function(t){i+=S.format('$1',t)}),e+'
        '+i+"
        "};window.FHX_cityHistories_from=e(cQuery.cookie.get(t,"from")),window.FHX_cityHistories_to=e(cQuery.cookie.get(t,"to")),window.FHX_cityHistories_checkin=e(cQuery.cookie.get(t,"checkin"))},setFltFrom:function(t){var e=this,i={};if(!t.sourceName.isCtripIndex&&!t.sourceName.isHotelInternational){var n="",r="";window.FRTPage&&window.FRTPage.DATA&&(n=FRTPage.DATA.DPFromCity,r=FRTPage.DATA.DPCityName),i=e._fields;var o=$("#divFlightQuery").find(".js_fltItem");n&&r?(o.eq(0).find("input[name=fltFromCities]").value(n),o.eq(0).find("input[name=txtFrom]").value(r)):(i=e.recoverFromCookie(t),o.eq(0).find("input[name=fltFromCities]").value(i.from.id),o.eq(0).find("input[name=txtFrom]").value(i.from.name),o.eq(0).find("input[name=fltFromCitypy]").value(i.from.en)),$("#txtFromDate").attr("fromDate",i.from.date),i.to.id&&i.to.id.length>0?o.eq(0).find("input[name=fltToCities]").value(i.to.id):"",i.to.name&&i.to.name.length>0?o.eq(0).find("input[name=txtTo]").value(i.to.name):"",i.to.en&&i.to.en.length>0?o.eq(0).find("input[name=fltToCitypy]").value(i.to.en):"",o.eq(0).find("input[name=txtToDate]").attr("toDate",i.to.date),$("#AdultSelect").value(i.adults),$("#ChildrenSelect").value(i.children),e._checkDates(i,t),$('#divHotelQuery [data-search="hotel"] input').each(function(e,n){switch(n){case 0:t.sourceName.isDpConfirm||"B"==t.ABtest_type_value||e.value(i.to.name);break;case 1:break;case 2:e.value(i.to.en);break;case 3:e.attr("fromDate",i.from.date);break;case 4:e.attr("toDate",i.to.date)}})}this._createCityHistories()},recover:function(t){var e=this,i={},n=$("#divFlightQuery").find(".js_fltItem");if(t.sourceName.isCtripIndex)i=e._fields,e._checkDates(i,t),i=e.recoverFromCookie(t),n.eq(0).find("input[name=fltFromCities]").value(i.from.id),n.eq(0).find("input[name=FromCityName]").value(i.from.name),n.eq(0).find("input[name=fltFromCitypy]").value(i.from.en),$("#txtFromDate").attr("fromDate",i.from.date),i.to.id&&i.to.id.length>0?n.eq(0).find("input[name=fltToCities]").value(i.to.id):"",n.eq(0).find("input[name=txtToDate]").attr("toDate",i.to.date),$("#FHX_AdultSelect").value(i.adults),$("#FHX_ChildrenSelect").value(i.children),e._checkDates(i,t),$("#SSH_txtSearch").value(cQuery.cookie.get("SSHSearch","keyword")||"");else if(t.sourceName.isHotelInternational)e.recoverFromCookie(t),i=e._fields,e._checkDates(i,t),$("#FHX_hFromID").value(i.from.id),$("#FHX_txtFrom").value(i.from.name),$("#FHX_hFromPY").value(i.from.en),$("#FHX_txtFromDate").attr("fromDate",i.from.date),$("#FHX_hToID").value(i.to.id),$("#FHX_txtTo").value(i.to.name),$("#FHX_hToPY").value(i.to.en),$("#FHX_txtToDate").attr("toDate",i.to.date),$("#FHX_AdultSelect").value(i.adults),$("#FHX_ChildrenSelect").value(i.children),$("#FHX_divHotelQuery input").each(function(t,e){switch(e){case 0:t.value(i.to.name);break;case 1:t.value(i.to.id);break;case 2:t.value(i.to.en);break;case 3:t.attr("fromDate",i.from.date);break;case 4:t.attr("toDate",i.to.date)}}),$("#SSH_txtSearch").value(cQuery.cookie.get("SSHSearch","keyword")||"");else{var r="",o="";window.FRTPage&&window.FRTPage.DATA&&(r=FRTPage.DATA.DPFromCity,o=FRTPage.DATA.DPCityName),i=e._fields,r&&o?(n.eq(0).find("input[name=fltFromCities]").value(r),n.eq(0).find("input[name=txtFrom]").value(o)):(i=e.recoverFromCookie(t),n.eq(0).find("input[name=fltFromCities]").value(i.from.id),n.eq(0).find("input[name=txtFrom]").value(i.from.name),n.eq(0).find("input[name=fltFromCitypy]").value(i.from.en)),$("#txtFromDate").attr("fromDate",i.from.date),i.to.id&&i.to.id.length>0?n.eq(0).find("input[name=fltToCities]").value(i.to.id):"",i.to.name&&i.to.name.length>0?n.eq(0).find("input[name=txtTo]").value(i.to.name):"",i.to.en&&i.to.en.length>0?n.eq(0).find("input[name=fltToCitypy]").value(i.to.en):"",n.eq(0).find("input[name=txtToDate]").attr("toDate",i.to.date),$("#AdultSelect").value(i.adults),$("#ChildrenSelect").value(i.children),e._checkDates(i,t),$('#divHotelQuery [data-search="hotel"] input').each(function(e,n){switch(n){case 0:t.sourceName.isDpConfirm||"B"==t.ABtest_type_value||e.value(i.to.name);break;case 1:e.value(i.to.id);break;case 2:e.value(i.to.en);break;case 3:e.attr("fromDate",i.from.date);break;case 4:e.attr("toDate",i.to.date)}})}this._createCityHistories()},recoverFromCookie:function(t){var e=this._key,i=this._fields,n={};for(var r in i){var o=i[r];if("object"!==("undefined"==typeof o?"undefined":_typeof(o)))break;var a=o&&Object.keys(o);if(a&&a.length>0){n[r]={};for(var s=0;s=a.fltTextBoxs[e+1].value()||i.toDate().addDays(365).toFormatString("yyyy-MM-dd")=a.fltTextBoxs[e+1].value():i>=a.fltTextBoxs[e+1].value()||i.toDate().addDays(365).toFormatString("yyyy-MM-dd")4)){var i="";i=e.componentsObj.config.html.ctripIndex_flt_template;var n=$.tmpl.render(i,{count:t.flightCount,index:t.flightCount+1,to:"",toid:"",hasCity:!1}),a=$(e.componentsObj.S.create(n));a.find(".js_exchange").removeClass("icon-exchange"),a.find(".js_exchange").addClass("icon-exchangein"),t.flightContainer[0].appendChild(a[0]),t.setOpenMultiView(e),e.componentsObj.Mod.Placeholder.enable(a),a.find("input[type=text]").each(function(i,n){t._regFlightMods(i,n,t,e)}),t.updateFlightBox(t),t.setHotelInDateByFltFDate(),t.setPlaceHodel(e,Mod)}},setOpenMultiView:function(t){t.EntriesDiff.ctripIndexSearchObject.openMultiView(1)},updateFlightBox:function(t){var e=[];e=t.flightContainer.find(".js_fltItem a.close"),e[e.length-1].className=e.length>0?"s_item_del fr close":"s_item_del fr hidden",e.length>=4?$("#lnkAddFlight").addClass("hidden"):$("#lnkAddFlight").removeClass("hidden");var i=$(e[e.length-1]);i.bind("click",function(){var e=this;t.removeFlight(t,$(e).attr("data-index"))})},deleteDefaultFlightEvent:function(){var t=this,e=t.flightContainer.find(".js_fltItem a.close");e.bind("click",function(){var e=this;t.removeFlight(t,$(e).attr("data-index"))})},setHotelInDateByFltFDate:function(){},removeFlight:function(t,e){var i=t._global;if(2!=i.isOneway?t.resetEntryBoxHeight2():t.resetEntryBoxHeight(t,!1),!(""==e||t.flightCount<=2)){t.flightCount--,i.fltTextBoxs.splice(4*e,4);var n=0;t.flightContainer.find(".js_fltItem").each(function(t,i){i==e?t[0].parentNode.removeChild(t[0]):(t.find("a.close").attr("data-index",n),t.find("div.js_flt_num").html(n+1),1==n&&t.find("a.close").addClass("hidden"),n++)}),t.flightCount>=4||2!=i.isOneway?$("#lnkAddFlight").addClass("hidden"):$("#lnkAddFlight").removeClass("hidden")}},resetEntryBoxHeight:function(t,e){var i=(t.flightCount,$("#divFlightQuery .js_fltItem").eq(0).height()||0),n=$("#searchBox"),a=$("#searchBoxUl"),r=$("#FHX_container");e?(i=+i,n.css({height:i+n.height()+"px"}),a.css({height:i+a.height()+"px"}),r.css({height:i+r.height()+"px"})):(i=-+i,n.attr("style")&&n.css({height:i+n.height()+"px"}),a.attr("style")&&a.css({height:i+a.height()+"px"}),r.attr("style")&&r.css({height:i+r.height()+"px"}))},resetEntryBoxHeight2:function(){$("#searchBox").css("height","300px"),$("#searchBoxUl").css("height","300px"),$("#FHX_container").css("height","275px")},setDefaultPelace:function(t){var e=t._global.fltTextBoxs[1],i=t._global.fltTextBoxs[2],n=t._global.fltTextBoxs[3];e.regMod("notice","1.0",{name:"txtTo",tips:"中文/拼音/英文",selClass:""},!0),i.regMod("notice","1.0",{name:"txtFromDate",tips:"yyyy-mm-dd",selClass:""},!0),n.regMod("notice","1.0",{name:"txtToDate",tips:"yyyy-mm-dd",selClass:""},!0)},_getInteDate_For_Flight:function(t,e,i){var n={flight_from_min:(new Date).toStdDateString(),flight_from_max:(new Date).addDays(365).toStdDateString(),flight_to_min:i.value().toDate()&&i.value().toDate().toStdDateString(),flight_to_max:i.value().toDate()&&i.value().toDate().addDays(365).toStdDateString()};return n},_validateAddress_F:function(t){var e=this,i=e._global,Mod=i.componentsObj.Mod;t.method("source_get")?(t._isFilterFtlByInit=!0,t.method("validate",!1)):setTimeout(function(){t.method("source_get")?(t._isFilterFtlByInit=!0,t.method("validate",!1),e.setPlaceHodel(i,Mod)):e._validateAddress_F(t)},300)},_createAddressOptions_F:function(t){var e=this._global.componentsObj,i="to"==t,n={name:t,isAutoCorrect:!0,jsonpSource:e.config.url.flightAddressJsonpSource[i?1:0],jsonpFilter:this._getFlightCityUrl(t),update_jsonpFilter:this._global.ComFun.update_Ajax_ConfigURL.bind(this,this._getFlightCityUrl(t)),update_jsonpSource:this.flight_jsonpData_filter.bind(this),update_html_filter:this.flight_html_filter.bind(this),FH_jsonpSource_filter_url:this.FH_jsonpSource_filter_url.bind(this),needvalidateFn:this._global.ComFun.needvalidateFn,jsonpFilterInit:i?this._flightFilterTo.bind(this,t):this._flightFilterFrom.bind(this,t),template:{suggestion:e.config.html.address.suggestion.replace("$$",t),suggestionStyle:e.config.html.address.suggestionStyle,filter:e.config.html.address.filterFltToCity,filterStyle:e.config.html.address.filterFltToCityStyle,suggestionIpad:e.config.html.address.suggestion.replace("$$",t),suggestionStyleIpad:e.config.html.address.suggestionStyle},isOneway:this._global.isOneway,ABtest_type_value:"B"};return n},FH_jsonpSource_filter_url:function(t,e){return t},flight_jsonpData_filter:function(e,i,n){var a=t._global,r=(a.cur_fhTabsIndex,{});return e&&a.ABtest_type_value<"B"&&1==a.isOneway&&("to"==i||"checkin"==i)?e["国内"]&&e["港澳台"]&&(r["国内"]=e["国内"],r["港澳台"]=e["港澳台"],r["港澳台"].length>=3&&(r["港澳台"]=e["港澳台"].filter(function(t,e){return 2!=e}))):r=e,r},flight_html_filter:function(t,e){return t},_bindAddressChange_F:function(e,i){var n=this,a=this,r=(a._global,a._global.componentsObj),Mod=r.Mod,o=(a._global.DpConfirmDefaultObj,void 0),s=void 0,l=void 0;"from"==i?(o=this.hFromID,s=this.hFromPY,l=this.hFromNM):(o=this.hToID,s=this.hToPY,l=this.hToNM);var u="ipad"==navigator.userAgent.toLowerCase().match(/ipad/i),d=a._getFlightCityUrl("from");e.address.method("bind","change",function(t,i){if(i.items){var r=e.idealData&&e.idealData.id?!0:!1;if(r&&e.shouldJudge){var o=i.items[3]?i.items[3].split("$"):null,s=o?parseInt(o[1]):null,l=e.idealData?parseInt(e.idealData.id):null,h=(e.idealData?e.idealData.name:null,"number"==typeof s&&"number"==typeof l),f=h&&s!=l;f&&(o[1]=l,i.items[3]=o.join("$"),e.idealData.idInput.value(l)),e.shouldJudge=!1}if(i.items.length>3&&-1!==i.items[3].indexOf("$")){var p=i.items[3].split("$"),m={Data:[{Type:p[0],CityId:p[1],Name:p[2],EName:p[3],Code:p[4]?p[4]:""}]};e[0].value=p[2],e[0].blur(),c(m)}else{e[0].value=i.items[1].replace(/\([^\)]+\)/g,""),e[0].blur();var g=d.replace("${key}",encodeURIComponent(escape(i.value.split(",")[0])));a._global.componentsObj.Model.GetFlightCityData.execute(g,c.bind(n))}u&&e.address.method("hidden"),Mod.Placeholder.enable($("#FHX_form"))}});var c=function(n){var a={Data:n.Data||n.PoiList};if(a.Data){for(var r=!1,o=0;a.Data&&o0?!0:!1},resetFlightInputValue:function(){var e=t._global,i=t;e.ComFun.HistoryKeeper.setFltFrom(e),i.clearInput()},multiClear:function(){var e=t._global,Mod=e.componentsObj.Mod;Mod.Placeholder.enable($("#FHX_form"))},clearSecondFlightInput:function(){var e=t._global,Mod=e.componentsObj.Mod;Mod.Placeholder.enable($("#FHX_form"))},setFlight_FB:function(){t._global.fltTextBoxs[1].focus(),t._global.fltTextBoxs[1].blur(),t._global.fltTextBoxs[2].focus(),t._global.fltTextBoxs[2].blur(),t._global.fltTextBoxs[3].focus(),t._global.fltTextBoxs[4].blur()},resetFlightMinMaxDate:function(){t._global;$("#divFlightQuery").find(".js_fltItem").each(function(t,e){t.find("input[name=FromTime]").data("minDate",(new Date).addDays(365).toStdDateString()),t.find("input[name=ToTime]").data("maxDate",t.find("input[name=FromTime]").value()?t.find("input[name=FromTime]").value().toDate().addDays(365).toStdDateString():(new Date).addDays(365).toStdDateString())})}};return t});; var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};define("webresource/component/dpSearchEntryCtripIndex/dpSearchHotel.FMultiCIComponent.js", [], function(require,exports,module){require("tools/FHXAddressNew.js");var t={init:function(t,e){var i=this;i._globle=t,i.F=t.componentsObj.flightComponent,i.hotelCount=0,i.hotelContainer=$("#FHX_divHotelQuery"),t.textboxes=[],t.sourceName.isDpConfirm&&t.EntriesDiff.dpConfirmObj&&t.EntriesDiff.dpConfirmObj.defaultHotelContent.length<=0&&(t.EntriesDiff.dpConfirmObj.defaultHotelContent=i.hotelContainer[0]&&i.hotelContainer[0].innerHTML),t.sourceName.isCtripIndex&&i.hotelContainer.find('input[type="text"]').each(this._regHotelMods.bind(i)),e||(i.hotelContainer.bind("click",function(t){var e=t.target.getAttribute("id");if("A"==t.target.nodeName&&"lnkAddFlight"!=e&&"lnkSearch"!=t.target.id){var n=t.target.getAttribute("data-index");null!==n&&""!==n?i.removeHotel(+n):i.addHotel()}}),t.sourceName.isCtripIndex&&$("#FHX_lnkAddHotel").bind("click",i.addHotel.bind(i)),i.initTextboxesFun(),i.showAddHotelBtn(t))},showAddHotelBtn:function(t){if(!t.sourceName.isSdpIndex){var e=$("#FHX_divHotelQuery");e.find(".js_hotelItem").length>=4?!e.find("#lnkAddHotel").hasClass("hidden")&&e.find("#lnkAddHotel").addClass("hidden"):e.find("#lnkAddHotel").hasClass("hidden")&&e.find("#lnkAddHotel").removeClass("hidden")}},_getInteDate_For_Hotel:function(t,e,i){return t._chooseFMultiF(t,e,i)},_chooseDWF:function(t,e,i){var n="",a={},o={},r={},s=t._globle,l=t.dateCheck($(e).parent().find("input[name=CheckInDate]").eq(0)),d=(new Date).toStdDateString();if(s.ABtest_type_value<="B"?(n=t.F.txtToDate.attr("todate"),o=t.F.txtFromDate,r=t.F.txtToDate):(n=s.fltTextBoxs[3].attr("todate"),o=s.fltTextBoxs[2],r=s.fltTextBoxs[3]),2==s.cur_fhTabsIndex&&"checkin"==i)a={hotel_in_min:(new Date).addDays(1).toStdDateString(),hotel_in_max:(new Date).addDays(365).toStdDateString(),hotel_out_min:(new Date).addDays(2).toStdDateString(),hotel_out_max:(new Date).addDays(28).toStdDateString()};else if(s.isOneway)"checkin"==i?a={hotel_in_min:(new Date).toStdDateString(),hotel_in_max:(new Date).addDays(365).toStdDateString()}:"checkout"==i&&(a={hotel_out_min:(l||d).toDate().addDays(1).toStdDateString(),hotel_out_max:(l||d).toDate().addDays(28).toStdDateString()});else if("checkin"==i)a={hotel_in_min:(t.dateCheck(o)||o.attr("fromdate")).toDate().addDays(-1).toStdDateString(),hotel_in_max:(t.dateCheck(r)||r.attr("todate")).toDate().toStdDateString()};else if("checkout"==i){var u=$("#FHTabsBox"),c=u.find("li"),h=-1;if(c.map(function(t,e){$(t).hasClass("cur")&&(h=e)}),c&&0==c.length||0==h){var f=(l||d).toDate().toStdDateString(),p=t.dateCheck(r),m=(p||t.dateCheck(n)).toDate().toStdDateString(),g=s.componentsObj.S.dateDiffP(f.toDate().addDays(28).toStdDateString(),m,"d"),_=void 0;_=1>g?f.toDate().addDays(28).toStdDateString():m.toDate().addDays(1).toStdDateString(),a={hotel_out_min:(l||d).toDate().addDays(1).toStdDateString(),hotel_out_max:_}}else a={hotel_out_min:(l||d).toDate().addDays(1).toStdDateString(),hotel_out_max:(l||d).toDate().addDays(28).toStdDateString()}}return a},_chooseFMultiF:function(t,e,i){var n="",a={},o={},r={},s=t._globle,l=t.dateCheck($(e).parent().find("input[name=CheckInDate]").eq(0)),d=(new Date).toStdDateString();if(n=s.fltTextBoxs[3].attr("todate")||s.fltTextBoxs[3].attr("data-default"),o=s.fltTextBoxs[2],r=s.fltTextBoxs[3],2==s.cur_fhTabsIndex&&"checkin"==i)a={hotel_in_min:(new Date).toStdDateString(),hotel_in_max:(new Date).addDays(730).toStdDateString(),hotel_out_min:(new Date).toStdDateString(),hotel_out_max:(new Date).addDays(28).toStdDateString()};else if(1==s.isOneway)"checkin"==i?a={hotel_in_min:(new Date).toStdDateString(),hotel_in_max:(new Date).addDays(365).toStdDateString()}:"checkout"==i&&(a={hotel_out_min:(l||d).toDate().addDays(1).toStdDateString(),hotel_out_max:(l||d).toDate().addDays(28).toStdDateString()});else if(0==s.isOneway){if("checkin"==i){var u=(new Date).toStdDateString();if(t.dateCheck(o)||o.attr("fromdate")){var c=(t.dateCheck(o)||o.attr("fromdate")).toDate().addDays(-1).toStdDateString(),h=s.componentsObj.S.dateDiffP((new Date).toStdDateString(),c,"d");u=h>0?(new Date).toStdDateString():c}else;a={hotel_in_min:u,hotel_in_max:(t.dateCheck(r)||(new Date).toDate().addDays(365)).toDate().toStdDateString()}}else if("checkout"==i){var f=$("#FHTabsBox"),p=f.find("li"),m=-1;if(p.map(function(t,e){$(t).hasClass("cur")&&(m=e)}),p&&0==p.length||0==m){var g=(l||d).toDate().toStdDateString(),_=t.dateCheck(r),y=(_||(new Date).toDate().addDays(28)||t.dateCheck(n)).toDate().toStdDateString(),v=s.componentsObj.S.dateDiffP(g.toDate().addDays(28).toStdDateString(),y,"d"),x=void 0;x=1>v?g.toDate().addDays(28).toStdDateString():y.toDate().addDays(1).toStdDateString(),a={hotel_out_min:(l||d).toDate().addDays(1).toStdDateString(),hotel_out_max:x}}else a={hotel_out_min:(l||d).toDate().addDays(1).toStdDateString(),hotel_out_max:(l||d).toDate().addDays(28).toStdDateString()}}}else if("checkin"==i)a={hotel_in_min:(new Date).toStdDateString(),hotel_in_max:(new Date).toDate().addDays(365).toStdDateString()};else if("checkout"==i){var C=$("#FHTabsBox"),b=C.find("li"),F=-1;b.map(function(t,e){$(t).hasClass("cur")&&(F=e)}),a={hotel_out_min:(l||d).toDate().addDays(1).toStdDateString(),hotel_out_max:(l||d).toDate().addDays(28).toStdDateString()}}return a},dateCheck:function(t){return"string"==typeof t?t&&"0001-01-01"!=t?t:"":t&&t.value().length>0&&"0001-01-01"!=t.value()?t.value():""},_regHotelMods:function(e,i){var n=this,a=t._globle,o=a.componentsObj,Mod=o.Mod,r=i%3,S=o.S;if(0==r)!function(){var t=e.parentNode().find('input[type="hidden"]'),i=e.parentNode().find('input[name="searchid"]'),r=e.parentNode().find('input[name="searchtype"]');$.mod._mods.addressNew||$.mod.load("addressNew","1.0"),$.mod._mods.calendar||$.mod.load("calendar","6.0");var s=e.regMod("addressNew","1.0",n._createAddressOptions_H(e,{2:$(t[0]),3:$(t[1]),6:$(r),7:$(i)}));e.address=s,n._validateAddress(e.address),n._bindAddressChange_H(e),s.method("bind","userinput",function(t,i){1!=e.data("valid")&&s.method("validate",!1)}),s.method("bind","change",function(t,i){i.items&&i.items[2].length?e.data("valid",1):e.data("valid",0)}),e.bind("focus",function(){e.data("valid",0)}),a.on("tocitychange",function(t,i,r,s){var l=function(t){var i=$(S.parent(e,t)),n=$(S.parent(i,"#FHX_divHotelQuery")),a=n.find(".js_hotelItem").indexOf(i);return r?r-1==a:!0},d=function(a,r){r||i?a&&r?(e.value(a),e.parent().find("input[name=ToCities]").value(r)):(e.value(t),e.parent().find("input[name=ToCities]").value(i)):window.console&&console.log("no find hotelId..."),e.address._isFilterHtlByFlt=!0,o.publicMod.blackCityOpt(i)&&e.address.method("validate",!1,function(){}.bind(n)),Mod.Placeholder.enable($("#FHX_form"))},u="";a.sourceName.isCtripIndex&&(u="div.s_item_cont"),!a.hotelCityChanged&&l(u)&&o.publicMod.hotelInfoAjax(d,t,s,a.sourceName),n._checkFltHtl_H()})}();else{var s={};if(1==r)s=e.regMod("calendar","6.0",{options:{minDate:a.HotelComponent._getInteDate_For_Hotel(n,e,"checkin").hotel_in_min,maxDate:a.HotelComponent._getInteDate_For_Hotel(n,e,"checkin").hotel_in_max,showWeek:a.sourceName.isSdpIndex?!1:!0,container:cQuery.container},listeners:{onChange:function(t,i){2!=a.isOneway&&(a.hotelCityChanged=!0);var n=(i.toDate().toStdDateString(),a.textboxes.next(e));a.HotelComponent.update_minAndmax_dateF(!0),a.sourceName.isDpConfirm?a.EntriesDiff.dpConfirmObj.focusNext&&(i>=n.value()&&n.value(i.toDate().addDays(1).toFormatString("yyyy-MM-dd")),n[0].focus()):setTimeout(function(){n.value(i.toDate().addDays(1).toFormatString("yyyy-MM-dd")),n[0].focus()},30)}}}),a.on("fromdatechange",function(t,i){2!=a.isOneway&&(e.data("minDate",i),n._updateHotelBox_FMulti(n._splitFlightDates()))}),a.on("todatechange",function(t,i){2!=a.isOneway&&(e.data("maxDate",i.toDate().addDays(-1).toStdDateString()),a.hotelCityChanged=!0)});else{var l=(a.fltTextBoxs[3].attr("toDate")||a.fltTextBoxs[3].attr("data-default"),$("#FHX_divHotelQuery").find("input[name=CheckInDate]")),d=void 0;l&&l.length>0&&(d=$(l[0]).value()),s=e.regMod("calendar","6.0",{options:{minDate:a.HotelComponent._getInteDate_For_Hotel(n,e,"checkout").hotel_out_min,maxDate:a.HotelComponent._getInteDate_For_Hotel(n,e,"checkout").hotel_out_max,showWeek:a.sourceName.isSdpIndex?!1:!0},listeners:{onChange:function(t,e){2!=a.isOneway&&(a.hotelCityChanged=!0)}}}),n.hotelCount++,a.on("todatechange",function(t,e){2!=a.isOneway&&n._updateHotelBox(n._splitFlightDates()),n.update_minAndmax_dateF(),2!=a.isOneway&&(a.hotelCityChanged=!0)})}a.isShowWeek,e.calendar=s}a.textboxes.push(e)},update_minAndmax_dateF:function(e){var i=t._globle,Mod=i.componentsObj.Mod,n="#FHX_divHotelQuery",a=$(n+" input[name=CheckInDate]"),o=$(n+" input[name=CheckOutDate]");i.FlightComponent;2==i.cur_fhTabsIndex?!function(){var t=[];a.each(function(e,i){t.push($(e)),$(e).data("minDate",(new Date).toStdDateString()),$(e).data("maxDate",(new Date).addDays(730).toStdDateString())}),o.each(function(e,i){$(e).data("minDate",t[i].value().length>0?t[i].value().toDate().addDays(1).toStdDateString():(new Date).addDays(1).toStdDateString()),$(e).data("maxDate",t[i].value().length>0?t[i].value().toDate().addDays(28).toStdDateString():(new Date).addDays(28).toStdDateString())})}():1==i.isOneway?(a.each(function(t,e){$(t).data("minDate",(new Date).toStdDateString()),$(t).data("maxDate",(new Date).addDays(365).toStdDateString())}),o.each(function(t,e){var n=$(i.componentsObj.S.parent($(t),"div.s_item_cont")).eq(0).find("input[name=CheckInDate]").value();$(t).data("minDate",n&&n.toDate().addDays(1).toStdDateString()),$(t).data("maxDate",n&&n.toDate().addDays(28).toStdDateString())})):0==i.isOneway?!function(){var n=[],r=(i.ABtest_type_value,i.fltTextBoxs[2].value()),s=i.fltTextBoxs[3],l=i.cur_fhTabsIndex;a.each(function(e,a){var o=t.checkfhFrom(r,i);n.push($(e)),$(e).data("minDate",2==l?(new Date).addDays(1).toStdDateString():o),$(e).data("maxDate",2==l?(new Date).addDays(365).toStdDateString():s.value()&&s.value().toDate().toStdDateString())});var d="";d=2==l?(new Date).addDays(393).toStdDateString():(s.value()||(new Date).addDays(393)).toDate().toStdDateString(),o.each(function(t,o){var r=n[o].value();if(0!=r.length)if($(t).data("minDate",r.toDate().addDays(1).toStdDateString()),2==l)$(t).data("maxDate",a[o]&&$(a[o]).value().toDate().addDays(28).toStdDateString());else if(r){var s=i.componentsObj.S.dateDiffP(r.toDate().addDays(28).toStdDateString(),d,"d");1>s?($(t).data("maxDate",r.toDate().addDays(28).toStdDateString()),e?"":0==o?$(t).value(r.toDate().addDays(28).toFormatString("yyyy-MM-dd")):""):$(t).data("maxDate",d.toDate().addDays(1).toStdDateString())}})}():!function(){var t=[];a.each(function(e,i){t.push($(e)),$(e).data("minDate",(new Date).toStdDateString()),$(e).data("maxDate",(new Date).addDays(365).toStdDateString())}),o.each(function(e,i){$(e).data("minDate",t[i].value().length>0?t[i].value().toDate().addDays(1).toStdDateString():(new Date).addDays(1).toStdDateString()),$(e).data("maxDate",t[i].value().length>0?t[i].value().toDate().addDays(28).toStdDateString():(new Date).addDays(28).toStdDateString())})}(),Mod.Placeholder.enable($("d#FHX_form"))},checkfhFrom:function(t,e){var i=(new Date).toStdDateString();if(t){var n=t.toDate().addDays(-1).toStdDateString(),a=e.componentsObj.S.dateDiffP((new Date).toStdDateString(),n,"d");i=a>0?(new Date).toStdDateString():n}else;return i},clear_hotelCheckinput:function(){var e=t._globle,Mod=e.componentsObj.Mod;Mod.Placeholder.enable($("#FHX_form"))},setAddHotelBtnState:function(){$("#FHX_divHotelQuery").find(".js_hotelItem").length>=4?$("#lnkAddHotel").addClass("hidden"):$("#lnkAddHotel").removeClass("hidden")},clear_hotelallinput:function(){var e=t._globle,Mod=e.componentsObj.Mod;Mod.Placeholder.enable($("#FHX_form"))},_validateAddress:function(t){var e=this,i=e._globle,Mod=i.componentsObj.Mod;t.method("source_get")?(t._isFilterHtlByInit=!0,t.method("validate",!1)):setTimeout(function(){t.method("source_get")?(t._isFilterHtlByInit=!0,t.method("validate",!1),e.setPlaceHodel(i,Mod)):e._validateAddress(t)},300)},_createAddressOptions_H:function(e,i){var n=t._globle,a=t._globle.componentsObj,o=a.publicMod,r="checkin",s={name:r,relate:i,isAutoCorrect:!1,jsonpSource:a.config.url.hotelAddressJsonpSource,jsonpFilter:a.config.url.getHotelCityByKeyword,getblackCity:n.ComFun.getblackCity,editFilterData:o.editFilterData,needvalidateFn:n.ComFun.needvalidateFn,update_jsonpFilter:n.ComFun.update_Ajax_ConfigURL.bind(this,a.config.url.getHotelCityByKeyword),update_jsonpSource:n.FlightComponent.flight_jsonpData_filter.bind(this),update_html_filter:n.FlightComponent.flight_html_filter.bind(this),FH_jsonpSource_filter_url:n.FlightComponent.FH_jsonpSource_filter_url.bind(this),jsonpFilterInit:this._hotelFilter.bind(this,r,e),template:{suggestion:a.config.html.address.suggestion.replace("$$",r),suggestionStyle:a.config.html.address.suggestionStyle,filter:a.config.html.address.filter[1],filterStyle:a.config.html.address.filterStyle[1],suggestionIpad:a.config.html.address.suggestion.replace("$$",r),suggestionStyleIpad:a.config.html.address.suggestionStyle},isOneway:n.isOneway,ABtest_type_value:"B"};return s},_hotelFilter:function(e,i,n){var a=t._globle,Mod=a.componentsObj.Mod,o=a.componentsObj.publicMod,r={data:"",key:i.value()};if(!n.Items||0==n.Items.length)return(i.address._isFilterHtlByFlt||i.address._isFilterHtlByInit)&&(i.value(""),i.address._isFilterHtlByFlt=!1,i.address._isFilterHtlByInit=!1),t.setPlaceHodel(a,Mod),r;if(i.address._isFilterHtlByInit){for(var s=i.next().value(),l=-1,d=[],u=0;n.Items&&u0&&(n.Items.splice(l,1),n.Items.unshift(d[0]))}return t.setPlaceHodel(a,Mod),o.setFilterData(n,r)},setPlaceHodel:function(t,Mod){Mod.Placeholder.enable($("#FHX_form"))},_bindAddressChange_H:function(t){var e=this,i=e._globle,n=t.parentNode().find('input[type="hidden"]'),a=$(n[0]),o=($(n[1]),$(n[2]));t.address.method("bind","change",function(t,e){e.items&&(a.value(e.items[2]),o&&o.value(e.items[1]))});var r=void 0;t.bind("focus",function(){r=t.value()}),t.bind("blur",function(){var e=t.value();e!=r&&0!=e.indexOf(r)&&(i.hotelCityChanged=!0)})},_checkFltHtl_H:function(){var e=t._globle,i=$('#FHX_divHotelQuery input[type="text"]:first'),n=e.fltTextBoxs[1].value(),a=i.value().split("，")[0],o=n;!a||!o||this.hotelCount>1||a==o?e.componentsObj.S.hide($("#searchTip")):e.componentsObj.S.show($("#searchTip"))},addHotel:function(){var e=t,i=t._globle;if(e.resetEntryBoxHeight(e,!0),!(e.hotelCount>=4)){var n=i.fltTextBoxs[1],a=n.value(),o=e.F.hToID.value(),r=i.HotelComponent.getHotel_tpl(),s=$.tmpl.render(r,{to:a,toid:o,count:e.hotelCount,index:e.hotelCount+1}),l=$(i.componentsObj.S.create(s));if(i.sourceName.isCtripIndex&&e.hotelContainer[0].appendChild(l[0]),i.componentsObj.Mod.Placeholder.enable(l),i.sourceName.isCtripIndex){var d=$("#FHX_divHotelQuery");d.append(l)}l.find('input[type="text"]').each(e._regHotelMods.bind(e)),e.setAddHotelCityNameAndId_byFlt(e.hotelCount,l),i.hotelCityChanged=!1,e._updateHotelBoxH(e._splitFlightDates()),2==i.isOneway&&e.setOpenMultiView(i)}},setOpenMultiView:function(t){t.EntriesDiff.ctripIndexSearchObject.openMultiView(2)},setAddHotelCityNameAndId_byFlt:function(e,i){var n=t,a=n._globle,Mod=a.componentsObj.Mod,o=$("#divFlightQuery").find(".js_fltItem"),r={fltToCityId:"",fltToCityName:""};e<=o.length&&(r.fltToCityId=o.eq(e-1).find("input[name=fltToCities]").value(),r.fltToCityName=o.eq(e-1).find("input[name=fltToCitynm]").value(),i.find("input[name=ToCities]").value(r.fltToCityId),i.find("input[name=citynm]").value(r.fltToCityName),i.find('input[type="text"]').each(function(t,e){0==e&&(t.value(r.fltToCityName),t[0].focus(),t[0].blur())})),n.setPlaceHodel(a,Mod)},getHotel_tpl:function(){var e=t,i="";return i=e._globle.componentsObj.config.html.ctripIndex_htl_template},removeHotel:function(e){var i=t,n=t._globle;this.hotelCount--,n.textboxes.splice(3*e,3);var a=0,o="div.js_hotelItem";i.hotelContainer.find(o).each(function(t,i){i==e?t[0].parentNode.removeChild(t[0]):(t.find("a").attr("data-index",a),t.find("div.js_flt_num").html(a+1),a++)}),n.hotelCityChanged=!0,i._updateHotelBoxH(i._splitFlightDates()),i.resetEntryBoxHeight(i,!1)},_splitFlightDates:function(){var e=t,i=e._globle,n=i.fltTextBoxs[2],a=i.fltTextBoxs[3],o=n.value()||n.attr("fromDate")||n.attr("data-default")||(new Date).toFormatString("yyyy-MM-dd"),r=a.value()||a.attr("toDate")||a.attr("data-default")||(new Date).addDays(1).toFormatString("yyyy-MM-dd");if(1!=i.isOneway)return[o,r];if(1==i.isOneway)return[o.toDate().addDays(-1).toFormatString("yyyy-MM-dd"),r];if(o.isDate()&&r.isDate()&&!(o>r)){var s=[],l=i.componentsObj.S.dateDiff(o,r,"d");if(!(1>l)){if(1==l)return[o,r];var d=Math.floor(l/e.hotelCount),u=l%e.hotelCount,c=0,h=0;o=o.toDate(),r=r.toDate();for(var f=0;ff?1:0),c==h&&c--,s.push(o.addDays(c).toFormatString("yyyy-MM-dd"),o.addDays(h).toFormatString("yyyy-MM-dd")),c=h;return s}}},_updateHotelBox:function(e){var i=t,n=i._globle;if(e)for(var a=void 0,o=void 0,r=void 0,s=e.length-1,l=0;l<(n.ComFun.is_ABtest_DP()?1:i.hotelCount);l++)o=e[2*l]?e[2*l]:e[s-1],r=e[2*l+1]?e[2*l+1]:e[s],a=1+3*l,1==n.isOneway?"":n.textboxes[a].value(o),1==n.isOneway?"":n.textboxes[a+1].value(o==r?r.toDate().addDays(1).toFormatString("yyyy-MM-dd"):r),n.ComFun.is_ABtest_DP()||n.textboxes[a+1].data("minDate",o.toDate().addDays(1).toStdDateString());if(n.sourceName.isCtripIndex){var d=[300,326,340],u=[275,301,315];$("#searchBox").css({height:d[this.hotelCount-1]+"px"}),$("#searchBoxUl").css({height:d[this.hotelCount-1]+"px"}),$("#FHX_container").css({height:u[this.hotelCount-1]+"px"})}},_updateHotelBox_FMulti:function(e){var i=t,n=i._globle;if(e)for(var a=void 0,o=void 0,r=void 0,s=e.length-1,l=0;l<(n.ComFun.is_ABtest_DP()?1:i.hotelCount);l++)o=e[2*l]?e[2*l]:e[s-1],r=e[2*l+1]?e[2*l+1]:e[s],a=1+3*l,1==n.isOneway?"":n.textboxes[a].value(o),1==n.isOneway?"":n.textboxes[a+1].value(o==r?r.toDate().addDays(1).toFormatString("yyyy-MM-dd"):r),n.ComFun.is_ABtest_DP()||n.textboxes[a+1].data("minDate",o.toDate().addDays(1).toStdDateString());if(n.sourceName.isCtripIndex){var d=[300,326,340],u=[275,301,330,345];$("#searchBox").css({height:d[this.hotelCount-1]+"px"}),$("#searchBoxUl").css({height:d[this.hotelCount-1]+"px"}),$("#FHX_container").css({height:u[this.hotelCount-1]+"px"})}},resetEntryBoxHeight:function(t,e){var i=(t.flightCount,$("#FHX_divHotelQuery .js_hotelItem").eq(0).height()||0),n=$("#searchBox"),a=$("#searchBoxUl"),o=$("#FHX_container");e?(i=+i,n.css({height:i+n.height()+"px"}),a.css({height:i+a.height()+"px"}),o.css({height:i+o.height()+"px"})):(i=-+i,n.attr("style")&&n.css({height:i+n.height()+"px"}),a.attr("style")&&a.css({height:i+a.height()+"px"}),o.attr("style")&&o.css({height:i+o.height()+"px"}))},resetEntryBoxHeight2:function(t,e){var i=(t.flightCount,$("#FHX_divHotelQuery .js_hotelItem").eq(0).height()||0),n=$("#searchBox"),a=$("#searchBoxUl"),o=$("#FHX_container");e?(i=+i,n.css({height:i+n.height()+"px"}),a.css({height:i+a.height()+"px"}),o.css({height:i+o.height()+"px"})):(i=-+i,n.css({height:i+n.height()+"px"}),a.css({height:i+a.height()+"px"}),o.css({height:i+o.height()+"px"}))},_updateHotelBoxH:function(e){var i={},n=t,a=n._globle;a.sourceName.isCtripIndex?(i=n.hotelContainer.find(">div a"),i[0].className=i.length>1?"s_item_del fr":"s_item_del fr hidden",i.length>=4?$("#FHX_lnkAddHotel").addClass("hidden"):$("#FHX_lnkAddHotel").removeClass("hidden")):(i=n.hotelContainer.find('[data-search="hotel"] a'),i[0].className=i.length>1?"close":"hidden",a&&1!=a.cur_fhTabsIndex&&(i.length>=4?$("#lnkAddHotel").addClass("hidden"):$("#lnkAddHotel").removeClass("hidden")))},initTextboxesFun:function(){var e=t._globle.textboxes;e.next=function(t){return e[e.indexOf(t)+1]},e.last=function(t){return e[e.length-1]}},clear_hotel_Inputtxt:function(e){var i=t._globle,Mod=i.componentsObj.Mod;Mod.Placeholder.enable($("#FHX_form"))},clearAddHotels:function(e,i){var n=t,a=n._globle,o=a.textboxes.length;if(a.HotelComponent.clear_hotelallinput(),a.defFHTabIndex!=i||!a.sourceName.isDpConfirm){var r=function(){if(3*e>=o)return{v:void 0};var t=o-3*e,i=0;i=t>=3?t/3:0,n.hotelCount-=i,a.textboxes.splice(3*e,t);var r=0,s=a.sourceName.isCtripIndex?"div.js_hotelItem":'[data-search="hotel"]';n.hotelContainer.find(s).each(function(t,e){0!=e&&(i>=e?t[0].parentNode.removeChild(t[0]):t.find("a").attr("data-index",r++))})}();if("object"===("undefined"==typeof r?"undefined":_typeof(r)))return r.v}n._updateHotelBoxH(n._splitFlightDates())},multiClear:function(e){var i=t,n=i._globle,a=n.textboxes.length;if(n.HotelComponent.clear_hotelallinput(),!(3*e>=a)){var o=a-3*e,r=0;r=o>=3?o/3:0,i.hotelCount-=r,n.textboxes.splice(3*e,o);var s=0,l=n.sourceName.isCtripIndex?"div.js_hotelItem":'[data-search="hotel"]';i.hotelContainer.find(l).each(function(t,e){0!=e?r>=e?t[0].parentNode.removeChild(t[0]):t.find("a").attr("data-index",s++):t.find("a").addClass("hidden")}),i.hotelContainer.find(l).length<4&&$("#FHX_lnkAddHotel").removeClass("hidden")}}};return t});; "use strict";define("webresource/component/dpSearchEntryCtripIndex/dpSearchVailter.FMultiCIComponent.js", [], function(require,exports,module){var t={fmultiComponent:null,checkAddress:function(e,i,n,a){var o=t.fmultiComponent,r=o.componentsObj.config;if(i){if(!e.value().trim()&&2!=o.cur_fhTabsIndex)return o.ComFun.showTips(e,r.tipMsg.msg_noFromCity),!1;if(!i.value().trim()&&2!=o.cur_fhTabsIndex)return o.ComFun.showTips(i,r.tipMsg.msg_noToCity),!1;if(e.value().trim()==i.value().trim()||!o.sourceName.isOfflineIndex&&n==a)return o.ComFun.FlightSameCityTip(i,r.tipMsg.msg_departCityEqualReturnCity),!1}else if(!e.value().trim()&&1!=o.cur_fhTabsIndex)return o.ComFun.showTips(e,r.tipMsg.msg_noCheckInCity),!1;return!0},checkAddress_Multi:function(e,i,n,a){var o=t.fmultiComponent,r=o.componentsObj.config;if(i){if(!e.value().trim())return o.ComFun.showTips(e,r.tipMsg.msg_noFromCity),!1;if(!i.value().trim())return o.ComFun.showTips(i,r.tipMsg.msg_noToCity),!1;if(e.value().trim()==i.value().trim()||!o.sourceName.isOfflineIndex&&n==a)return o.ComFun.FlightSameCityTip(i,r.tipMsg.msg_departCityEqualReturnCity),!1}else if(!e.value().trim())return o.ComFun.showTips(e,r.tipMsg.msg_noCheckInCity),!1;return!0},checkDate:function(e,i,n,a){var o=e.value(),r=i.value(),s=t.fmultiComponent,l=s.componentsObj.config;if(n){var d=n.value(),u=a.value();if(""==d)return s.ComFun.showTips(n,l.tipMsg.msg_noCheckInDate);if(""==u)return s.ComFun.showTips(a,l.tipMsg.msg_noCheckOutDate);if(!d.isDate())return s.ComFun.showTips(n,l.tipMsg.msg_errorDate);if(!u.isDate())return s.ComFun.showTips(a,l.tipMsg.msg_errorDate);if(d>=u&&2!=s.cur_fhTabsIndex)return s.ComFun.showTips(a,l.tipMsg.msg_checkOutDateEarlier);if(s.componentsObj.S.dateDiff(d,u,"d")>365)return s.ComFun.showTips(a,l.tipMsg.msg_dateOver365d);if(d&&d.toDate().addDays(1)r)return s.ComFun.showTips(i,l.tipMsg.msg_returnDateEarlier)}else if(o>=r)return s.ComFun.showTips(i,l.tipMsg.msg_returnDateEarlier);if(s.componentsObj.S.dateDiff(o,r,"d")>365)return s.ComFun.showTips(i,l.tipMsg.msg_dateOver365d);if(s.componentsObj.S.dateDiff(new Date,o,"d")>365)return s.ComFun.showTips(e,l.tipMsg.msg_departDateWithin365d)}return!0},checkDate_fltOther:function(e,i,n,a){var o=e.value(),r=i.value(),s=t.fmultiComponent,l=s.componentsObj.config;return""==o?s.ComFun.showTips(e,l.tipMsg.msg_noDepartDate):""==r?s.ComFun.showTips(i,l.tipMsg.msg_noReturnDate):o.isDate()?r.isDate()?o>r?s.ComFun.showTips(i,l.tipMsg.msg_returnDateEarlier):s.componentsObj.S.dateDiff(o,r,"d")>365?s.ComFun.showTips(i,l.tipMsg.msg_dateOver365d):s.componentsObj.S.dateDiff(new Date,o,"d")>365?s.ComFun.showTips(e,l.tipMsg.msg_departDateWithin365d):!0:s.ComFun.showTips(i,l.tipMsg.msg_errorDate):s.ComFun.showTips(e,l.tipMsg.msg_errorDate)},checkDate_htlOther:function(e,i,n,a){var o=(e.value(),i.value(),t.fmultiComponent),r=o.componentsObj.config;if(n){var s=n.value(),l=a.value();if(""==s)return o.ComFun.showTips(n,r.tipMsg.msg_noCheckInDate);if(""==l)return o.ComFun.showTips(a,r.tipMsg.msg_noCheckOutDate);if(!s.isDate())return o.ComFun.showTips(n,r.tipMsg.msg_errorDate);if(!l.isDate())return o.ComFun.showTips(a,r.tipMsg.msg_errorDate);if(s>=l&&2==!o.cur_fhTabsIndex)return o.ComFun.showTips(a,r.tipMsg.msg_checkOutDateEarlier);if(o.componentsObj.S.dateDiff(s,l,"d")>365)return o.ComFun.showTips(a,r.tipMsg.msg_dateOver365d)}return!0},checkDate_oneWay:function(e,i,n,a){var o=e.value(),r=i.value(),s=t.fmultiComponent,l=s.componentsObj.config;if(n){var d=n.value(),u=a.value();if(""==d)return s.ComFun.showTips(n,l.tipMsg.msg_noCheckInDate);if(""==u)return s.ComFun.showTips(a,l.tipMsg.msg_noCheckOutDate);if(!d.isDate())return s.ComFun.showTips(n,l.tipMsg.msg_errorDate);if(!u.isDate())return s.ComFun.showTips(a,l.tipMsg.msg_errorDate);if(d>=u)return s.ComFun.showTips(a,l.tipMsg.msg_checkOutDateEarlier);if(s.componentsObj.S.dateDiff(d,u,"d")>28)return s.ComFun.showTips(a,l.tipMsg.msg_dateOver28d)}else{if(""==o)return s.ComFun.showTips(e,l.tipMsg.msg_noDepartDate);if(""==r)return s.ComFun.showTips(i,l.tipMsg.msg_noReturnDate);if(!o.isDate())return s.ComFun.showTips(e,l.tipMsg.msg_errorDate);if(!r.isDate())return s.ComFun.showTips(i,l.tipMsg.msg_errorDate);if(o>=r)return s.ComFun.showTips(i,l.tipMsg.msg_returnDateEarlier);if(s.componentsObj.S.dateDiff(o,r,"d")>365)return s.ComFun.showTips(i,l.tipMsg.msg_dateOver365d);if(s.componentsObj.S.dateDiff(new Date,o,"d")>365)return s.ComFun.showTips(e,l.tipMsg.msg_departDateWithin365d)}return!0},checkDate_hotel_oneWay:function(e,i,n,a){var o=(e.value(),i.value(),t.fmultiComponent),r=o.componentsObj.config;if(n){var s=n.value(),l=a.value();if(""==s)return o.ComFun.showTips(n,r.tipMsg.msg_noCheckInDate);if(""==l)return o.ComFun.showTips(a,r.tipMsg.msg_noCheckOutDate);if(!s.isDate())return o.ComFun.showTips(n,r.tipMsg.msg_errorDate);if(!l.isDate())return o.ComFun.showTips(a,r.tipMsg.msg_errorDate);if(s>=l)return o.ComFun.showTips(a,r.tipMsg.msg_checkOutDateEarlier);if(o.componentsObj.S.dateDiff(s,l,"d")>28)return o.ComFun.showTips(a,r.tipMsg.msg_dateOver28d)}return!0},checkDate_flight_oneWay:function(e,i,n,a){var o=e.value(),r=(i.value(),t.fmultiComponent),s=r.componentsObj.config;return""==o?r.ComFun.showTips(e,s.tipMsg.msg_noDepartDate):o.isDate()?r.componentsObj.S.dateDiff(new Date,o,"d")>365?r.ComFun.showTips(e,s.tipMsg.msg_departDateWithin365d):!0:r.ComFun.showTips(e,s.tipMsg.msg_errorDate)},checkeDate_fltMulti:function(e,i,n){var a=e.value(),o=n&&n.value(),r=t.fmultiComponent,s=e&&e.parent().find(".js_flt_num").text(),l=n&&n.parent().find(".js_flt_num").text(),d=r.componentsObj.config;return""==a?r.ComFun.showTips(e,d.tipMsg.msg_noDepartDate):a.isDate()?o&&a>o?r.ComFun.showTips(n,"对不起，第"+l+" 段日期不能早于第 "+s+"程日期"):!0:r.ComFun.showTips(e,d.tipMsg.msg_errorDate)},checkeDate_hotelMulti:function(e,i){if(e){var n=(e.value(),i.value(),t.fmultiComponent),a=n.componentsObj.config;if(e){var o=e.value(),r=i.value();if(""==o)return n.ComFun.showTips(e,a.tipMsg.msg_noCheckInDate);if(""==r)return n.ComFun.showTips(i,a.tipMsg.msg_noCheckOutDate);if(!o.isDate())return n.ComFun.showTips(e,a.tipMsg.msg_errorDate);if(!r.isDate())return n.ComFun.showTips(i,a.tipMsg.msg_errorDate);if(o>=r)return n.ComFun.showTips(i,a.tipMsg.msg_checkOutDateEarlier);if(n.componentsObj.S.dateDiff(o,r,"d")>28)return n.ComFun.showTips(i,a.tipMsg.msg_dateOver28d)}return!0}},validateForSubmit:function(e,i){this.fmultiComponent=i,i.H=i.HotelComponent,i.F=i.FlightComponent;var n=i.fltTextBoxs,S=i.componentsObj.S,a=function(t){var e=$(S.parent(t,".js_fltItem")),i={fltFromId:"",fltToId:""};return i.fltFromId=e.find("input[name=fltFromCities]").value(),i.fltToId=e.find("input[name=fltToCities]").value(),i},o=function(){var e=a(n[0]),o=!1;if(1==i.cur_fhTabsIndex){if(o=1==i.isOneway?t.checkAddress(n[0],n[1],e.fltFromId,e.fltToId)&&t.checkDate_flight_oneWay(n[2],n[3]):t.checkAddress(n[0],n[1],e.fltFromId,e.fltToId)&&t.checkDate_fltOther(n[2],n[3]),!o)return!1}else if(2!=i.cur_fhTabsIndex){var r=!1;if(r=1==i.isOneway?t.checkAddress(n[0],n[1],e.fltFromId,e.fltToId)&&t.checkDate_flight_oneWay(n[2],n[3]):t.checkAddress(n[0],n[1],e.fltFromId,e.fltToId)&&t.checkDate(n[2],n[3]),!r)return!1}for(var s=i.textboxes,l=n[2],d=n[3],u=0;u=r+4+2&&4>o?n[r+4+2]:null,d=t.checkAddress_Multi(n[r],n[r+1],s.fltFromId,s.fltToId)&&t.checkeDate_fltMulti(n[r+2],n[r+3],l);if(!d)return!1;o++}if(1!=i.cur_fhTabsIndex)for(var u=i.textboxes,c=0;c0){var n=i.FlightBlackList.filter(function(i){return i.FromCityId==t&&i.DestCityId==e});return n.length>0?!1:!0}return!0}};return t});; "use strict";define("webresource/component/dpSearchEntryCtripIndex/dpSearchEntryDiffs.FMultiCIComponent.js", [], function(require,exports,module){var t=require("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCINewVersion.js"),e={gg:{__globlObj:{},S:{},config:{},Model:{},Mod:{},flightComponent:{},hotelComponent:{}},defaultInitObj:{init:function(t){e.gg.__globlObj=t,e.gg.S=t.componentsObj.S,e.gg.config=t.componentsObj.config,e.gg.Model=t.componentsObj.Model,e.gg.Mod=t.componentsObj.Mod,e.gg.flightComponent=t.componentsObj.flightComponent,e.gg.hotelComponent=t.componentsObj.hotelComponent}},ctripIndexSearchObject:{init:function(){var i=e,n=i.gg.__globlObj,a=this,o=$("#cIndex_tabsBox");o&&o.length>0&&o.removeClass("hidden"),a._CreateDPEntryHtml(),a.tabs_Opt(),t.bindEvent(),n.componentsObj.DpInt.bindExchangePlaceEvent(n),e.defaultBoxHight=$("#searchBox").height()},_CreateDPEntryHtml:function(){var i=e,n=(i.gg.__globlObj,i.gg.config);i.gg.S;t.appendFHXTabHtml();var a=n.html.ctripIndex_template;$("#FHX_form").html($.tmpl.render(a,{}))},tabs_Opt:function(){var t=this;$("#cIndex_tabsBox").find("input[name=flightway]")[0].checked=!0,t.tabs_box=$("#cIndex_tabsBox"),t.tab_items=t.tabs_box.find("input[name=flightway]"),t.$ToDateInput=$("#FHX_txtToDate"),t.tab_items.bind("click",t._operationF.bind(this)),t._public_opt(t.tab_items)},_public_opt:function(t){var i=e,n=i.gg.__globlObj;t&&t.length>=1&&t.eq(0).hasClass("choose")&&(n.isOneway=0),t&&t.length>=2&&t.eq(1).hasClass("choose")&&(n.isOneway=1),t&&t.length>2&&t.eq(2).hasClass("choose")&&(n.isOneway=2)},_operationF:function(t){var i=e,n=i.ctripIndexSearchObject,a=i.gg.__globlObj,Mod=(i.gg.flightComponent,i.gg.hotelComponent,i.gg.Mod);a.oneway_or_goback_clicked=1,a.isChange_oneOrback=1;var o=(a.fltTextBoxs[0],a.fltTextBoxs[1]),r=a.fltTextBoxs[3],s=$("#FHX_container").find(".js_exchange");a.oneway_or_goback_clicked=1,a.isChange_oneOrback=1,t.target&&$(t.target).hasClass("choose")||(this.tab_items.removeClass("choose"),$(t.target).addClass("choose"),$(t.target).hasClass("radioway")?(a.isOneway=1,r.attr("disabled",!0),a.ComFun.TraceLog.LogUB_click_tab_forCtripIndex("single"),o.attr("placeholder","中文/拼音/英文"),s.removeClass("icon-exchange"),s.addClass("icon-exchangein"),n.closeMultiView(),n.multiViewClear(),n.clearHotelDateWeek()):$(t.target).hasClass("fmultiway")?(a.isOneway=2,a.ComFun.TraceLog.LogUB_click_tab_forCtripIndex("single"),o.attr("placeholder","中文/拼音/英文"),s.removeClass("icon-exchange"),s.addClass("icon-exchangein"),n.openMultiView(),n.multiViewClear(),a.componentsObj.DpInt.multiSecondaryAutoChange(a)):(a.isOneway=0,r.removeAttr("disabled"),r.attr("name","FHX_txtToDate"),a.ComFun.TraceLog.LogUB_click_tab_forCtripIndex("round"),o.attr("placeholder","中文/拼音/英文"),s.removeClass("icon-exchangein"),s.addClass("icon-exchange"),n.closeMultiView(),n.multiViewClear(),a.componentsObj.DpInt.validateHotelTime(a),n.clearHotelDateWeek()),this.tabChange("txtFrom","from"),Mod.Placeholder.enable($("#FHX_form")))},clearHotelDateWeek:function(){var t=$("#FHX_divHotelQuery"),e=t.find("input[name=CheckInDate]"),i=t.find("input[name=CheckOutDate]");e&&e.attr("style",""),i&&i.attr("style","")},tabChange:function(t,i){var n=e,a=n.gg.__globlObj,o=(n.gg.flightComponent,n.gg.hotelComponent);a.ComFun.UpdateConfigAjaxUrl(),o.update_minAndmax_dateF(),2!=a.isOneway&&o.clear_hotelCheckinput(),1!=a.cur_fhTabsIndex&&o.setAddHotelBtnState(),a.hotelCityChanged=!1},openMultiView:function(t){var i=e.ctripIndexSearchObject,n=$("#divFlightQuery").find(".js_fltItem");n.length<4&&$("#FHX_form").find("#lnkAddFlight").removeClass("hidden"),$("#FHX_form").find(".js_flt_num").removeClass("hidden"),$("#FHX_form").find(".js_fltToDate").addClass("hidden"),$("#divFlightQuery").find(".js_fltItem").each(function(t,e){t.hasClass("hidden")&&t.removeClass("hidden"),t.find("input[type=text]").each(function(t,e){$(t).attr("class","").addClass($(t).attr("multi-class")),"FromTime"==$(t).attr("name")&&$(t).addClass("w71")})}),$("#FHX_divHotelQuery").find("input[type=text]").each(function(t,e){$(t).attr("class",$(t).attr("multi-class"))}),t||(i.setBoxClass(!0),i.setMultiViewDefaultHeight())},setMultiViewDefaultHeight:function(){var t=360,e=$("#divFlightQuery").find(".js_fltItem"),i=e.length,n=$(e[0]).height(),a=(i-2)*n,o=$("#FHX_divHotelQuery").find(".js_hotelItem"),r=o.length,s=($(o[0]).height(),(r-1)*n),l=$("#FHX_lnkAddHotel"),d=0;d=l.hasClass("hidden")?-l.height():0;var u=$("#lnkAddFlight"),c=0;if(c=u.hasClass("hidden")?-u.height():0,2==i&&1==r)$("#searchBox").css("height",t+"px"),$("#searchBoxUl").css("height",t+"px"),$("#FHX_container").css("height",t-26+"px");else{var h=t+a+s+d;$("#searchBox").css("height",h+"px"),$("#searchBoxUl").css("height",h+"px"),$("#FHX_container").css("height",h-26+"px")}},setBoxClass:function(t){t?(!$("#FHX_container").hasClass("s_content_free_shuttle")&&$("#FHX_container").addClass("s_content_free_shuttle"),!$("#lnkAddFlight").hasClass("s_add_voyage_block")&&$("#lnkAddFlight").addClass("s_add_voyage_block"),!$("#FHX_lnkAddHotel").hasClass("s_add_voyage_block")&&$("#FHX_lnkAddHotel").addClass("s_add_voyage_block")):($("#FHX_container").hasClass("s_content_free_shuttle")&&$("#FHX_container").removeClass("s_content_free_shuttle"),$("#lnkAddFlight").hasClass("s_add_voyage_block")&&$("#lnkAddFlight").removeClass("s_add_voyage_block"),$("#FHX_lnkAddHotel").hasClass("s_add_voyage_block")&&$("#FHX_lnkAddHotel").removeClass("s_add_voyage_block"))},closeMultiView:function(t){var i=e.ctripIndexSearchObject;$("#FHX_form").find(".js_fltToDate").removeClass("hidden"),$("#FHX_form").find("#lnkAddFlight").addClass("hidden"),$("#FHX_form").find(".js_flt_num").addClass("hidden"),$("#FHX_form").find(".js_fltItem").each(function(t,e){0==e||t.hasClass("hidden")?t.find("input[type=text]").each(function(t,e){$(t).attr("class",$(t).attr("default-class"))}):t.addClass("hidden"),t.find("input[name=FromTime]").each(function(t,e){$(t).removeClass("w71")})}),$("#FHX_divHotelQuery").find("input[type=text]").each(function(t,e){$(t).attr("class",$(t).attr("default-class"))}),t||(i.setNoMultiViewDefaultHeight(),i.setBoxClass(!1))},setNoMultiViewDefaultHeight:function(){var t=e.defaultBoxHight,i=$("#divFlightQuery").find(".js_fltItem"),n=i.length,a=($(i[0]).height(),0),o=$("#FHX_divHotelQuery").find(".js_hotelItem"),r=o.length,s=$(o[0]).height(),l=(r-1)*s,d=$("#FHX_lnkAddHotel"),u=0;if(u=d.hasClass("hidden")?-d.height():0,2==n&&1==r)$("#searchBox").css("height",t+"px"),$("#searchBoxUl").css("height",t+"px"),$("#FHX_container").css("height",t-26+"px");else{var c=t+a+l+u;$("#searchBox").css("height",c+"px"),$("#searchBoxUl").css("height",c+"px"),$("#FHX_container").css("height",c-26+"px")}},setNoMultiViewDefaultHeight2:function(){$("#searchBox").css("height","300px"),$("#searchBoxUl").css("height","300px"),$("#FHX_container").css("height","275px")},multiViewClear:function(){var t=e,i=(t.gg.__globlObj,t.gg.flightComponent);t.gg.hotelComponent;i.multiClear()}}};return e});; "use strict";define("webresource/component/dpSearchEntryCtripIndex/dpSearchTraceLog.FMultiCIComponent.js", [], function(require,exports,module){var t=require("webresource/trace/ubt.trace.js"),e={LogUB:function(e,i){if(i.sourceName.isDpConfirm)return void i.ComFun.TraceLog.logUB_dpConfirm(e);var n={};n.UID="${duid}";var a=$("#divFlightQuery").find("input[name=fltFromCities]"),o=($("#divFlightQuery").find("input[name=txtTo]"),$("#divFlightQuery").find("input[name=fltToCities]")),r=$("#divFlightQuery").find("input[name=txtFromDate]"),s=$("#divFlightQuery").find("input[name=txtToDate]");n.pageid=$("#page_id").value(),n.dcityid=$("#hFromID").value()||(a.length>0?a.eq(0).value():""),n.flight=($("#hToID").value()||(o.length>0?o.eq(0).value():""))+","+($("#txtFromDate").value()||(r.length>0?r.eq(0).value():""))+","+($("#txtToDate").value()||(s.length>0?s.eq(0).value():""));var l=[],d=$('input[name="CheckInDate"]'),u=$('input[name="CheckOutDate"]');$("input[name=ToCities]").each(function(t,e){l.push(t.value()+","+d[e].value+","+u[e].value)}),n.hotels=l.join("|"),n.aducount=$("#AdultSelect").value(),n.chdcount=$("#ChildrenSelect").value(),n.url=document.referrer,n.error=$("#ErrorMessage").value(),n.correlationid=$("#CorrelationId").value();var c="";i.sourceName.isSdpIndex&&"confirmNoResult"!=i.entryMark?c="frt.portal.diy.index.search":i.sourceName.isSdpList?c="frt.portal.freetravel.searchdp":-1===$("#lnkSearch").text().indexOf("搜索中")&&(c="frt.portal.diy.round.noresult"),t.traceNew(c,n,e)},LogUB_click_tab:function(e){var i=$("#divFlightQuery").find("input[name=fltFromCities]"),n=($("#divFlightQuery").find("input[name=txtTo]"),$("#divFlightQuery").find("input[name=fltToCities]")),a=$("#divFlightQuery").find("input[name=txtFromDate]"),o=$("#divFlightQuery").find("input[name=txtToDate]"),r={};r.UID="${duid}",r.pageid=$("#page_id").value(),r.dcity=$("#hFromID").value()||(i.length>0?i.eq(0).value():""),r.acity=$("#hToID").value()||(n.length>0?n.eq(0).value():""),r.ddate=$("#txtFromDate").value()||(a.length>0?a.eq(0).value():""),r.adate=$("#txtToDate").value()||(o.length>0?o.eq(0).value():"");var s="";"round"==e?s="frt.dp.index.round":"single"==e&&(s="frt.dp.index.single"),t.traceNew(s,r)},LogUB_click_tab_forCtripIndex:function(e){var i={};i.UID="${duid}";var n=$("#divFlightQuery").find("input[name=fltFromCities]"),a=($("#divFlightQuery").find("input[name=txtTo]"),$("#divFlightQuery").find("input[name=fltToCities]")),o=$("#divFlightQuery").find("input[name=txtFromDate]"),r=$("#divFlightQuery").find("input[name=txtToDate]");i.pageid=$("#page_id").value(),i.dcity=$("#FHX_hFromID").value()||(n.length>0?n.eq(0).value():""),i.acity=$("#FHX_hToID").value()||(a.length>0?a.eq(0).value():""),i.ddate=$("#FHX_txtFromDate").value()||(o.length>0?o.eq(0).value():""),i.adate=$("#FHX_txtToDate").value()||(r.length>0?r.eq(0).value():"");var s="";"round"==e?s="frt.dp.index.round":"single"==e&&(s="frt.dp.index.single"),t.traceNew(s,i)},LogUB_click_gift:function(){var e="frt.dp.index.gift",i={};i.UID="${duid}",i.pageid=$("#page_id").value(),t.traceNew(e,i)},LogUB_click_Submit:function(e){var i="diy_dtl_recgroup_online",n={},a=(window.location.href,$("#divFlightQuery").find("input[name=fltFromCities]")),o=($("#divFlightQuery").find("input[name=txtTo]"),$("#divFlightQuery").find("input[name=fltToCities]")),r=$("#divFlightQuery").find("input[name=txtFromDate]"),s=$("#divFlightQuery").find("input[name=txtToDate]");n.UID="${duid}",n.stcityid=$("#hFromID").value()||(a.length>0?a.eq(0).value():""),n.dtcityid=$("#hToID").value()||(o.length>0?o.eq(0).value():""),n.sdate=$("#txtFromDate").value()||(r.length>0?r.eq(0).value():""),n.rdate=$("#txtToDate").value()||(s.length>0?s.eq(0).value():""),n.type1=1==e.isOneway||e.isOneway?2:1,n.type2=$("#GroupType").value(),n.change=e.isChange_oneOrback,t.traceNew(i,n)},LogUB_ABTrack:function(e,i){var n="c_vac_ctrip_home_dp_tab_click",a={};a.expid=i,a.abversion=e,t.traceNew(n,a)},logUB_dpConfirmLoad:function(e,i){var n=$("#divFlightQuery").find("input[name=fltFromCities]"),a=$("#divFlightQuery").find("input[name=fltToCities]"),o=$("#divFlightQuery").find("input[name=txtFromDate]"),r=$("#divFlightQuery").find("input[name=txtToDate]"),s=$("#hFromID").value()||(n.length>0?n.eq(0).value():""),l=$("#hToID").value()||(a.length>0?a.eq(0).value():""),d="confirmNoResult"==e.entryMark,u=$("ul.search_list li"),c={};d&&(c.rcmd_yn=u.length>0?1:0),c.stcity=s,c.dcity=l,c.stdate=$("#txtFromDate").value()||(o.length>0?o.eq(0).value():""),c.ddate=$("#txtToDate").value()||(r.length>0?r.eq(0).value():"");var h=[];$("input[name=ToCities]").each(function(t,e){h.push(t.value())}),c.htlcity=h&&h.length>0?h.join(","):"",c.adult=$("#AdultSelect").value(),c.child=$("#ChildrenSelect").value(),d&&!function(){var t=[];t.push(u.length),u.each(function(e,i){t.push(e.attr("data-id").split("_")[0])}),c.pkg=t&&t.length>0?t.join(","):""}();var f=d?"diy_dpsrchnorslt_load_online":"diy_dpsrchrslt_load_online";t.traceNew(f,c,i)},logUB_searchClick_multi:function(i){var n="frt.dp.index.search",a={},o=e;a.tabname=o.getTabName(),a.adult=$("#AdultSelect").value(),a.child=$("#ChildrenSelect").value(),a.bady="",a.subtabtype="",a.subtabname=o.getSubTabName(i),a.fltseqs=o.getFlightData(i),a.htlseqs=o.getHotelData(i),a.cityid="",t.traceNew(n,a,callback)},getTabName:function(){var t="";return $("#FHTabsBox").find("li").each(function(e,i){e.hasClass(cur)&&(t=e.text)}),t},getSubTabName:function(t){var e="";return $("#subTabBox").find("span").each(function(t,i){t.hasClass(cur)&&(e=t.text)}),e},getFlightData:function(t){var e={};$("#divFlightQuery").find(".js_fltItem").each(function(i,n){e["fltseq"+(n+1)]={fltdcity:i.find("input[name=txtFrom]").value(),fltacity:i.find("input[name=toFrom]").value(),fltdeparturedate:i.find("input[name=txtFromDate]").value(),fltreturndate:0!=t.isOneway?i.find("input[name=txtToDate]").value():""}})},getHotelData:function(t){var e={};$("#divHotelQuery").find(".js_hotelItem").each(function(t,i){e["htlseq"+(i+1)]={htlcity:t.find("input[type=text]").eq(0).value(),htlcheckin:t.find("input[name=CheckInDate]").value(),htlcheckout:t.find("input[name=CheckOutDate]").value()}})}};return e});; "use strict";define("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCICommon.js", [], function(require,exports,module){var t={sourceIndex:null,isDP:window.location.href.indexOf("confirm")>=0,isSDP:window.FRTPage&&window.FRTPage.DATA&&(!!window.FRTPage.DATA.ProductId||0!==window.FRTPage.DATA.ProductId),isDPorSDP:window.location.href.indexOf("confirm")>=0||window.FRTPage&&window.FRTPage.DATA&&(!!window.FRTPage.DATA.ProductId||0!==window.FRTPage.DATA.ProductId)};module.exports=t});; define("webresource/component/dpSearchEntryCtripIndex/dpSearcheEntry.FMultiCIDpInt.js", [], function(require,exports,module){var t=require("webresource/widget/common/common.js"),e=require("webresource/widget/dpint/prompt_hongkong"),i=function(t,e){var i=(t.getTime(),e.getTime(),Math.round((e-t)/864e5));return i},n={state:{tab1:1,tab2:1},tabStore:{flights:[{city:{from:null,to:null},time:{from:null,to:null}}],hotels:[{city:null,time:null}]},prompt:e,showPrompt:function(t,e){this.prompt.$txt=e;var i=this.prompt.getShowState(t);i?this.prompt.show():this.prompt.hide(),i&&this.prompt.bind()},initializePrompt:function(t,e){var i=this.prompt.getShowState(t);i?this.prompt.show():this.prompt.hide(),i&&this.prompt.bindFreeTravelIndex(e)},showPromptByData:function(t){var e=t.FlightComponent,i=t.data,n=t.$txt,a=this,o=function(t){for(var i=e._global.fltTextBoxs,n=0,a=i.length;a>n;n++){var o=i[n];if(o[0].name===t)return o}},r=o("txtFrom"),s=o("txtTo"),l=r&&r[0]._uid_,d=s&&s[0]._uid_,u=/txtFrom/.test(n.attr("name")),c=u&&n[0]._uid_===l;if(u&&c){var h="number"==typeof i.value,f=h?i.items[1]:i.value,p=f.match(",")?f.replace(/,.+/,""):f;a.showPrompt(p,n)}var m=/txtTo/.test(n.attr("name")),g=m&&n[0]._uid_===d,_=void 0;u&&(_=n.next('input[name|="txtTo"]').value()),m&&(_=n.value()),(g||c)&&"香港"===_&&a.prompt.hide()},switchClickFn:null,bindExchangePlaceEvent:function(e){var i=null,n=(1===t.sourceIndex,2===t.sourceIndex,5===t.sourceIndex,t.isDP,e.sourceName.isCtripIndex),a=this;n&&(i=$("#divFlightQuery .js_exchange")),this.switchClickFn=this.switchClickFn||function(t){var i=function(t,e){for(var i=void 0,n=0,a=t.length;a>n;n++){var o=t[n];e===o[0]._uid_&&(i=o)}return i},o=e.FlightComponent._global.fltTextBoxs;e.hotelCityChanged=!1;var r=null,s=null;if(n){var l=cQuery(t.target);r=l.prev(),s=l.next('[name|="ToCityName"]')}var d=r[0]._uid_,u=s[0]._uid_,c=i(o,d),h=i(o,u),f=r.value(),p=s.value(),m=c.next('[name|="fltFromCities"]').value(),g=c.next('[name|="fltFromCitypy"]').value(),_=c.next('[name|="fltFromCitynm"]').value(),v=h.next('[name|="fltToCities"]').value(),y=h.next('[name|="fltToCitypy"]').value(),C=h.next('[name|="fltToCitynm"]').value(),x=/夏威夷/.test(f),F=/夏威夷/.test(p);if(x||F){if(r.value(p),c.next('[name|="fltFromCities"]').value(v),s.value(f),h.next('[name|="fltToCities"]').value(m),x||(s.value(f),h.idealData={name:f,id:m,py:g,nm:_,idInput:h.next('[name|="fltToCities"]')},h.shouldJudge=!0,h.address.method("validate",!1)),F||(r.value(p),c.idealData={name:p,id:v,py:y,nm:C,idInput:c.next('[name|="fltFromCities"]')},c.shouldJudge=!0,c.address.method("validate",!1)),F&&a.prompt.hide(),x){var b=cQuery("#FHX_divHotelQuery").find("input").eq(0);b.value("")}}else r.value(p),c.idealData={name:p,id:v,py:y,nm:C,idInput:c.next('[name|="fltFromCities"]')},c.shouldJudge=!0,c.address.method("validate",!1),s.value(f),h.idealData={name:f,id:m,py:g,nm:_,idInput:h.next('[name|="fltToCities"]')},h.shouldJudge=!0,h.address.method("validate",!1)},i.unbind("click",this.switchClickFn),i.bind("click",this.switchClickFn)},validateHotelTime:function(t){var e=t.FlightComponent._global.fltTextBoxs,n=t.HotelComponent._globle.sourceName.isCtripIndex?"#FHX_divHotelQuery":"#divHotelQuery",a=$(n+" input[name=CheckInDate]"),o=$(n+" input[name=CheckOutDate]"),r=e[2].value(),s=e[3].value(),l=r?new Date(r):null,d=s?new Date(s):null;a.each(function(t,e){var n=a.eq(e),r=o.eq(e),s=n.value(),u=r.value(),c=s?new Date(s):null,h=u?new Date(u):null,f=!1;if(c){if(l&&c){var p=i(l,c);f=-1>p||f}if(d&&c){var m=i(d,c);f=m>0||f}}f&&(n.value(""),r.value(""));var g=!1;if(h){if(c&&h){var _=i(c,h);g=0>_||g}if(d&&h){var v=i(c,h);g=v>28||g}if(l&&h){var y=i(d,h);g=y>1||g}g&&r.value("")}})},multiSecondaryAutoChange:function(t){var e=t.FlightComponent._global.fltTextBoxs,i=e[1],n=e[4],a=i.value(),o=i.next('[name|="fltToCities"]').value(),r=""===n.value();r&&(n.value(a),n.next('[name|="fltFromCities"]').value(o))},updateDpCss:function(t){var e=this.state,i=e.tab1,n=e.tab2,a=[],o=function(t){return 1===t.prev("[name|=txtFrom]").length};cQuery(".fuhao").each(function(t){var e=o(t);e&&a.push(t)}),cQuery(".fuhao_go").each(function(t){var e=o(t);e&&a.push(t)}),cQuery(".fuhao_wangfan").each(function(t){var e=o(t);e&&a.push(t)}),cQuery(".fuhao_change").each(function(t){var e=o(t);e&&a.push(t)});var r=function(){a[0].removeClass("fuhao").removeClass("fuhao_go").removeClass("fuhao_change").removeClass("fuhao_change").addClass("fuhao_wangfan")},s=function(){for(var t=0,e=a.length;e>t;t++){var i=a[t];i.removeClass("fuhao").removeClass("fuhao_go").removeClass("fuhao_wangfan").removeClass("fuhao_change").addClass("fuhao_change")}};1===i&&(1===n&&r(),2===n&&s(),3===n&&s()),2===i&&(1===n&&r(),2===n&&s(),3===n&&s())}};module.exports=n});; define("tools/eventdispatcher.js", [], function(require,exports,module){var t=function(t){if(t.ctx){var e={selector:"a",event:"click",level:2};t=t?$.extend(e,t):e;var i=this;t.event.split(" ").each(function(e,n){t.ctx.bind(e,i.dispatchEvent.bind(i,t))}),this._params=[]}};t.prototype.dispatchEvent=function(t,e){var i=e.target;if(i=this.matchNode(i,t)){var n=this.matchFunc(i,t.cmds)||t.func;n&&(this._params.push(e),n.apply(i,this._params),"A"==e.target.nodeName&&e.preventDefault())}},t.prototype.getParams=function(t){var e=t.getAttribute("data-params"),i=t.getAttribute("data_filter")?t.getAttribute("data_filter"):"";return e=e?$.parseJSON("["+e+"]"):[],e.push(t),e.push(i),e},t.prototype.matchNode=function(t,e){var i=this,n=t,a=0;for(e.level="number"==typeof e.level&&e.level>0?e.level:0;a++<=e.level;){if(Sizzle.matchesSelector(n,e.selector))return i._params=i.getParams(n),n;n=n.parentNode}return null},t.prototype.matchFunc=function(t,e){if(e)for(var i=0,n=e.length;n>i;i++)if(this.matchNode(t,e[i]))return e[i].func},t.prototype.hideDropSon=function(){this.ctx.find()},module.exports=t});; define("tools/eventemitter.js", [], function(require,exports,module){var t=function(){this._events={}};t.prototype={constructor:t,on:function(t,e){return t in this._events||(this._events[t]=[]),this._events[t].push(e),this},off:function(t,e){var i=this._events[t];if(i){for(var n=0,a=i.length;a>n;n++)if(i[n]==e)return void i.splice(n,1);return this}},emit:function(t){if(this._events[t]){var e=this._events[t],i=Array.prototype.slice.apply(arguments);i=i.slice(1);for(var n=0,a=e.length;a>n;n++)e[n].apply(this,i);return this}}},t.extend=function(e){var i=new t;for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n]);var a=e.prototype||e;for(var n in t.prototype)"constructor"!==n&&(a[n]=i[n])},module.exports=t});; define("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCIConfig.js", [], function(require,exports,module){var t={url:{airportAndHotelCityMapping:"/Portal/AirportAndHotelCityMapping",flightAndHotelCiytMapping:"//apigateway.ctripcorp.com/restapi/soa2/12446/GetFHXDPCity",getDpFlightBlackList:"/Portal/GetDpFlightBlackList",getFlightToCityByKeyword:"/tour-mainsite-vacations/api/FRT/SearchFlightPoi?keyword=${key}",getHotelCityByKeyword:"/tour-mainsite-vacations/api/FRT/SearchHotelCity?keyword=${key}",GetDpABTestResult:"/Portal/GetDpABTestResult",giftDataAjax:"/Portal/GetPackagePresent?",flightAddressJsonpSource:["//webresource.ctrip.com/ResPackageOnline/R3/data/cities_from_"+cQuery.config("charset")+".js","//webresource.ctrip.com/ResPackageOnline/R3/data/cities_to_"+cQuery.config("charset")+".js?v="+(new Date).toStdDateString()],hotelAddressJsonpSource:"//webresource.ctrip.com/ResPackageOnline/R3/data/cities_checkin_"+cQuery.config("charset")+".js?v="+(new Date).toStdDateString(),getFlightFromCityByKey:["//taocan.ctrip.com/freetravel/CityMapping/AjaxCityAdress?key=${key}&a=1&t="+("big5"==$.config("charset")?"1":"0"),"//taocan.ctrip.com/freetravel/CityMapping/AjaxCityAdress?key=${key}&a=1&t="+("big5"==$.config("charset")?"1":"0")],SHOW_CALENDAR:"//vacations.ctrip.com/DIY/Ajax/IsShowPriceCalendar.ashx",PRICE_BOARD:"//vacations.ctrip.com/DIY/PriceBoard.aspx"},html:{flightSameCityTipHtml:'$1 ',flightInBlackTipHtml:'$1 -- $2 ',hotelTemplate_for_ABTest:'



        ',gift_DetailHtml:'礼盒详情
        礼盒1：10元当地玩乐优惠券
        预订国内、海外自由行可享

        优惠券可用于抵扣部分【当地玩乐】频道预付类玩乐产品，如一日游、特色体验、旅行WiFi、交通接驳、当地美食等。订单满100元，每单可立减10元。

使用规则：

1. 玩乐10元优惠券，可用于抵扣携程预付类玩乐产品。 （仅适用于消费部分预付类玩乐产品满100元时使用，每单可立减10元）

2. 有效期内每张优惠券仅限使用一次，不得与其他优惠同享。

3. 如发现恶意盗刷优惠券等行为，携程有权收回该行为涉及的优惠券，并取消所购玩乐产品。

礼盒2：10元国内专车券 / 30元国际接送机券
        10元国内专车券
        预订国内自由行可享

        凭此优惠券在携程用车频道预订国内接送机、随叫随到专车、日租包车（含日租不含半日租）所有产品，均能享受10元优惠，每张优惠券限用一次，有效期自领券日起90天内预订使用。

30元国际接送机券
        预订国际自由行可享

        凭此优惠券在携程用车频道预订国际接送机产品，均能享受30元优惠，每张优惠券限用一次，有效期自领券日起90天内预订使用。
',gifDetail:'
        礼盒详情￥${Price}礼包
        {{each XItemInfoList}}  ${Name} 免费

        原价: ￥${Price}
        ${DefaultCount}
        {{/each}}
        ',ctripIndex_template:'
        人数  1成人 2成人 3成人 4成人 5成人 6成人 7成人 8成人 9成人  0儿童(2-12岁) 1儿童(2-12岁) 2儿童(2-12岁) 3儿童(2-12岁) 4儿童(2-12岁) 5儿童(2-12岁) 6儿童(2-12岁)
        带婴儿

        航程类型 往返   单程   多程

        1
        机票
        2
        机票
        添加航程
        酒店
        1

        添加酒店(支持不同城市)

        自由行,你的旅行你做主
        1、最少1人起订
        2、成人+儿童最多支持9人
        3、儿童入住需要遵循酒店入住政策
        4、订单提交后，客服会与您联系, 确认婴儿出行信息与价格。 ',ctripIndex_FHX_TabTitle_template:' 机票+酒店 机票+X 酒店+X ',ctripIndex_template:'
        人数  1成人 2成人 3成人 4成人 5成人 6成人 7成人 8成人 9成人  0儿童(2-12岁) 1儿童(2-12岁) 2儿童(2-12岁) 3儿童(2-12岁) 4儿童(2-12岁) 5儿童(2-12岁) 6儿童(2-12岁)
        带婴儿

        航程类型 往返   单程   多程

        1
        机票
        2
        机票
        添加航程
        酒店
        1

        添加酒店(支持不同城市)

        自由行,你的旅行你做主
        1、最少1人起订
        2、成人+儿童最多支持9人
        3、儿童入住需要遵循酒店入住政策
        4、订单提交后，客服会与您联系, 确认婴儿出行信息与价格。
',ctripIndex_flt_template:'
        ${index}
        机票
        ',ctripIndex_htl_template:'
        酒店
        ${index}

        ',address:{suggestion:'
        {{if cQuery.browser.isIPad}}×
显示键盘
        {{else}}
        支持中文/拼音/简拼输入

        {{/if}}{{tmpl FHX_cityHistories_$$ }}{{enum(key,arr) data}}
        ${key}城市
        {{each arr}}${display}{{/each}}
        {{/enum}}
        ',suggestionStyle:'.city_select_lhsl{width:408px;padding:10px;border:1px solid #999;background-color:#fff}.city_select_lhsl .close{float:right;width:20px;height:20px;color:#666;text-align:center;font:bold 16px/20px Simsun}.city_select_lhsl .close:hover{text-decoration:none;color:#ffa800}.city_select_lhsl .title{margin-bottom:10px;color:#999}.city_select_lhsl .tab_box{width:100%;height:22px;margin-bottom:6px;margin-top:0;border-bottom:2px solid #ccc}.city_select_lhsl .tab_box li{position:relative;float:left;display:inline;margin-right:2px;line-height:22px;cursor:pointer}.city_select_lhsl .tab_box li b{display:none}.city_select_lhsl .tab_box li span{padding:0 8px}.city_select_lhsl .tab_box .hot_selected{border-bottom:2px solid #06c;margin-bottom:-2px;font-weight:bold;color:#06c}.city_select_lhsl .tab_box .hot_selected b{position:absolute;top:23px;left:50%;display:block;width:0;height:0;margin-left:-5px;overflow:hidden;font-size:0;line-height:0;border-color:#06c transparent transparent transparent;border-style:solid dashed dashed dashed;border-width:5px}.city_select_lhsl .city_item,.city_select_lhsl .search_history_box,.business_place .business_box{display:inline-block;*zoom:1;overflow:hidden}.city_select_lhsl .city_item{width:408px}.city_select_lhsl .city_item a,.city_select_lhsl .search_history_box a,.business_place .business_box a{float:left;display:inline;width:60px;height:24px;margin:0 0 2px 0;padding-left:8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;line-height:22px;color:#333}.city_select_lhsl .city_item a:hover,.city_select_lhsl .search_history_box a:hover,.business_place .business_box a:hover{background-color:#2577e3;text-decoration:none;color:#fff}.city_item .city_item_in{width:378px;padding-left:30px;*zoom:1}.city_item .city_item_in:after,.city_select_lhsl .search_history_box:after{display:block;height:0;visibility:hidden;overflow:hidden;content:".";clear:both}.city_item .city_item_letter{float:left;width:30px;height:22px;margin-left:-30px;line-height:22px;text-align:center;color:#e56700}.city_select_lhsl .sarch_history_title,.city_select_lhsl .hot_airport_title,.business_place .business_title{margin-bottom:2px;font-weight:bold;color:#333}.city_select_lhsl .search_history_box{margin-bottom:6px}.international_city_select_lhsl .city_item a{width:92px}.airport_suggesstion_pop .airport_item{margin:0 -10px 0 -10px}.airport_item{padding-bottom:5px;padding-top:5px;position:relative;*zoom:1}.airport_item a{display:block;overflow:hidden;padding:0 7px 0 10px;color:#333;line-height:24px;cursor:pointer;*zoom:1}.airport_item a em{font-style:normal;color:#999}.airport_item a b{color:#06c}.airport_item a:hover,.airport_item a:hover em,.airport_item a:hover b,.airport_item a:hover .search_suggest{background-color:#2577e3;color:#fff;text-decoration:none}.search_suggest{color:#06c;font-weight:bold}.sug_item a:hover .search_suggest{color:#fff}.keyword_city{margin:0 -10px -10px;padding:0 10px;line-height:24px;border:1px solid #CCC;border-width:1px 0;background-color:#f3f3f3;color:#000;font-weight:bold}.keyword_city a{line-height:24px;height:24px;color:#4d4d4d;display:block;position:relative}.keyword_city a:hover{text-decoration:none}.keyword_city a .arrowUp,.keyword_city a .arrowDown{position:absolute;display:inline-block;width:9px;height:5px;float:right;right:0;top:9px;background:url(//pic.c-ctrip.com/index/ico_search_box_2.png) no-repeat}.keyword_city a .arrowUp{background-position:0 -809px}.keyword_city a .arrowDown{background-position:0 -784px}.keyword_city_list{margin-top:15px}.city_select_lhsl .close_pad{position:absolute;top:25px;right:10px}.ico_key{border-color:#f0f0f0 #cfcfcf #707070;box-shadow:0 1px 0 #cfcfcf,1px 0 0 0 #f0f0f0 inset,-1px 0 0 0 #f0f0f0 inset,0 -1px 0 0 #f0f0f0 inset}.ico_key,.ico_unkey{width:92px;height:43px;margin-left:-20px;padding-left:65px;background:url(//pic.c-ctrip.com/ctripOnPad/un_key20131012.png) 10px 11px no-repeat;color:#000;cursor:pointer;line-height:40px;font-size:18px;border-width:1px;border-style:solid;border-radius:3px}.ico_unkey{border-color:#898989 #e2e2e2 #e2e2e2;background-color:#f5f5f5;box-shadow:0 -1px 0 #e2e2e2,0 1px 0 #d1d1d1 inset}',filter:['
        {{if hasResult}}{{tmpl message.filterResult}}{{else}}{{tmpl message.noFilterResult}}{{/if}}
        {{each (i,item) list}}{{if cQuery.type(item)=="string"}}${item}{{else}}{{if data.split("|")[4]}}
        ${right}${left}-该城市没有机场
        {{each(j,d) data.split("|")[4].split("#")}}·邻近机场：${d.split("-")[0]}-${d.split("-")[1]}公里{{/each}}{{else}}
        ${right}${left}
        {{/if}}{{/if}}{{/each}}
        {{if page.max>-1}}
        {{if page.current>0}}<-{{/if}} {{if page.current<2}} {{loop(index) Math.min(5,page.max+1)}} ${index+1}{{/loop}} {{else page.current>page.max-2}} {{loop(index) Math.max(0,page.max-4),page.max+1}}${index+1}{{/loop}} {{else}} {{loop(index) Math.max(0,page.current-2),Math.min(page.current+3,page.max+1)}}${index+1}{{/loop}} {{/if}} {{if page.current->{{/if}}
        {{/if}}
        ','{{if hasResult}}
        {{if hasResult}}{{tmpl message.filterResult}}{{/if}}

        {{each (i,_items) newData}}
        ${colorRight} ${typeName} {{if isLand == -1}} ${bottom} {{/if}}
        {{/each}} {{/if}}'],filterStyle:[".c_address_select {font-family: Arial,Simsun;font-size: 12px;}.c_address_select .c_address_wrap {background: none repeat scroll 0 0 #FFFFFF;border: 1px solid #7F9DB9;margin: 0;padding: 0 0 4px;text-align: left;width: 350px;}.c_address_select .c_address_wrong{height:auto;overflow:hidden;padding:5px 10px;line-height:18px;color:#C01111;word-break:break-all;word-wrap:break-word;}.c_address_select .c_address_list {margin: 0;max-height: 600px;padding: 0;}.c_address_select .c_address_list a {border-bottom: 1px solid #FFFFFF;border-top: 1px solid #FFFFFF;color: #0055AA;cursor: pointer;display: block;height: 22px;line-height: 22px;min-height: 22px;overflow: hidden;padding: 1px 9px 0;text-align: left;text-decoration: none;}.c_address_select .c_address_list a:hover {background: none repeat scroll 0 0 #E8F4FF;border-bottom: 1px solid #7F9DB9;border-top: 1px solid #7F9DB9;}.c_address_select .c_address_list span {float: right;font: 10px/22px verdana;margin: 0;overflow: hidden;padding: 0;text-align: right;white-space: nowrap;width: 210px;}.c_address_select .c_address_pagebreak {display: none;line-height: 25px;margin: 0;padding: 0;text-align: center;}.c_address_select .c_address_pagebreak a {color: #0055AA;display: inline-block;font-family: Arial,Simsun,sans-serif;font-size: 14px;margin: 0;padding: 0 4px;text-align: center;text-decoration: underline;width: 15px;}.c_address_select .c_address_pagebreak a.address_current {color: #000; text-decoration: none;}.c_address_select .c_address_list .nearby {color:#333;}.c_address_select .c_address_list .none {cursor:default;}.c_address_select .c_address_list .none:hover {border-top:1px solid #FFF;border-bottom:1px solid #FFF;background-color:#FFF;}.c_address_select .c_address_list i {font-style:normal;color:#999;}.address_selected { background: none repeat scroll 0 0 #FFE6A6; color: #FFFFFF; height: 22px; }.c_address_list .hover {background: none repeat scroll 0 0 #E8F4FF;border-bottom: 1px solid #7F9DB9;border-top: 1px solid #7F9DB9;}",'html, body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, code, form, fieldset, legend, input, textarea, p, blockquote, th, td, em, button { margin:0; padding:0; } html { background-color:#FFF; } body { background-color:#FFF; font-size:12px; line-height:1.5; font-family:Tahoma,Simsun,sans-serif; color:#333; } img, fieldset { margin:0; padding:0; border:0; } input, textarea {font-size:12px;} table { border-collapse:collapse; } a { color:#0065bb; text-decoration:none; outline:none; } a:hover { text-decoration:underline; } h1, h2, h3, h4, h5 { font-family:Arial,Simsun,sans-serif; } ul li, ol li { list-style:none; } dfn { font-style:normal; font-size:12px; font-family:Arial !important; } select { padding:1px; font-family:Arial,Simsun,sans-serif; border:1px solid #CCC; background-color:#FFF; } input[type="text"],input[type="number"] { padding:3px; border:solid 1px #CCC; box-shadow: 1px 1px 3px #DDDDDD inset; } input[type="text"]:focus,input[type="number"]:focus{ background-color:#f1f9ff; border-color:#5d9de5 #67a1e2 #67a1e2 #5d9de5; border-style:solid; border-width:1px;box-shadow: 1px 1px 3px #d0dee6 inset;}.basefix,.layoutfix { *zoom:1; } .basefix:after,.layoutfix:after { clear:both; content:"."; display:block; height:0; overflow:hidden; } .new_city_suggestion { width:384px; border:1px solid #6699ff; background-color:#fff; max-height:394px; overflow-x: hidden;overflow-y: auto; font-size:12px; color:#666666; position:relative; } .new_city_suggestion .new_city_title { height:34px; line-height:34px; padding:0 10px 0 12px; border-bottom:1px solid #eee; } .new_city_suggestion .new_sug_item{ padding:4px 0;border-bottom:1px solid #eee; position:relative;} .new_city_suggestion .new_sug_item a { display:block; padding:0 10px 0 12px;line-height:30px; cursor:pointer;color:#666666; } .new_city_suggestion .new_sug_item .new_city_name { display:block; width:280px; text-overflow : ellipsis; white-space : nowrap; overflow : hidden; } .new_city_suggestion .new_sug_item a:hover { background-color:#6699ff; color:#fff; text-decoration:none; } .new_city_suggestion .new_sug_item a:hover span,.new_city_suggestion .new_sug_item a:hover i { color:#fff; } .new_city_suggestion .item_city_module{ position:absolute; top:4px; right:10px; line-height:30px;} .new_city_suggestion a i{ color:#6699ff;font-style:normal} .new_foreign_city .new_city_name{ line-height:20px;} .new_city_suggestion .english_color{ color:#999;}'], filterFltToCity:'
        {{if !hasResult}}
        对不起，暂不支持该地点
        {{/if}}
        {{each(i,item) list}} {{if cQuery.type(item)=="string"}}
        ${item}
        {{else}} {{if left=="isCountry"||left=="isCityNoAP"||left=="isDistrict"}}
        {{if left=="isCountry"}} ${right.split(",")[0]} -- 该地点为国家，请选择下列相关城市 {{/if}} {{if left == "isCityNoAP"}} ${right.split(",")[0]} {{if right.split(",")[1]!="中国"}} ${right.split(",")[1]} {{/if}} -- 该城市无机场 {{/if}} {{if left == "isDistrict"}} ${right.split(",")[0]} {{if right.split(",")[1]!="中国"}} ${right.split(",")[1]} {{/if}} -- 该地点为景点，请选择下列邻近机场 {{/if}} {{each(j,d) data.split("|")[4].split("#")}} · {{if left=="isCountry"}} 相关城市：${d.split("-")[0]} {{else}} 邻近机场：${d.split("-")[0]} {{if d.split("-")[1] != "" && d.split("-")[1] != "0" }} -${d.split("-")[1]}公里 {{/if}} {{/if}} {{/each}}
        {{else}} {{if right.split(",")[3]=="true"}}
        ${right.split(",")[0]} -- 对不起，您搜索的城市之间无直飞航班
        {{else}}
        ${right.split(",")[0]} {{if right.split(",")[1]!="中国"}} ${right.split(",")[1]} {{/if}} ${right.split(",")[2]}
        {{/if}} {{/if}} {{/if}} {{/each}}
        ',filterFltToCityStyle:".icon_hotel01,.icon_flag01{background-image:url(//pic.c-ctrip.com/flt_htl/v3/indx_taocan.png?20160223.png);background-repeat:no-repeat;} .ewm{background:url(//pic.c-ctrip.com/flt_htl/v3/ewm.png?20150316.png) no-repeat;} .icon_side{background-image:url(//pic.c-ctrip.com/flt_htl/v3/indx_taocan_icon1.jpg?20150316.jpg);background-repeat:no-repeat;-webkit-transition:.3s linear;-moz-transition:.3s linear;-o-transition:.3s linear;-ms-transition:.3s linear;transition:.3s linear;} .icon_hotel01,.icon_flt02,.icon_map01,.icon_flag01{display:inline-block;*display:inline;*zoom:1;width:20px;height:20px;} .icon_hotel01{background-position:-0px -1360px;} .icon_flag01{background-position:-20px -1360px;} .icon_flt02{background-position:-40px -1360px;} .icon_map01{background-position:-60px -1360px;} .tc_index_main{background:#f6f7f9;z-index:99;display:block;} .tc_index_main .search_no_lx{padding:5px 10px 5px 10px;font-weight:normal;background-color:#fff;text-align:left;color:#c01111;} .tc_index_main .search_lx2{display:block;width:338px;border:1px solid #ccc;z-index:2;background:#fff;font-size:12px;line-height:22px;box-shadow:1px 1px 3px rgba(0,0,0,.1);} .tc_index_main .search_lx2 h4{font-size:13px;} .tc_index_main .search_lx2 h1, .tc_index_main .search_lx2 h2, .tc_index_main .search_lx2 h3, .tc_index_main .search_lx2 h4, .tc_index_main .search_lx2 h5 {font-family:microsoft yahei,sans-serif;} .tc_index_main .search_lx2 .title{position:relative;padding:5px 5px 5px 10px;width:322px;font-weight:100;border-bottom:1px solid #ccc;} .tc_index_main .search_lx2 a.hover{background:#2577e3;cursor:pointer;color:#fff;text-decoration:none;} .tc_index_main .search_lx2 a.hover .city_name{color:#fff;} .tc_index_main .search_lx2 a.hover .icon_hotel01{background-position:-0px -1380px;} .tc_index_main .search_lx2 a.hover .icon_flag01{background-position:-20px -1380px;} .tc_index_main .search_lx2 a.hover .icon_flt02{background-position:-40px -1380px;} .tc_index_main .search_lx2 a.hover .icon_map01{background-position:-60px -1380px;} .tc_index_main .search_lx2 .title .city_name{color:#0066cc;font-weight:900;margin-right:3px;} .tc_index_main .search_lx2 .wrong{color:#ff4648;} .tc_index_main .search_lx2 .wrong .city_name{color:#999;} .tc_index_main .search_lx2 em{font-style:normal;} .tc_index_main .search_lx2 .color_blue{color:#0066cc;font-weight:bold;} .tc_index_main .search_lx2 .color_gray{color:#999;} .tc_index_main .search_lx2 .gjz{margin-right:3px;} .tc_index_main .search_lx2 li{padding:5px 10px;} .tc_index_main .search_lx2 a{padding:5px 10px;display:block;color:#333;} .tc_index_main .search_lx2 a b{margin-right:5px;font-weight:400;} .tc_index_main .search_lx2 li.title{padding-right:0px;border-bottom-width:0;list-style:none;} .flt_tips01{position:absolute;z-index:3;display:inline-block;width:158px;padding:5px;line-height:16px;background:#fff8e1;border:1px solid #ffd387;z-index:3;top:45px;_top:-10px;} .flt_tips01 .arrow{position:absolute;bottom:-7px;right:50px;display:block;width:11px;height:7px;background-position:-80px -1360px;} .tc_index_main .search_lx2 .icon_hotel01,.tc_index_main .search_lx2 .icon_flt02,.tc_index_main .search_lx2 .icon_map01,.tc_index_main .search_lx2 .icon_flag01{position:absolute;right:10px;top:50%;margin-top:-10px;}"}},tipMsg:{msg_noDepartDate:"请选择出发日期",msg_noReturnDate:"请选择返回日期",msg_noCheckInDate:"请选择入住日期",msg_noCheckOutDate:"请选择离开日期",msg_errorDate:"日期不符合格式规范或无效的日期",msg_returnDateEarlier:"您选择的返回日期早于/等于出发日期，请重新选择",msg_multiDepartDate:"该程机票出发日期不能小于上一程机票出发日期",msg_checkOutDateEarlier:"您选择的离店日期早于/等于入住日期，请重新选择",msg_dateOver28d:"最大行程不能超过28天，请分订单提交预订",msg_dateOver84d:"最大行程不能超过84天，请分订单提交预订",msg_dateOver365d:"最大行程不能超过365天，请分订单提交预订",msg_noFromCity:"请选择出发城市",msg_noToCity:"请选择到达城市",msg_noCheckInCity:"请选择入住城市",msg_checkInDateAddDay1Earlier:"入住日期最早只能出发日期前一天",msg_checkOutDateAddDay1Later:"酒店离店日期最晚只能为返程航班的后一天",msg_departCityEqualReturnCity:"出发城市不能与到达城市相同",msg_departDateWithin180d:"出发日期必须在当前日期往后180天以内",msg_departDateWithin365d:"出发日期必须在当前日期往后365天以内",msg_flightCityInBlack:"对不起，您搜索的城市之间无直飞航班"},data:{extraAirportAndHotelCityMapping:[[0,"","沙巴",0,"","哥打京那巴鲁"],[0,"","沙巴岛",0,"","哥打京那巴鲁"],[0,"","夏威夷·火奴鲁鲁",0,"","夏威夷"]]}};return t});; define("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCINewVersion.js", [], function(require,exports,module){var t=require("webresource/component/dpSearchEntryCtripIndex/dpSearchEntry.FMultiCIConfig.js"),e={version:"a",isVersionB:!1,mainScope:null,initVersion:function(t,e){t&&"B"==t&&(this.isVersionB=!0,this.mainScope=e,this.version="b")},appendFHXTabHtml:function(){if(this.isVersionB){var e=t.html.ctripIndex_FHX_TabTitle_template;$("#Taocan_switch").html(e)}},bindEvent:function(){this.fhxTabChange()},setSearchBtnValue:function(t){var e=$("#FHX_btnSearch");t&&e.length&&(e.value("搜索"+t+"套餐"),e.attr("title","搜索"+t+"套餐"))},fhxTabChange:function(){var t=this;if(this.isVersionB){var i=this.mainScope,a=$("#Taocan_switch a"),n=$("#divFlightQuery"),o=$("#lnkAddFlight"),s=$("#FHX_divHotelQuery"),r=$("#FHX_lnkAddHotel"),l=$("#cIndex_tabsBox");a.bind("click",function(d){var c=d.target;if(!$(c).hasClass("current")){var u=$(c).attr("data-type"),h=$(c).html();a.removeClass("current"),$(c).addClass("current"),t.setSearchBtnValue(h),"FX"==u?(i.cur_fhTabsIndex=1,s.addClass("hidden"),r.addClass("hidden"),n.removeClass("hidden"),l.removeClass("hidden"),2==i.isOneway&&e.isLessFlightMax()?o.removeClass("hidden"):o.addClass("hidden")):"HX"==u?(i.cur_fhTabsIndex=2,n.addClass("hidden"),o.addClass("hidden"),l.addClass("hidden"),s.removeClass("hidden"),e.isLessHotelMax()?r.removeClass("hidden"):r.addClass("hidden")):(i.cur_fhTabsIndex=0,n.removeClass("hidden"),s.removeClass("hidden"),l.removeClass("hidden"),2==i.isOneway&&e.isLessFlightMax()?o.removeClass("hidden"):o.addClass("hidden"),e.isLessHotelMax()?r.removeClass("hidden"):r.addClass("hidden")),t.resetViewBoxHeight(u)}})}},isLessFlightMax:function(){var t=$("#divFlightQuery .js_fltItem").length;return t&&4>t},isLessHotelMax:function(){var t=$("#FHX_divHotelQuery .js_hotelItem").length;return t&&4>t},resetViewBoxHeight:function(t){if(t){var e=$("#searchBox"),i=$("#searchBoxUl"),a=$("#FHX_container"),n=(e.height(),i.height(),a.height(),$("#Taocan_switch")),o=$("#divPeopleQuery"),s=$("#divFlightQuery"),r=$("#lnkAddFlight"),l=$("#FHX_divHotelQuery"),d=$("#FHX_lnkAddHotel"),c=$("#cIndex_tabsBox"),u=$("#FHX_btnSearch"),h=n.height(),p=o.height(),f=s.height(),m=r.height(),g=l.height(),_=d.height(),v=c.height(),y=u.height(),x=50,b=50,C=23,F=300,D=function(){F="FX"==t?h+p+f+m+v+y:"HX"==t?h+p+g+_+y:h+p+g+f+m+_+y+v},w=function(){e.attr("style",""),i.attr("style",""),a.attr("style",""),e.css("height",300>F+x?"300px":F+x+"px"),i.css("height",300>F+b?"300px":F+b+"px"),a.css("height",275>F+b?"275px":F+C+"px")};D(),w()}},getTrafficType:function(){var t=this.mainScope,e=t.cur_fhTabsIndex,i=t.isOneway,a="";switch(e){case 0:a=0==i?"&TrafficType=0":1==i?"&TrafficType=1":"&TrafficType=6";break;case 1:a=0==i?"&TrafficType=3":1==i?"&TrafficType=4":"&TrafficType=7";break;case 2:a="&TrafficType=5"}return a},getFlightsParams:function(){var t=$("#divFlightQuery"),e=t.find(".js_fltItem"),i=[],a=[],n=[],o=[];return e.each(function(t){var e=!$(t).hasClass("hidden");e&&(i.push(t.find("input[name=fltFromCities]").value()),a.push(t.find("input[name=fltToCities]").value()),n.push(t.find("input[name=FromTime]").value()),o.push(t.find("input[name=ToTime]").value()))}),this.getMultiFlightsParams(i,a,n,o)},getMultiFlightsParams:function(t,e,i,a){var n=[],o=[],s=[],r=[];return t.length>0&&(t.each(function(t,e){0==e?n.push("from="+t+"&"):n.push("from"+(e+1)+"="+t+"&")}),e.each(function(t,e){0==e?n.push("to="+t+"&"):n.push("to"+(e+1)+"="+t+"&")}),i.each(function(t,e){0==e?s.push("fromtime="+t+"&"):s.push("fromtime"+(e+1)+"="+t+"&")}),a.each(function(t,e){0==e?r.push("totime="+t+"&"):r.push("totime"+(e+1)+"="+t+"&")})),2==this.mainScope.isOneway&&(r=[""]),0==t.length&&(n=["from=&"]),0==e.length&&(o=["to=&"]),0==i.length&&(s=["fromtime=&"]),0==a.length&&2!=this.mainScope.isOneway&&(r=["totime=&"]),n.join("")+o.join("")+s.join("")+r.join("")},getUrlParameter:function(t,e,i){var a=this.mainScope.cur_fhTabsIndex,n=this.getFlightsParams(),o=this.getFlightParamsStr(n,a),s=this.getHotelParamsStr(e,a),r=this.getPublicParamsStr(i);return""+t+o+s+r},getFlightParamsStr:function(t,e){var i="";return 2!==e&&(i="&"+t),i},getHotelParamsStr:function(t,e){var i="";return 1!=e&&(i="&h="+t.htlId+"&checkindate="+t.checkindate+"&checkoutdate="+t.checkoutdate),i},getPublicParamsStr:function(t){var e=this.getTrafficType();return"&adults="+t.adults+"&children="+t.children+e+htlSearchId+htlSearchType}};return e});; define("tools/jquery", [], function(require,exports,module){!function(e,t){function n(e){var t=e.length,n=ue.type(e);return ue.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e){var t=De[e]={};return ue.each(e.match(he)||[],function(e,n){t[n]=!0}),t}function a(e,n,i,a){if(ue.acceptData(e)){var o,r,s=ue.expando,l=e.nodeType,d=l?ue.cache:e,c=l?e[s]:e[s]&&s;if(c&&d[c]&&(a||d[c].data)||i!==t||"string"!=typeof n)return c||(c=l?e[s]=ne.pop()||ue.guid++:s),d[c]||(d[c]=l?{}:{toJSON:ue.noop}),("object"==typeof n||"function"==typeof n)&&(a?d[c]=ue.extend(d[c],n):d[c].data=ue.extend(d[c].data,n)),r=d[c],a||(r.data||(r.data={}),r=r.data),i!==t&&(r[ue.camelCase(n)]=i),"string"==typeof n?(o=r[n],null==o&&(o=r[ue.camelCase(n)])):o=r,o}}function o(e,t,n){if(ue.acceptData(e)){var i,a,o=e.nodeType,r=o?ue.cache:e,l=o?e[ue.expando]:ue.expando;if(r[l]){if(t&&(i=n?r[l]:r[l].data)){ue.isArray(t)?t=t.concat(ue.map(t,ue.camelCase)):t in i?t=[t]:(t=ue.camelCase(t),t=t in i?[t]:t.split(" ")),a=t.length;for(;a--;)delete i[t[a]];if(n?!s(i):!ue.isEmptyObject(i))return}(n||(delete r[l].data,s(r[l])))&&(o?ue.cleanData([e],!0):ue.support.deleteExpando||r!=r.window?delete r[l]:r[l]=null)}}}function r(e,n,i){if(i===t&&1===e.nodeType){var a="data-"+n.replace(Se,"-$1").toLowerCase();if(i=e.getAttribute(a),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:Te.test(i)?ue.parseJSON(i):i}catch(o){}ue.data(e,n,i)}else i=t}return i}function s(e){var t;for(t in e)if(("data"!==t||!ue.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(){return!0}function d(){return!1}function c(){try{return J.activeElement}catch(e){}}function u(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function p(e,t,n){if(ue.isFunction(t))return ue.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return ue.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(qe.test(t))return ue.filter(t,e,n);t=ue.filter(t,e)}return ue.grep(e,function(e){return ue.inArray(e,t)>=0!==n})}function h(e){var t=ze.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function f(e,t){return ue.nodeName(e,"table")&&ue.nodeName(1===t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function m(e){return e.type=(null!==ue.find.attr(e,"type"))+"/"+e.type,e}function g(e){var t=at.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function y(e,t){for(var n,i=0;null!=(n=e[i]);i++)ue._data(n,"globalEval",!t||ue._data(t[i],"globalEval"))}function v(e,t){if(1===t.nodeType&&ue.hasData(e)){var n,i,a,o=ue._data(e),r=ue._data(t,o),s=o.events;if(s){delete r.handle,r.events={};for(n in s)for(i=0,a=s[n].length;a>i;i++)ue.event.add(t,n,s[n][i])}r.data&&(r.data=ue.extend({},r.data))}}function _(e,t){var n,i,a;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ue.support.noCloneEvent&&t[ue.expando]){a=ue._data(t);for(i in a.events)ue.removeEvent(t,i,a.handle);t.removeAttribute(ue.expando)}"script"===n&&t.text!==e.text?(m(t).text=e.text,g(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ue.support.html5Clone&&e.innerHTML&&!ue.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&tt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function x(e,n){var i,a,o=0,r=typeof e.getElementsByTagName!==Y?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==Y?e.querySelectorAll(n||"*"):t;if(!r)for(r=[],i=e.childNodes||e;null!=(a=i[o]);o++)!n||ue.nodeName(a,n)?r.push(a):ue.merge(r,x(a,n));return n===t||n&&ue.nodeName(e,n)?ue.merge([e],r):r}function b(e){tt.test(e.type)&&(e.defaultChecked=e.checked)}function C(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,a=wt.length;a--;)if(t=wt[a]+n,t in e)return t;return i}function F(e,t){return e=t||e,"none"===ue.css(e,"display")||!ue.contains(e.ownerDocument,e)}function w(e,t){for(var n,i,a,o=[],r=0,s=e.length;s>r;r++)i=e[r],i.style&&(o[r]=ue._data(i,"olddisplay"),n=i.style.display,t?(o[r]||"none"!==n||(i.style.display=""),""===i.style.display&&F(i)&&(o[r]=ue._data(i,"olddisplay",$(i.nodeName)))):o[r]||(a=F(i),(n&&"none"!==n||!a)&&ue._data(i,"olddisplay",a?n:ue.css(i,"display"))));for(r=0;s>r;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[r]||"":"none"));return e}function D(e,t,n){var i=yt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function T(e,t,n,i,a){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,r=0;4>o;o+=2)"margin"===n&&(r+=ue.css(e,n+Ft[o],!0,a)),i?("content"===n&&(r-=ue.css(e,"padding"+Ft[o],!0,a)),"margin"!==n&&(r-=ue.css(e,"border"+Ft[o]+"Width",!0,a))):(r+=ue.css(e,"padding"+Ft[o],!0,a),"padding"!==n&&(r+=ue.css(e,"border"+Ft[o]+"Width",!0,a)));return r}function k(e,t,n){var i=!0,a="width"===t?e.offsetWidth:e.offsetHeight,o=ct(e),r=ue.support.boxSizing&&"border-box"===ue.css(e,"boxSizing",!1,o);if(0>=a||null==a){if(a=ut(e,t,o),(0>a||null==a)&&(a=e.style[t]),vt.test(a))return a;i=r&&(ue.support.boxSizingReliable||a===e.style[t]),a=parseFloat(a)||0}return a+T(e,t,n||(r?"border":"content"),i,o)+"px"}function $(e){var t=J,n=xt[e];return n||(n=j(e,t),"none"!==n&&n||(dt=(dt||ue("