/**
 * Ctrip JavaScript Code
 * http://www.ctrip.com/
 * Copyright(C) 2008 - 2017, Ctrip All rights reserved.
 * Version: 171215
 * Date: 2017-12-15
 */
;cQuery.run(function(t){function e(t,e){this.init(e)}try{var a={name:"HM_MainArea_Vacation",version:"1.0",init:function(){},uninit:function(){},module:e},i={cityId:"1",cityName:Ctrip.Util.PageConfig.cityName||"上海",loadingMask:"<div class='onloading'></div>"
},n=i.cityId,r="0",o="",s=Ctrip.Util.PageConfig.url.vacationAjaxBI,d=Ctrip.Util.PageConfig.url.themeTourAjaxBI,l={1:"游",2:"游",4:"游",8:"",16:"门票",11:"出境游",12:"国内游",14:"周边游",18:"邮轮产品"},c={};e.prototype={init:function(a){this.conf=this._setConf(a),n=this.conf.cityId,
c.msg="HM_MainArea_Vacation_RemoteDataErr",c.method=e.prototype._func.retry,t(".mod.tmh .mod-bd").addClass("onloading"),this._event.bigTab(),this._event.depCity(),this._event.unTabtab(),Ctrip.Util.asynScrollLoad({defObj:".mod.tmh",defHeight:0,delayFunc:this._delayCall})},_setConf:function(e){
return t.extend(!0,{},i,e||{})},_delayCall:function(){e.prototype._func.request(!0,!0)},_event:{depCity:function(){Ctrip.Util.addEventHandler(t("#v_departure")[0],"click",function(e){var a=(e=e||window.event).target||e.srcElement
;t("#v_departure_city").contains(a)||"v_departure_city"===a.id||(t("#v_departure").contains(a)||"v_departure"===a.id?(t(".mod.tmh .mod-hd .dropdown-cont").slideToggle(),Ctrip.Util.toggleClass(t("#v_departure")[0],"open"),
Ctrip.Singleton.setMetric("hp_vacationsection","city")):t("#v_departure")[0].className="dropdown")}),Ctrip.Util.addEventHandler(t("#v_departure_city")[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement;if("SPAN"===i.nodeName&&"shortTab"===t(i).attr("el_type")){
var r="#v_departure_city .city_item:eq("+t("#v_departure_city>div>ul>li").indexOf(t(i).parentNode())+")";t("#v_departure_city .hot_selected").removeClass("hot_selected"),t(i).parentNode().addClass("hot_selected"),t("#v_departure_city .city_item").hide(),t(r).show()}
"A"===i.nodeName&&"close"!=i.className&&(Ctrip.Singleton.setMetric("hp_vacationsection","city_select"),t("#v_departure>a>span")[0].innerHTML=i.innerHTML,t("#v_departure")[0].className="dropdown",t(".mod.tmh .pull-right .dropdown-cont").slideToggle(),n=i.getAttribute("data-id"),o="",
t(".mod.tmh>div>h2>span[class='current']").attr("dcity",n),e.prototype._func.request(!0))}),Ctrip.Util.addEventHandler(t(document)[0],"click",function(e){var a=(e=e||window.event).target||e.srcElement;if(!t(".mod.tmh .pull-right").contains(a)){var i=t(".mod.tmh>.mod-hd .dropdown")[0]
;null!=i&&"dropdown open"===i.className&&(i.className="dropdown",t(".mod.tmh .pull-right .dropdown-cont").slideToggle())}})},bigTab:function(){var a=t(".mod.tmh>div>h2>span");t(".mod.tmh>div>h2>span").attr("dcity",n),Ctrip.Util.addEventHandler(t(a[a.length-1])[0],"click",function(){
Ctrip.Singleton.setMetric("hp_vacationsection",6)});for(var i=0,s=a.length;i<s-1;i++)!function(s){var d=i;Ctrip.Util.addEventHandler(t(a[d])[0],"click",function(){var i=d;6==d&&(i=7),Ctrip.Singleton.setMetric("hp_vacationsection",i),t(".mod.tmh>div>h2>span[class='current']").removeClass("current"),
t(a[d]).addClass("current"),r=t(a[d]).attr("idx"),o="";var s=t(".mod.tmh>div>div[idx='"+t(a[d]).attr("idx")+"']");t(".mod.tmh>div>div.mod-bd-panel").hide(),0!=s.length&&s.find("div>div>ul>li").length>0&&t(a[d]).attr("dcity")==n?t(s).show():(e.prototype._func.request(!0),t(a[d]).attr("dcity",n))})}()
},tabtab:function(a){function i(t){Ctrip.Util.addEventHandler(t[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement;if("dropdown-toggle dropdown-toggle_border"!==i.className){if("A"===i.nodeName&&i.getAttribute("pinyin")){if("dropdown-menu-list"===i.parentNode.className){
Ctrip.Util.toggleClass(i.parentNode.parentNode.parentNode,"open");i.parentNode.parentNode.parentNode;t.find("li").removeClass("active");var n=(s=t.find("li[class!='dropdown-li']>a"))[s.length-1],r=i.cloneNode(!0);return n.parentNode.replaceChild(r,n),r.parentNode.className="active",
i.parentNode.replaceChild(n,i),o=i.getAttribute("pinyin"),void e.prototype._func.request(!1)}o=i.getAttribute("pinyin");var s;(s=t.find("li")).removeClass("active"),i.parentNode.className="active",e.prototype._func.request(!1)}}else Ctrip.Util.toggleClass(i.parentNode,"open")})}
a&&"1"==a.attr("eb")||(i(a?t(a).find("ul[class='inner-tabs-nav']"):t(".mod.tmh>.mod-bd").find("ul[class='inner-tabs-nav']")),a.attr("eb","1"))},unTabtab:function(){Ctrip.Util.addEventHandler(t(document)[0],"click",function(e){
if("dropdown-toggle dropdown-toggle_border"!=((e=e||window.event).target||e.srcElement).className){var a=t(".mod.tmh>div>div[idx='"+r+"']").find("ul[class='inner-tabs-nav']>li[class='dropdown-li']>div")[0];null!=a&&"dropdown open"===a.className&&(a.className="dropdown")}})}},_func:{retry:function(){
t(".mod.tmh .mod-bd").addClass("onloading"),t.loader.js(Ctrip.Util.PageConfig.url.staticJson,{type:"text/javascript",charset:"utf-8",async:!0,cache:!0,onload:function(){var a=Ctrip.Util.PageConfig.staticData
;a&&a.tour&&a.tour.tabContentLst&&0!=a.tour.tabContentLst.length&&(e.prototype._func.formatHTML(!1,a.tour),t(".mod.tmh .mod-bd").removeClass("onloading"))}})},request:function(a,i){var l=this,p=s;17==r&&(p=d),url2=p+"?ch="+r+"&depLoc="+n+"&destLoc="+o,t(".mod.tmh .mod-bd").addClass("onloading"),
t.ajax(url2,{cache:!0,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(n){try{var o=t.parseJSON(n.responseText);l.formatHTML(a,o),a&&e.prototype._event.tabtab(t(".mod.tmh>div>div[idx='"+r+"']")),t(".mod.tmh .mod-bd").removeClass("onloading")}catch(t){i&&Ctrip.Util.raiseError(c)}},
onerror:function(t){i&&Ctrip.Util.raiseError(c)}})},formatHTML:function(e,a){var i;if(0==t(".mod.tmh>div>div[idx='"+r+"']").length){if((i=t(t(".mod.tmh>div>div[idx='1']")[0].cloneNode(!0))).attr("idx",r),t.browser.isIE7||t.browser.isIE8){i.find("ul[class='inner-tabs-nav']").remove()
;var n=document.createElement("UL");n.className="inner-tabs-nav",t(n).appendTo(i.find(".product-hd"))}i.attr("eb","0")}else i=t(".mod.tmh>div>div[idx='"+r+"']");var s={tabItem:'<li><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tabItemCur:'<li class="active"><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tab7:'<li class="dropdown-li">\t\t\t\t \t\t\t        <div class="dropdown"><a href="javascript:void(0);" class="dropdown-toggle dropdown-toggle_border">更多<span class="caret"></span></a>\t\t\t\t \t\t\t        <div class="dropdown-cont"><div class="dropdown-menu-list">{$a7}</div></div></div></li>',
tab7Item:'<a href="{$url}" pinyin="{$pinyin}">{$name}</a>',
prdItem:'<div class="product-item" title="{$title}"><a href="{$url}" target="_blank"><div class="item-thumbnail"><img src="{$img}" alt="{$title}"/>{$dealspan}{$hot}{$vac_name}</div><p class="item-name">{$name}</p><p class="item-info">{$price}{$seat}{$rates}</p></a></div>',
hotLinks:'<span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span>',
adItem:'<div class="extra-item" title="{$title}"><a href="{$url}" target="_blank"><p class="extra-thumbnail"><img src="{$img}" alt="{$title}"></p><p class="extra-text">{$name}</p></a></div>',
themeTourPrdItem:'<div class="product-item" title="{$title}"><a href="{$url}" target="_blank"><div class="item-thumbnail"><img src="{$img}" alt="{$title}"/></div><p class="item-name">{$name}</p><p class="item-info">{$price}</p></a></div>',
themeGroup:'<dl class="keyword-short"><dt>{$themeName}</dt><dd>{$themeList}</dd></dl>'};if(e&&r>0){for(var d=[],c=[],p=0,m=a.destCitys.length;p<m;p++)0!==p?p>=7?c[c.length]=s.tab7Item.replaceWith({pinyin:a.destCitys[p].pinyin,name:a.destCitys[p].nme,
url:a.destCitys[p].lnk?a.destCitys[p].lnk:"javascript:void(0);"}):d[d.length]=s.tabItem.replaceWith({pinyin:a.destCitys[p].pinyin,name:a.destCitys[p].nme,url:a.destCitys[p].lnk?a.destCitys[p].lnk:"javascript:void(0);"}):d[0]=s.tabItemCur.replaceWith({pinyin:a.destCitys[p].pinyin,
name:a.destCitys[p].nme,url:a.destCitys[p].lnk?a.destCitys[p].lnk:"javascript:void(0);"});var u=s.tab7.replaceWith({a7:c.join("")}),h=t(i).find("ul[class='inner-tabs-nav']");c.length>0?t(h).html(d.join("")+u):t(h).html(d.join("")),o=t(h).find("a:eq(0)").attr("pinyin")}
e&&0==r&&(t(".mod.tmh>div>div[idx='0'] .inner-tabs-nav li").removeClass("active"),t(".mod.tmh>div>div[idx='0'] .inner-tabs-nav li")[0].className="active");var f=[];for(p=0,m=a.tabContentLst.length;p<m&&(0!=r||8!=p);p++){if(0!=r)if(null==a.adLst){
if(t(i).find("div[class='product-bd']>div").addClass("inner-tab-panel_noextra"),8==p)break}else if(null!=a.adLst&&6==p)break;var g=a.tabContentLst[p].prdNme;f[f.length]=17==r?s.themeTourPrdItem.replaceWith({name:g,title:g,img:a.tabContentLst[p].img,url:a.tabContentLst[p].prdLnk,
price:null==a.tabContentLst[p].price||0==a.tabContentLst[p].price?'<span class="price no-price">实时计价</span>':'<span class="price"><dfn>¥</dfn>'+a.tabContentLst[p].price+'<i class="price_info">起</i></span>'}):s.prdItem.replaceWith({name:g,title:g,img:a.tabContentLst[p].img,
url:a.tabContentLst[p].prdLnk,hot:a.tabContentLst[p].isHot?"爆款":"",vac_name:a.tabContentLst[p].promo?'<p class="item-overlay" title='+a.tabContentLst[p].promo+">"+a.tabContentLst[p].promo+'</p><p class="iefix-bg"></p>':"",
price:0==a.tabContentLst[p].price.amt?'<span class="price no-price">实时计价</span>':'<span class="price"><dfn>¥</dfn>'+a.tabContentLst[p].price.amt+'<i class="price_info">起</i></span>',
seat:void 0!==a.tabContentLst[p].Seat&&""!=a.tabContentLst[p].Seat?'<span class="item-type">'+a.tabContentLst[p].Seat+"</span>":"",rates:a.tabContentLst[p].level&&a.tabContentLst[p].level>1?'<span class="diamond diamond0'+a.tabContentLst[p].level+'"></span>':"",
dealspan:0==r?'<span class="tag tag_tmh">特卖</span>':""})}if(a.adLst){for(p=0,m=a.adLst.length;p<m;p++)if(""!=a.adLst[p].alt){f[f.length]=s.adItem.replaceWith({name:a.adLst[p].alt,title:a.adLst[p].alt,img:a.adLst[p].img,url:a.adLst[p].url});break}
t(i).find("div[class='product-bd']>div").removeClass("inner-tab-panel_noextra")}else t(i).find("div[class='product-bd']>div").addClass("inner-tab-panel_noextra");t(i).find("div[class='product-bd']>div").html(f.join(""));var v,b;null!=a.exLnk&&""!=a.exLnk?(t(i).find("a[class='linked-more']").show(),
17==r?v=a.exNme:-1==a.exNme.indexOf("精选")?(a.exNme=-1==a.exNme.indexOf("更多")?"更多"+a.exNme:a.exNme,v=a.exNme+l[r]):v="更多"+l["1"+r],b=a.exLnk):1==r?(v="更多出境游",b="http://vacations.ctrip.com/grouptravel/"):2==r?(v="更多国内游",b="http://vacations.ctrip.com/"):4==r?(v="更多周边游",
b="http://you.ctrip.com/around/"):8==r?(v="更多邮轮",b="http://cruise.ctrip.com/"):16==r?(v="更多门票",b="http://piao.ctrip.com/"):17==r?(v="更多主题游",b="//vacations.ctrip.com/themetravel/"):0==r&&(v="更多特卖汇",b="http://vacations.ctrip.com/deals"),
t(i).find("a[class='linked-more']").html(v+' <i class="i_index_next"></i>'),t(i).find("a[class='linked-more']").attr("href",b);var y=[];if(a.hotLnks)for(p=0,m=a.hotLnks.length;p<m&&16!=p;p++)y[y.length]=s.hotLinks.replaceWith({name:a.hotLnks[p].nme,url:a.hotLnks[p].lnk,
hot:"Y"===a.hotLnks[p].isHot?"<span class='icon_hot'></span>":""});t(i).find("dl[class='keyword-short']:eq(1)>dd").html(y.join("")),null!=a.hotGRNme&&""!=a.hotGRNme&&t(i).find("dl[class='keyword-short']:eq(1)>dt").html(a.hotGRNme);var _=[],C=[];if(a.themes){for(p=0;p<a.themes.length;p++){
for(var L=a.themes[p],w=0;w<L.themeLst.length;w++)_[_.length]=s.hotLinks.replaceWith({name:L.themeLst[w].nme,url:L.themeLst[w].url,hot:"Y"===L.themeLst[w].isHot?"<span class='icon_hot'></span>":""});C[C.length]=s.themeGroup.replaceWith({themeName:a.themes[p].themeGRNme,themeList:_.join("")}),_=[]}
t(i).find("div[class='entrance entrance-theme']>div").html(C.join(""))}else{if(a.themeLst)for(p=0,m=a.themeLst.length;p<m&&15!=p;p++)_[_.length]=s.hotLinks.replaceWith({name:a.themeLst[p].nme,url:a.themeLst[p].url,hot:"Y"===a.themeLst[p].isHot?"<span class='icon_hot'></span>":""})
;t(i).find("dl[class='keyword-short']:eq(0)>dd").html(_.join("")),null!=a.themeGRNme&&""!=a.themeGRNme&&t(i).find("dl[class='keyword-short']:eq(0)>dt").html(a.themeGRNme)}t(i).appendTo(t(".mod.tmh .mod-bd")),i.show();var $;switch(r){case"0":$="tour.tmh";break;case"1":$="tour.intl";break;case"2":
$="tour.dome";break;case"4":$="tour.rt";break;case"8":$="tour.pl";break;case"16":$="tour.at";break;case"17":$="tour.tht"}Ctrip.Singleton.setStatistic($,"prd",t(i).find(".product-item a")),Ctrip.Singleton.setStatistic($,"more",t(i).find(".linked-more")),
17!=r&&Ctrip.Singleton.setStatistic($,"event",t(i).find(".extra-item a")),0!=r&&(Ctrip.Singleton.setStatistic($,"tag1",t(i).find(".entrance dl:eq(0) a")),Ctrip.Singleton.setStatistic($,"tag2",t(i).find(".entrance dl:eq(1) a")),
17==r&&(Ctrip.Singleton.setStatistic($,"tag3",t(i).find(".entrance dl:eq(2) a")),Ctrip.Singleton.setStatistic($,"tag4",t(i).find(".entrance dl:eq(3) a")),Ctrip.Singleton.setStatistic($,"tag5",t(i).find(".entrance dl:eq(4) a"))))}}},t.mod.reg(a)}catch(t){Ctrip.Util.log(t)}}(cQuery)),
cQuery.run(function($){function HM_MainArea_Flight(t,e){this.init(e)}try{var cls={name:"HM_MainArea_Flight",version:"1.0",init:function(){},uninit:function(){},module:HM_MainArea_Flight},defaultConf={loadingMask:"<div class='onloading'></div>",defaultTabId:0
},___tabId="intl",___dcity,___destCityPY="",___url=Ctrip.Util.PageConfig.url.flightAjaxBI,___err={};HM_MainArea_Flight.prototype={init:function(t){this.conf=this._setConf(t),___dcity=this.conf.defaultTabId,___err.msg="HM_MainArea_Flight_RemoteDataErr",
___err.method=HM_MainArea_Flight.prototype._func.retry,$(".mod.flight").hide(),$(".mod.flightC").show(),this._event.bigTab(),this._event.departTab($(".mod.flightC")),$(".mod.flightC .mod-bd").addClass("onloading"),Ctrip.Util.asynScrollLoad({defObj:".mod.flightC",defHeight:0,delayFunc:this._delayCall
}),this._event.unTabtab()},_setConf:function(t){return $.extend(!0,{},defaultConf,t||{})},_delayCall:function(){HM_MainArea_Flight.prototype._func.request(!0)},_event:{departTab:function(t){Ctrip.Util.addEventHandler($(t).find(".mod-hd .dropdown")[0],"click",function(e){
var a=(e=e||window.event).target||e.srcElement;if($(t).find(".dropdown-cont").slideToggle(),Ctrip.Util.toggleClass($(t).find(".dropdown")[0],"open"),Ctrip.Singleton.setMetric("hp_flightsection","city"),
"A"===a.nodeName&&"dropdown-menu-list"===a.parentNode.className)return Ctrip.Singleton.setMetric("hp_flightsection","city_select"),$(t).find(".mod-hd .dropdown .dropdown-toggle").html($(a).text()+'出发<span class="caret"></span>'),___dcity=a.getAttribute("data-szm"),___destCityPY="",
$(".mod.flightC>div>h2>span[class='current']").attr("dcity",___dcity),void HM_MainArea_Flight.prototype._func.request(!0)})},bigTab:function(){var t=$(".mod.flightC>div>h2>span");$(".mod.flightC>div>h2>span").attr("dcity",___dcity);for(var e=0,a=t.length;e<=a-1;e++)!function(a){var i=e
;Ctrip.Util.addEventHandler($(t[i])[0],"click",function(){Ctrip.Singleton.setMetric("hp_flightsection",i),$(".mod.flightC>div>h2>span[class='current']").removeClass("current"),$(t[i]).addClass("current"),___tabId=$(t[i]).attr("idx"),___destCityPY=""
;var e=$(".mod.flightC>div>div[idx='"+$(t[i]).attr("idx")+"']");$(".mod.flightC>div>div.mod-bd-panel").hide(),0!=e.length&&e.find("div>div>ul>li").length>0&&$(t[i]).attr("dcity")==___dcity?$(e).show():(HM_MainArea_Flight.prototype._func.request(!0),$(t[i]).attr("dcity",___dcity))})}()},
tabtab:function(t){function e(t){Ctrip.Util.addEventHandler(t[0],"click",function(e){var a=(e=e||window.event).target||e.srcElement;if("dropdown-toggle dropdown-toggle_border"!==a.className){if("A"===a.nodeName&&a.getAttribute("pinyin")){if("dropdown-menu-list"===a.parentNode.className){
Ctrip.Util.toggleClass(a.parentNode.parentNode.parentNode,"open");a.parentNode.parentNode.parentNode;t.find("li").removeClass("active");var i=(r=t.find("li[class!='dropdown-li']>a"))[r.length-1],n=a.cloneNode(!0);return i.parentNode.replaceChild(n,i),n.parentNode.className="active",
a.parentNode.replaceChild(i,a),___destCityPY=a.getAttribute("pinyin"),void HM_MainArea_Flight.prototype._func.request(!1)}___destCityPY=a.getAttribute("pinyin");var r;(r=t.find("li")).removeClass("active"),a.parentNode.className="active",HM_MainArea_Flight.prototype._func.request(!1)}
}else Ctrip.Util.toggleClass(a.parentNode,"open")})}t&&"1"==t.attr("eb")||(e(t?$(t).find("ul[class='inner-tabs-nav']"):$(".mod.flightC>.mod-bd").find("ul[class='inner-tabs-nav']")),t.attr("eb","1"))},unTabtab:function(){Ctrip.Util.addEventHandler($(document)[0],"click",function(t){
var e=(t=t||window.event).target||t.srcElement;$("div[class^='mod flight']>.mod-hd .dropdown").each(function(t){null==t||$(t).contains(e)||"dropdown open"===t.attr("class")&&(t.attr("class","dropdown"),$(t).find(".dropdown-cont").slideUp())})})}},_func:{retry:function(){
$.loader.js(Ctrip.Util.PageConfig.url.staticJson,{type:"text/javascript",charset:"utf-8",async:!0,cache:!0,onload:function(){try{$(".mod.flightC").show();var t=Ctrip.Util.PageConfig.staticData;if(!t||!t.flight||!t.flight.caleLst||0==t.flight.caleLst.length)return
;HM_MainArea_Flight.prototype._func.formatHTML($(".mod.flightC .mod-bd"),t.flight)}catch(t){throw t}}})},request:function(t,e){var a=this,i=___url+"?dcity="+___dcity+"&area="+___tabId+"&gp="+___destCityPY;$(".mod.flightC .mod-bd").addClass("onloading"),$.ajax(i,{cache:!0,async:!0,
method:cQuery.AJAX_METHOD_GET,onsuccess:function(e){try{var i=$.parseJSON(e.responseText);a.formatHTML(t,i),t&&HM_MainArea_Flight.prototype._event.tabtab($(".mod.flightC>div>div[idx='"+___tabId+"']")),$(".mod.flightC .mod-bd").removeClass("onloading")}catch(e){t&&Ctrip.Util.raiseError(___err)}},
onerror:function(){t&&Ctrip.Util.raiseError(___err)}})},calenderPlugin:function(){String.prototype.format=function(){var t=arguments;return this.replace(/\{(\d+)\}/g,function(e,a,i,n){return t[a]})},Date.prototype.formatST=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),
"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)))
;for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},Date.prototype.dateAdd=function(t,e){switch(t){case"s":return new Date(Date.parse(this)+1e3*e);case"n":return new Date(Date.parse(this)+6e4*e);case"h":
return new Date(Date.parse(this)+36e5*e);case"d":return new Date(Date.parse(this)+864e5*e);case"w":return new Date(Date.parse(this)+6048e5*e);case"q":return new Date(this.getFullYear(),this.getMonth()+3*e,this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds());case"m":
return new Date(this.getFullYear(),this.getMonth()+e,this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds());case"y":return new Date(this.getFullYear()+e,this.getMonth(),this.getDate(),this.getHours(),this.getMinutes(),this.getSeconds())}},Date.prototype.lastDayOfMonth=function(){
return new Date(this.getFullYear(),this.getMonth()+1,0)},Date.prototype.firstDayOfMonth=function(){return new Date(this.getFullYear(),this.getMonth(),1)};var jsHelper={strToDom:function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},isJson:function(t){
return"object"==typeof t&&"[object object]"==Object.prototype.toString.call(t).toLowerCase()&&!t.length}},template=function(){try{return{matrixContainer:['<div class="mod-bd" id="matrixContainer"></div>'].join("\n"),stContainer:['<div class="calender" id="stContainer">',"</div>"].join("\n"),
leftContainer:['<div class="calender-tabs" id="leftContainer"></div>'].join("\n"),tabContainer:['<div class="calender-tabs-month">',"</div>"].join("\n"),tabChildrenContainer:['<ul class="month" id="tabContainer">',"</ul>"].join("\n"),
tabChild:['<li id="{0}" pinyin={3}>','<div class="theme-s"><img src="{1}" id="{2}"></div>',"</li>"].join("\n"),
calendarContainer:['<div class="calender-tabs-date-wrap" id="calendarContainer">','<span class="btn-prev" id="btnPrev"></span>','<span class="btn-next" id="btnNext"></span>',"</div>"].join("\n"),galleryContainer:['<div class="calender-tabs-date" id="galleryContainer"></div>'].join("\n"),
gallery:['<div class="calender-date-panel active">',' <ul class="days">',"<li>日</li>","<li>一</li>","<li>二</li>","<li>三</li>","<li>四</li>","<li>五</li>","<li>六</li>","</ul>","</div>"].join("\n"),calendarDates:['<ul class="dates" id="dates">',"</ul>"].join("\n"),
calendarBackImg:['<div class="theme-img">','<img src="{0}" alt="">',"</div>"].join("\n"),emptyDateDom:["<li></li>"].join("\n"),ordinaryDateDom:["<li><span>{0}</span></li>"].join("\n"),holidayDateDom:['<li><span class="date-festival">{0}</span></li>'].join("\n"),
specialDateDom:['<li><span class="hide">{0}</span>','<div class="sale-overlay">','<a href="{1}" target="_blank">','<p class="sale-date">{2}</p>','<p class="sale-place">{3}</p>','<p class="price sale-price"><dfn>¥</dfn>{4} <i class="price_info">起</i></p>',"</div>","</li>"].join("\n"),
productContainer:['<div class="product"  id="productContainer">',"</div>"].join("\n"),
productItem:['<div class="product-item">','<a href="{0}" target="_blank">','<div class="item-thumbnail">','<img src="{1}" alt="{2}">',"</div>",'<div class="item-msg">','<p class="price"><dfn>¥</dfn>{3} <i class="price_info">起</i></p>','<p class="item-name">{4}</p>',"</div>",'<div class="iefix-bg"></div>',"</a>","</div>"].join("\n"),
adItem:['<div class="extra-item">','<a href="{0}" target="_blank">','<p class="extra-thumbnail">','<img src="{1}" alt="">',"</p>",'<p class="extra-text">{2}</p>','<p class="iefix-bg"></p>',"</a>","</div>"].join("\n")}}catch(t){throw t}}(),holidayList=function(){try{return[{name:"元旦",
dates:["2015-01-01","2016-01-01","2017-01-01","2018-01-01","2019-01-01","2020-01-01"]},{name:"除夕",dates:["2015-02-18","2016-02-07","2017-01-27","2018-02-15","2019-02-04","2020-01-24"]},{name:"春节",dates:["2015-02-19","2016-02-08","2017-01-28","2018-02-16","2019-02-05","2020-01-25"]},{name:"情人节",
dates:["2015-02-14","2016-02-14","2017-02-14","2018-02-14","2019-02-14","2020-02-14"]},{name:"元宵节",dates:["2015-03-05","2016-02-22","2017-02-11","2018-03-02","2019-02-19","2020-02-08"]},{name:"清明节",dates:["2015-04-05","2016-04-04","2017-04-04","2018-04-05","2019-04-05","2020-04-04"]},{name:"劳动节",
dates:["2015-05-01","2016-05-01","2017-05-01","2018-05-01","2019-05-01","2020-05-01"]},{name:"儿童节",dates:["2015-06-01","2016-06-01","2017-06-01","2018-06-01","2019-06-01","2020-06-01"]},{name:"端午节",dates:["2015-06-20","2016-06-09","2017-05-30","2018-06-18","2019-06-07","2020-06-25"]},{name:"建党节",
dates:["2015-07-01","2016-07-01","2017-07-01","2018-07-01","2019-07-01","2020-07-01"]},{name:"建军节",dates:["2015-08-01","2016-08-01","2017-08-01","2018-08-01","2019-08-01","2020-08-01"]},{name:"七夕",dates:["2015-08-20","2016-08-09","2017-08-28","2018-08-17","2019-08-07"]},{name:"教师节",
dates:["2015-09-01","2016-09-01","2017-09-01","2018-09-01","2019-09-01","2020-09-01"]},{name:"中秋节",dates:["2015-09-27","2016-09-15","2017-10-04","2018-09-24","2019-09-13"]},{name:"国庆节",dates:["2015-10-01","2016-10-01","2017-10-01","2018-10-01","2019-10-01","2020-10-01"]},{name:"圣诞节",
dates:["2015-12-25","2016-12-25","2017-12-25","2018-12-25","2019-12-25","2020-12-25"]}]}catch(t){throw t}}(),dataFilter=function(primitiveData){try{if(primitiveData&&0==jsHelper.isJson(primitiveData)&&(primitiveData=eval("("+primitiveData+")")),
void 0==primitiveData.tabLst||0==primitiveData.tabLst.length)return;if(void 0==primitiveData.caleLst||0==primitiveData.caleLst.length)return;if(void 0==primitiveData.prdLst||0==primitiveData.prdLst.length)return;var tabFilter=function(){
for(var t=[],e=0;e<primitiveData.tabLst.length&&(void 0!=primitiveData.tabLst[e].pinyin&&void 0!=primitiveData.tabLst[e].calImg&&void 0!=primitiveData.tabLst[e].tabImg1&&void 0!=primitiveData.tabLst[e].tabImg2);e++){var a={tabId:"tab"+e,requestParam:primitiveData.tabLst[e].pinyin,
tabName:primitiveData.tabLst[e].tabName,bigImg:primitiveData.tabLst[e].calImg,unClickImg:primitiveData.tabLst[e].tabImg2,clickedImg:primitiveData.tabLst[e].tabImg1};t.push(a)}return t},calendarFilter=function(){
for(var t=[],e=0;e<primitiveData.caleLst.length&&(void 0!=primitiveData.caleLst[e].date&&void 0!=primitiveData.caleLst[e].price&&void 0!=primitiveData.caleLst[e].price.amt&&void 0!=primitiveData.caleLst[e].url&&void 0!=primitiveData.caleLst[e].dcNme);e++){var a={date:primitiveData.caleLst[e].date,
dcName:primitiveData.caleLst[e].dcNme,acName:primitiveData.caleLst[e].acNme,price:Number(primitiveData.caleLst[e].price.amt),url:primitiveData.caleLst[e].url};t.push(a)}return t},productFilter=function(){
for(var t=[],e=0;e<primitiveData.prdLst.length&&(void 0!=primitiveData.prdLst[e].nme&&void 0!=primitiveData.prdLst[e].price&&void 0!=primitiveData.prdLst[e].price.amt&&void 0!=primitiveData.prdLst[e].lnk&&void 0!=primitiveData.prdLst[e].img);e++){var a={title:primitiveData.prdLst[e].nme,
url:primitiveData.prdLst[e].lnk,price:primitiveData.prdLst[e].price.amt,img:primitiveData.prdLst[e].img};t.push(a)}return t},adFilter=function(){var t=[];if(!primitiveData.adLst)return t
;for(var e=0;e<primitiveData.adLst.length&&(void 0!=primitiveData.adLst[e].alt&&void 0!=primitiveData.adLst[e].img&&void 0!=primitiveData.adLst[e].lnk);e++){var a={title:primitiveData.adLst[e].alt,url:primitiveData.adLst[e].lnk,img:primitiveData.adLst[e].img};t.push(a)}return t},resultArray=[]
;if(0==tabFilter().length||0==calendarFilter().length||0==productFilter().length)return;return resultArray.push(tabFilter()),resultArray.push(calendarFilter()),resultArray.push(productFilter()),resultArray.push(adFilter()),resultArray}catch(t){throw t}},animate=function(t,e,a){var i=this
;this._containerDom=t,this._leftBtnDom=e,this._rightBtnDom=a,this.galleryWidth=t.children[0].offsetWidth,this._scrollNumber=0,this.prettyScroll=function(t,e){try{
var a=e||++this._scrollNumber,n=i._containerDom,r=n.scrollWidth,o=""==n.style.left?0:Number(n.style.left.replace("px","")),s=void 0===t?o:t;if(a!==i._scrollNumber)return;if(0==o&&s==i.galleryWidth)return
;if(0==s?this._leftBtnDom.style.display="none":r-Math.abs(s)==i.galleryWidth&&(this._rightBtnDom.style.display="none"),Math.abs(s)>r-i.galleryWidth&&(s=-(r-i.galleryWidth)),Math.abs(s-o)<=10)return n.style.left=s+"px";n.style.left=s>o?o+10+"px":o-10+"px",setTimeout(function(){i.prettyScroll(s,a)},8)
}catch(t){throw t}},e.onclick=function(){var t=i._containerDom.children[0].offsetWidth,e=""==i._containerDom.style.left?0:Number(i._containerDom.style.left.replace("px",""));i.prettyScroll(e+t),a.style.display="block"},a.onclick=function(){
var t=i._containerDom.children[0].offsetWidth,a=""==i._containerDom.style.left?0:Number(i._containerDom.style.left.replace("px",""));i.prettyScroll(a-t),e.style.display="block"},function(t){for(var e=t.childNodes.length;e-- >0;)3===t.childNodes[e].nodeType&&t.removeChild(t.childNodes[e])}(t)
},createCalendar=function(){try{var t,e,a=holidayList,i=function(t){var e,i=function(t){var e=t,i={dateType:"ordinary",dateDisplay:"",datePlace:"",datePrice:"",dateUrl:""};return 1!=function(t){for(var e=!1,a=(t=t.formatST("yyyy-MM-dd"),
void 0==stcGlobal.dataSource[1]?stcGlobal.dataSource.caleLst:stcGlobal.dataSource[1]),n=0;n<a.length;n++)if(t==a[n].date.substr(0,a[n].date.length-9)){i.dateType="sale",i.dateDisplay=a[n].date,i.datePlace=a[n].acName,i.datePrice=a[n].price,i.dateUrl=a[n].url,e=!0;break}return e}(e)&&function(t){
for(var e=t.formatST("yyyy-MM-dd"),n=0;n<a.length;n++){for(var r=0;r<a[n].dates.length;r++)if(e==a[n].dates[r]){i.dateType="holiday",i.dateDisplay=a[n].name,!0;break}if("holiday"==i.dateType)break}}(e),i}(t);switch(i.dateType){case"sale":
e=jsHelper.strToDom(template.specialDateDom.format(t.getDate(),i.dateUrl,t.getMonth()+1+"月"+t.getDate()+"日",i.datePlace,i.datePrice));break;case"holiday":e=jsHelper.strToDom(template.holidayDateDom.format(i.dateDisplay));break;default:
e=1==t.getDate()?jsHelper.strToDom(template.holidayDateDom.format(t.getMonth()+1+"月1日")):jsHelper.strToDom(template.ordinaryDateDom.format(t.getDate()))}return e},n=function(e){for(var a=e.getDay(),n=jsHelper.strToDom(template.calendarDates),r=7==a?0:a,o=0;o<r;o++){
var s=jsHelper.strToDom(template.emptyDateDom);n.appendChild(s)}for(var d=0;d<=29;d++,e=e.dateAdd("d",1)){var l=i(e);n.appendChild(l)}var c=jsHelper.strToDom(template.gallery);c.appendChild(n);var p=jsHelper.strToDom(template.calendarBackImg.format(t));return c.appendChild(p),c},r=function(t,e,a){
void 0==e&&new Date;for(var i=0;i<a;i++,e=e.dateAdd("m",1))t.appendChild(n(e))};return{externalLoadGalleries:r,loadCalendar:function(a){e=stcGlobal.dataSource[1],t=a;var i=jsHelper.strToDom(template.galleryContainer);r(i,new Date,3);var n=jsHelper.strToDom(template.calendarContainer)
;return n.appendChild(i),n}}}catch(t){throw t}}(),createProAd={loadProduct:function(){var t=[],e=stcGlobal.dataSource[2];if(!e||0==e.length)return null;for(var a=0;a<e.length;a++){var i=jsHelper.strToDom(template.productItem.format(e[a].url,e[a].img,e[a].title,e[a].price,e[a].title));t.push(i)}
return t},loadAD:function(){var t=stcGlobal.dataSource[3][0];if(!t)return null;return jsHelper.strToDom(template.adItem.format(t.url,t.img,t.title))}},createTab=function(){try{return{loadTab:function(t){for(var e=jsHelper.strToDom(template.tabChildrenContainer),a=0;a<t.length;a++){
var i=jsHelper.strToDom(template.tabChild.format(t[a].tabId,t[a].unClickImg,t[a].tabId+"_img",t[a].requestParam));i.onclick=function(){___destCityPY=this.getAttribute("pinyin"),HM_MainArea_Flight.prototype._func.request(!1,bizCallBack)},i.onmouseover=function(){
var t=stcGlobal.dataSource[0][this.id.substr(3,1)];"false"!=this.getAttribute("chosen")&&null!=this.getAttribute("chosen")||(document.getElementById(t.tabId+"_img").src=t.clickedImg)},i.onmouseout=function(){var t=stcGlobal.dataSource[0][this.id.substr(3,1)]
;"false"!=this.getAttribute("chosen")&&null!=this.getAttribute("chosen")||(document.getElementById(t.tabId+"_img").src=t.unClickImg)},e.appendChild(i)}var n=jsHelper.strToDom(template.tabContainer);return n.appendChild(e),n}}}catch(t){throw t}}(),bizCallBack=function(t){
var e=stcGlobal.dataSource[0][t.id.substr(3,1)];if("false"==t.getAttribute("chosen")||null==t.getAttribute("chosen")){stcGlobal.status="waitLoading"
;for(var a=0;a<stcGlobal.dataSource[0].length;a++)stcGlobal.dataSource[0][a].tabId!=this.id&&(document.getElementById(stcGlobal.dataSource[0][a].tabId+"_img").src=stcGlobal.dataSource[0][a].unClickImg,document.getElementById(stcGlobal.dataSource[0][a].tabId).setAttribute("chosen","false"))
;if(document.getElementById(e.tabId+"_img").src=e.clickedImg,t.setAttribute("chosen","true"),null==document.getElementById("calendarContainer")){var i=createCalendar.loadCalendar(e.bigImg);document.getElementById("leftContainer").appendChild(i),
animate(document.getElementById("galleryContainer"),document.getElementById("btnPrev"),document.getElementById("btnNext")),document.getElementById("btnPrev").style.display="none",stcGlobal.status="success"}else{(i=document.getElementById("calendarContainer")).parentNode.removeChild(i)
;var n=createCalendar.loadCalendar(e.bigImg);document.getElementById("leftContainer").appendChild(n),animate(document.getElementById("galleryContainer"),document.getElementById("btnPrev"),document.getElementById("btnNext")),document.getElementById("btnPrev").style.display="none",
stcGlobal.status="success"}for(var r=0,o=0;o<document.getElementById("galleryContainer").children.length;o++)r+=document.getElementById("galleryContainer").children[o].offsetWidth;document.getElementById("galleryContainer").style.cssText="width:"+r+"px"
;for(var s=createProAd.loadProduct();document.getElementById("productContainer").hasChildNodes();)document.getElementById("productContainer").removeChild(document.getElementById("productContainer").lastChild);if(s)for(a=0;a<s.length;a++)document.getElementById("productContainer").appendChild(s[a])
;var d=createProAd.loadAD();d&&document.getElementById("productContainer").appendChild(d)}};return{build:function(t,e){var a=dataFilter(e);{if(void 0!=a&&4==a.length){stcGlobal.dataSource=a;var i=jsHelper.strToDom(template.leftContainer),n=createTab.loadTab(a[0]);i.appendChild(n)
;var r=jsHelper.strToDom(template.stContainer);r.appendChild(i);var o=document.getElementById("matrixContainer");o.appendChild(r);var s=jsHelper.strToDom(template.productContainer);return o.appendChild(s),t.appendChild(o),o}stcGlobal.status="fail"}},show:bizCallBack,refresh:function(t){
var e=dataFilter(t);void 0!=e&&4==e.length?stcGlobal.dataSource=e:stcGlobal.status="fail"},singleRefresh:function(t){if(void 0!=t&&null!=t&&0!=t.length){for(var e=document.getElementById("galleryContainer").childNodes,a=0;a<3;a++)document.getElementById("galleryContainer").removeChild(e[0])
;var i=dataFilter(t);void 0!=i&&4==i.length?(stcGlobal.dataSource=i,createCalendar.externalLoadGalleries($("#galleryContainer")[0],new Date,3)):stcGlobal.status="fail"}}}}(),formatHTML:function(t,e){var a;if(0==$(".mod.flightC>div>div[idx='"+___tabId+"']").length){
if(a=$($(".mod.flightC>div>div[idx='1']")[0].cloneNode(!0)),$.browser.isIE7||$.browser.isIE8){a.find("ul[class='inner-tabs-nav']").remove();var i=document.createElement("UL");i.className="inner-tabs-nav",$(i).appendTo(a.find(".product-hd"))}a.attr("idx",___tabId)
}else a=$(".mod.flightC>div>div[idx='"+___tabId+"']");var n={tabItem:'<li><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',tabItemCur:'<li class="active"><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tab7:'<li class="dropdown-li">\t\t\t\t \t\t\t        <div class="dropdown"><a href="javascript:void(0);" class="dropdown-toggle dropdown-toggle_border">更多<span class="caret"></span></a>\t\t\t\t \t\t\t        <div class="dropdown-cont"><div class="dropdown-menu-list">{$a7}</div></div></div></li>',
tab7Item:'<a href="{$url}" pinyin="{$pinyin}">{$name}</a>',
prdItemC:'<div class="product-item"><a href="{$url}" target="_blank"><p class="item-name">{$from} <i class="{$style1}"></i> {$to}</p><p class="item-info"><span class="date">{$date}</span></p><p class="item-info">{$price}<span class="button  button-yellow">立抢</span></p></a></div>',
prdItemB:'<div class="product-item"><a href="{$url}" target="_blank"><p class="item-name">{$from} <i class="{$style1}"></i> {$to}</p><p class="item-info"><span class="date">{$date}</span>{$price}</p></a></div>',
adItem:'<div class="extra-item" title="{$title}"><a href="{$url}" target="_blank"><p class="extra-thumbnail"><img src="{$img}" alt="{$title}"></p></a></div>'};if(t){for(var r=[],o=[],s=0,d=e.tabLst.length;s<d;s++)0!==s?s>=7?o[o.length]=n.tab7Item.replaceWith({pinyin:e.tabLst[s].pinyin,
name:e.tabLst[s].tabNme,url:e.tabLst[s].lnk?e.tabLst[s].lnk:"javascript:void(0);"}):r[r.length]=n.tabItem.replaceWith({pinyin:e.tabLst[s].pinyin,name:e.tabLst[s].tabNme,url:e.tabLst[s].lnk?e.tabLst[s].lnk:"javascript:void(0);"}):r[0]=n.tabItemCur.replaceWith({pinyin:e.tabLst[s].pinyin,
name:e.tabLst[s].tabNme,url:e.tabLst[s].lnk?e.tabLst[s].lnk:"javascript:void(0);"});var l=n.tab7.replaceWith({a7:o.join("")}),c=$(a).find("ul[class='inner-tabs-nav']");o.length>0?$(c).html(r.join("")+l):$(c).html(r.join("")),___groupIdX=$(c).find("a:eq(0)").attr("pinyin")}var p=[];for(s=0,
d=e.caleLst.length;s<d;s++){var m=n.prdItemC;p[p.length]=m.replaceWith({name:e.caleLst[s].nme,url:e.caleLst[s].url,price:0==e.caleLst[s].price.amt?'<span class="price no-price">实时计价</span>':'<span class="price"><dfn>¥</dfn>'+e.caleLst[s].price.amt+'<i class="price_info">起</i></span>',
from:e.caleLst[s].dcNme,to:e.caleLst[s].acNme,date:e.caleLst[s].dateTxt,style1:"domestic"==___tabId?"icon icon-single":"icon icon-round"})}var u;if(null!=e.exLnk&&""!=e.exLnk&&(e.exNme,u=e.exLnk),$(a).find("a[class='linked-more']").attr("href",u),e.adLst){for(s=0,
d=e.adLst.length;s<d;s++)if(""!=e.adLst[s].alt){p[p.length]=n.adItem.replaceWith({name:e.adLst[s].alt,title:e.adLst[s].alt,img:e.adLst[s].img,url:e.adLst[s].lnk});break}}else $(a).find("div[class='product-bd']>div").addClass("inner-tab-panel_noextra")
;$(a).find("div[class='product-bd']>div").html(p.join("")),a[0].className="mod-bd-panel mod-bd-panel_flightC",$(a).appendTo($(".mod.flightC .mod-bd")),a.show()},getABResult:function(){var t=$("#ab_testing_tracker").value()
;return-1!=t.indexOf("150813_ind_fly:B")?"B":-1!=t.indexOf("150813_ind_fly:C")?"C":"A"}}},$.mod.reg(cls)}catch(t){Ctrip.Util.log(t)}}(cQuery)),cQuery.run(function(t){function e(t,e){this.init(e)}try{var a={name:"HM_MainArea_Car",version:"1.0",init:function(){},uninit:function(){},module:e},i={
loadingMask:"<div class='onloading'></div>",defaultTabId:0},n=0,r=-1,o=Ctrip.Util.PageConfig.url.carAjaxBI,s={};e.prototype={init:function(a){this.conf=this._setConf(a),n=this.conf.defaultTabId,s.msg="HM_MainArea_Car_RemoteDataErr",s.method=e.prototype._func.retry,
t(".mod.car .mod-bd").addClass("onloading"),this._event.bigTab(),this._event.unTabtab(),Ctrip.Util.asynScrollLoad({defObj:".mod.car",defHeight:0,delayFunc:this._delayCall})},_setConf:function(e){return t.extend(!0,{},i,e||{})},_delayCall:function(){e.prototype._func.request(!0,!0)},_event:{
bigTab:function(){for(var a=t(".mod.car>div>h2>span"),i=0,r=a.length;i<r;i++)!function(r){var o=i;Ctrip.Util.addEventHandler(t(a[o])[0],"click",function(i){Ctrip.Singleton.setMetric("hp_carsection",o),t(".mod.car>div>h2>span[class='current']").removeClass("current"),t(a[o]).addClass("current"),
n=t(a[o]).attr("idx");var r=t(".mod.car>div>div[idx='"+t(a[o]).attr("idx")+"']");t(".mod.car>div>div.mod-bd-panel").hide(),0!=r.length&&r.find("div>div>ul>li").length>0?t(r).show():e.prototype._func.request(!0)})}()},tabtab:function(a){function i(t){
Ctrip.Util.addEventHandler(t[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement;if("dropdown-toggle dropdown-toggle_border"!==i.className){if("A"===i.nodeName){if("dropdown-menu-list"===i.parentNode.className){Ctrip.Util.toggleClass(i.parentNode.parentNode.parentNode,"open")
;i.parentNode.parentNode.parentNode;t.find("li").removeClass("active");var n=(s=t.find("li[class!='dropdown-li']>a"))[s.length-1],o=i.cloneNode(!0);return n.parentNode.replaceChild(o,n),o.parentNode.className="active",i.parentNode.replaceChild(n,i),r=i.getAttribute("pinyin"),
void e.prototype._func.request(!1)}r=i.getAttribute("pinyin");var s;(s=t.find("li")).removeClass("active"),i.parentNode.className="active",e.prototype._func.request(!1)}}else Ctrip.Util.toggleClass(i.parentNode,"open")})}
i(a?t(a).find("ul[class='inner-tabs-nav']"):t(".mod.car>.mod-bd").find("ul[class='inner-tabs-nav']"))},unTabtab:function(){Ctrip.Util.addEventHandler(t(document)[0],"click",function(e){if("dropdown-toggle dropdown-toggle_border"!=((e=e||window.event).target||e.srcElement).className){
var a=t(".mod.car>div>div[idx='"+n+"']").find("ul[class='inner-tabs-nav']>li[class='dropdown-li']>div")[0];null!=a&&"dropdown open"===a.className&&(a.className="dropdown")}})}},_func:{retry:function(a){t.loader.js(Ctrip.Util.PageConfig.url.staticJson,{type:"text/javascript",charset:"utf-8",async:!0,
cache:!0,onload:function(){var a=Ctrip.Util.PageConfig.staticData;e.prototype._func.formatHTML(!0,a.car),e.prototype._event.tabtab(t(".mod.car>div>div[idx='"+n+"']")),t(".mod.car .mod-bd").removeClass("onloading")}})},request:function(a,i){var d=this,l=o+"?ch="+n+"&gp="+r
;t(".mod.car .mod-bd").addClass("onloading"),t.ajax(l,{cache:!0,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(r){try{var o=t.parseJSON(r.responseText);d.formatHTML(a,o),a&&e.prototype._event.tabtab(t(".mod.car>div>div[idx='"+n+"']")),t(".mod.car .mod-bd").removeClass("onloading")
}catch(t){i&&Ctrip.Util.raiseError(s)}},onerror:function(t){i&&Ctrip.Util.raiseError(s)}})},formatHTML:function(e,a){var i;if(0==t(".mod.car>div>div[idx='"+n+"']").length){if(i=t(t(".mod.car>div>div[idx='0']")[0].cloneNode(!0)),t.browser.isIE7||t.browser.isIE8){
i.find("ul[class='inner-tabs-nav']").remove();var o=document.createElement("UL");o.className="inner-tabs-nav",t(o).appendTo(i.find(".product-hd"))}t(".mod.car>div>div[idx='0']").hide(),i.attr("idx",n)}else i=t(".mod.car>div>div[idx='"+n+"']");var s={
tabItem:'<li><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',tabItemCur:'<li class="active"><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tab7:'<li class="dropdown-li">\t\t\t\t \t\t\t        <div class="dropdown"><a href="javascript:void(0);" class="dropdown-toggle dropdown-toggle_border">更多<span class="caret"></span></a>\t\t\t\t \t\t\t        <div class="dropdown-cont"><div class="dropdown-menu-list">{$a7}</div></div></div></li>',
tab7Item:'<a href="{$url}" pinyin="{$pinyin}">{$name}</a>',prdItem:'<div class="product-item" title="{$title}"><a href="{$url}" target="_blank"><p class="item-thumbnail"><img src="{$img}" alt="{$title}"/></p><p class="item-name">{$name}</p><p class="item-info">{$price}{$subt}</p></a></div>',
hotLinks:'<DD><span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span></DD>',hotLinksShort:'<span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span>'};if(e){
for(var d=[],l=[],c=0,p=a.tabs.length;c<p;c++)0!==c?c>=7?l[l.length]=s.tab7Item.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[d.length]=s.tabItem.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,
url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[0]=s.tabItemCur.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"});var m=s.tab7.replaceWith({a7:l.join("")}),u=t(i).find("ul[class='inner-tabs-nav']")
;l.length>0?t(u).html(d.join("")+m):t(u).html(d.join("")),r=t(u).find("a:eq(0)").attr("pinyin")}var h=[];for(c=0,p=a.prdLst.length;c<p;c++)h[h.length]=s.prdItem.replaceWith({name:a.prdLst[c].nme,title:a.prdLst[c].nme,img:a.prdLst[c].img,url:a.prdLst[c].lnk,
price:0==a.prdLst[c].price.amt?'<span class="price no-price">实时计价</span>':'<span class="price"><dfn>¥</dfn>'+a.prdLst[c].price.amt+'<i class="price_info">起</i></span>',subt:a.prdLst[c].subNme?'<span class="item-type">'+a.prdLst[c].subNme+"</span>":""})
;t(i).find("div[class='product-bd']>div").html(h.join(""));var f,g;null!=a.exLnk&&""!=a.exLnk?(f=a.exNme,g=a.exLnk):4==n?(f="更多国际租车",g="http://car.ctrip.com/hwzijia#ctm_ref=chp_var_txt"):3==n?(f="更多国内租车",g="http://car.ctrip.com/zijia#ctm_ref=chp_var_txt"):1==n?(f="更多国内接送机",
g="http://car.ctrip.com/daijia#ctm_ref=chp_var_txt"):2==n?(f="更多国际接送机",g="http://car.ctrip.com/daijia/o#ctm_ref=chp_var_txt"):(f="更多日租包车",g="http://car.ctrip.com/#ctm_ref=chp_var_txt"),t(i).find("a[class='linked-more']").html(f+' <i class="i_index_next"></i>'),
t(i).find("a[class='linked-more']").attr("href",g);var v,b=[];if(a.tags){v="LinearLayout"==a.tags.layout?s.hotLinks:s.hotLinksShort;for(c=0,p=a.tags.itemLst.length;c<p&&("LinearLayout"!=a.tags.layout||5!=c)&&("RelativeLayout"!=a.tags.layout||20!=c);c++)b[b.length]=v.replaceWith({
name:a.tags.itemLst[c].nme,url:a.tags.itemLst[c].lnk,hot:"Y"===a.tags.itemLst[c].isHot&&"LinearLayout"!=a.tags.layout?"<span class='icon_hot'></span>":""})}var y;a.tags.nme=null!=a.tags.nme&&""!=a.tags.nme?a.tags.nme:t(i).find(".entrance>dl>dt").text(),
"LinearLayout"==a.tags.layout?(t(i).find(".entrance>dl")[0].className="keyword-long",y=b.join("")):y="<DD>"+b.join("")+"</DD>",t(i).find(".entrance>dl").html("<dt>"+a.tags.nme+"</dt>"+y),i.show(),t(i).appendTo(t(".mod.car .mod-bd"));var _;switch(n){case"4":_="sni.hcar";break;case"3":_="snd.hcar"
;break;case"1":_="snd.lb";break;case"2":_="sni.lb";break;case"0":_="sn.drc"}Ctrip.Singleton.setStatistic(_,"prd",t(i).find(".product-item a")),Ctrip.Singleton.setStatistic(_,"more",t(i).find(".linked-more")),Ctrip.Singleton.setStatistic(_,"tag1",t(i).find(".entrance dl:eq(0) a"))},
lazyLoad:function(){for(var e=t(".mod.car")[0].getElementsByTagName("img"),a=0,i=e.length;a<i;a++)e[a].getAttribute("_src")&&(e[a].src=e[a].getAttribute("_src"))}}},t.mod.reg(a)}catch(t){Ctrip.Util.log(t)}}(cQuery)),cQuery.run(function(t){function e(t,e){this.init(e)}try{var a={
name:"HM_MainArea_TTD",version:"1.0",init:function(){},uninit:function(){},module:e},i={loadingMask:"<div class='onloading'></div>",defaultTabId:0},n=9001,r=-1,o=Ctrip.Util.PageConfig.url.tddAjaxBI,s={};e.prototype={init:function(a){this.conf=this._setConf(a),n=this.conf.defaultTabId,
s.msg="HM_MainArea_TTD_RemoteDataErr",s.method=e.prototype._func.retry,t(".mod.play .mod-bd").addClass("onloading"),this._event.bigTab(),this._event.unTabtab(),Ctrip.Util.asynScrollLoad({defObj:".mod.play",defHeight:0,delayFunc:this._delayCall})},_setConf:function(e){return t.extend(!0,{},i,e||{})},
_delayCall:function(){e.prototype._func.request(!0,!0)},_event:{bigTab:function(){for(var a=t(".mod.play>div>h2>span"),i=0,r=a.length;i<r;i++)!function(r){var o=i;Ctrip.Util.addEventHandler(t(a[o])[0],"click",function(i){Ctrip.Singleton.setMetric("hp_localsection",o),
t(".mod.play>div>h2>span[class='current']").removeClass("current"),t(a[o]).addClass("current"),n=t(a[o]).attr("idx");var r=t(".mod.play>div>div[idx='"+t(a[o]).attr("idx")+"']");t(".mod.play>div>div.mod-bd-panel").hide(),
0!=r.length&&r.find("div>div>ul>li").length>0?t(r).show():e.prototype._func.request(!0)})}()},tabtab:function(a){function i(t){Ctrip.Util.addEventHandler(t[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement;if("dropdown-toggle dropdown-toggle_border"!==i.className){
if("A"===i.nodeName){if("dropdown-menu-list"===i.parentNode.className){Ctrip.Util.toggleClass(i.parentNode.parentNode.parentNode,"open");i.parentNode.parentNode.parentNode;t.find("li").removeClass("active");var n=(s=t.find("li[class!='dropdown-li']>a"))[s.length-1],o=i.cloneNode(!0)
;return n.parentNode.replaceChild(o,n),o.parentNode.className="active",i.parentNode.replaceChild(n,i),r=i.getAttribute("pinyin"),void e.prototype._func.request(!1)}r=i.getAttribute("pinyin");var s;(s=t.find("li")).removeClass("active"),i.parentNode.className="active",e.prototype._func.request(!1)}
}else Ctrip.Util.toggleClass(i.parentNode,"open")})}i(a?t(a).find("ul[class='inner-tabs-nav']"):t(".mod.play>.mod-bd").find("ul[class='inner-tabs-nav']"))},unTabtab:function(){Ctrip.Util.addEventHandler(t(document)[0],"click",function(e){
if("dropdown-toggle dropdown-toggle_border"!=((e=e||window.event).target||e.srcElement).className){var a=t(".mod.play>div>div[idx='"+n+"']").find("ul[class='inner-tabs-nav']>li[class='dropdown-li']>div")[0];null!=a&&"dropdown open"===a.className&&(a.className="dropdown")}})}},_func:{
retry:function(a,i){t.loader.js(Ctrip.Util.PageConfig.url.staticJson,{type:"text/javascript",charset:"utf-8",async:!0,cache:!0,onload:function(){var a=Ctrip.Util.PageConfig.staticData;e.prototype._func.formatHTML(!0,a.ttd),e.prototype._event.tabtab(t(".mod.play>div>div[idx='"+n+"']")),
t(".mod.play .mod-bd").removeClass("onloading")}})},request:function(a,i){var d=this,l=o+"?ch="+n+"&gp="+r;t(".mod.play .mod-bd").addClass("onloading"),t.ajax(l,{cache:!0,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(r){try{var o=t.parseJSON(r.responseText);d.formatHTML(a,o),
a&&e.prototype._event.tabtab(t(".mod.play>div>div[idx='"+n+"']")),t(".mod.play .mod-bd").removeClass("onloading")}catch(t){i&&Ctrip.Util.raiseError(s)}},onerror:function(t){i&&Ctrip.Util.raiseError(s)}})},formatHTML:function(e,a){var i;if(0==t(".mod.play>div>div[idx='"+n+"']").length){
if(i=t(t(".mod.play>div>div[idx='9001']")[0].cloneNode(!0)),t.browser.isIE7||t.browser.isIE8){i.find("ul[class='inner-tabs-nav']").remove();var o=document.createElement("UL");o.className="inner-tabs-nav",t(o).appendTo(i.find(".product-hd"))}i.attr("idx",n)}else i=t(".mod.play>div>div[idx='"+n+"']")
;var s={tabItem:'<li><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',tabItemCur:'<li class="active"><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tab7:'<li class="dropdown-li">\t\t\t\t \t\t\t        <div class="dropdown"><a href="javascript:void(0);" class="dropdown-toggle dropdown-toggle_border">更多<span class="caret"></span></a>\t\t\t\t \t\t\t        <div class="dropdown-cont"><div class="dropdown-menu-list">{$a7}</div></div></div></li>',
tab7Item:'<a href="{$url}" pinyin="{$pinyin}">{$name}</a>',prdItem:'<div class="product-item" title="{$title}"><a href="{$url}" target="_blank"><p class="item-thumbnail"><img src="{$img}" alt="{$title}"/></p><p class="item-name">{$name}</p><p class="item-info">{$price}{$subt}</p></a></div>',
hotLinksShort:'<span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span>',hotLinks:'<DD><span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span></DD>'};if(e){
for(var d=[],l=[],c=0,p=a.tabs.length;c<p;c++)0!==c?c>=7?l[l.length]=s.tab7Item.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[d.length]=s.tabItem.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,
url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[0]=s.tabItemCur.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"});var m=s.tab7.replaceWith({a7:l.join("")}),u=t(i).find("ul[class='inner-tabs-nav']")
;l.length>0?t(u).html(d.join("")+m):t(u).html(d.join("")),r=t(u).find("a:eq(0)").attr("pinyin")}var h=[];for(c=0,p=a.prdLst.length;c<p;c++)h[h.length]=s.prdItem.replaceWith({name:a.prdLst[c].nme,title:a.prdLst[c].nme,img:a.prdLst[c].img,url:a.prdLst[c].lnk,
price:0==a.prdLst[c].price.amt?'<span class="price no-price">实时计价</span>':'<span class="price"><dfn>¥</dfn>'+a.prdLst[c].price.amt+'<i class="price_info">起</i></span>',subt:a.prdLst[c].subNme?'<span class="item-type">'+a.prdLst[c].subNme+"</span>":""})
;t(i).find("div[class='product-bd']>div").html(h.join(""));var f,g;null!=a.exLnk&&""!=a.exLnk?(f=a.exNme,g=a.exLnk):(f="更多当地玩乐",g="http://huodong.ctrip.com/"),t(i).find("a[class='linked-more']").html(f+' <i class="i_index_next"></i>'),t(i).find("a[class='linked-more']").attr("href",g);var v,b=[]
;if(a.tags){v="LinearLayout"==a.tags.layout?s.hotLinks:s.hotLinksShort;for(c=0,p=a.tags.itemLst.length;c<p&&("LinearLayout"!=a.tags.layout||5!=c)&&("RelativeLayout"!=a.tags.layout||20!=c);c++)b[b.length]=v.replaceWith({name:a.tags.itemLst[c].nme,url:a.tags.itemLst[c].lnk,
hot:"Y"===a.tags.itemLst[c].isHot&&"LinearLayout"!=a.tags.layout?"<span class='icon_hot'></span>":""})}var y;a.tags.nme=null!=a.tags.nme&&""!=a.tags.nme?a.tags.nme:t(i).find(".entrance>dl>dt").text(),"LinearLayout"==a.tags.layout?(t(i).find(".entrance>dl")[0].className="keyword-long",
y=b.join("")):y="<DD>"+b.join("")+"</DD>",t(i).find(".entrance>dl").html("<dt>"+a.tags.nme+"</dt>"+y),i.show(),t(i).appendTo(t(".mod.play .mod-bd"));var _;switch(n){case"9001":_="sni.play";break;case"9002":_="snd.play"}Ctrip.Singleton.setStatistic(_,"prd",t(i).find(".product-item a")),
Ctrip.Singleton.setStatistic(_,"more",t(i).find(".linked-more")),Ctrip.Singleton.setStatistic(_,"tag1",t(i).find(".entrance dl:eq(0) a"))},lazyLoad:function(){
for(var e=t(".mod.play")[0].getElementsByTagName("img"),a=0,i=e.length;a<i;a++)e[a].getAttribute("_src")&&(e[a].src=e[a].getAttribute("_src"))}}},t.mod.reg(a)}catch(t){Ctrip.Util.log(t)}}(cQuery)),cQuery.run(function(t){function e(t,e){this.init(e)}try{var a={name:"HM_MainArea_SP",version:"1.0",
init:function(){},uninit:function(){},module:e},i={loadingMask:"<div class='onloading'></div>",defaultTabId:0},n=0,r=-1,o=Ctrip.Util.PageConfig.url.spAjaxBI,s={};e.prototype={init:function(a){this.conf=this._setConf(a),n=this.conf.defaultTabId,s.msg="HM_MainArea_SP_RemoteDataErr",
s.method=e.prototype._func.retry,t(".mod.buy .mod-bd").addClass("onloading"),this._event.bigTab(),this._event.unTabtab(),Ctrip.Util.asynScrollLoad({defObj:".mod.buy",defHeight:0,delayFunc:this._delayCall})},_setConf:function(e){return t.extend(!0,{},i,e||{})},_delayCall:function(){
e.prototype._func.request(!0,!0)},_event:{bigTab:function(){for(var a=t(".mod.buy>div>h2>span"),i=0,r=a.length;i<r;i++)!function(r){var o=i;Ctrip.Util.addEventHandler(t(a[o])[0],"click",function(){Ctrip.Singleton.setMetric("hp_shopsection",o),
t(".mod.buy>div>h2>span[class='current']").removeClass("current"),t(a[o]).addClass("current"),n=t(a[o]).attr("idx");var i=t(".mod.buy>div>div[idx='"+t(a[o]).attr("idx")+"']");t(".mod.buy>div>div.mod-bd-panel").hide(),
0!=i.length&&i.find("div>div>ul>li").length>0?t(i).show():e.prototype._func.request(!0)})}()},tabtab:function(a){function i(t){Ctrip.Util.addEventHandler(t[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement;if("dropdown-toggle dropdown-toggle_border"!==i.className){
if("A"===i.nodeName){if("dropdown-menu-list"===i.parentNode.className){Ctrip.Util.toggleClass(i.parentNode.parentNode.parentNode,"open");i.parentNode.parentNode.parentNode;t.find("li").removeClass("active");var n=(s=t.find("li[class!='dropdown-li']>a"))[s.length-1],o=i.cloneNode(!0)
;return n.parentNode.replaceChild(o,n),o.parentNode.className="active",i.parentNode.replaceChild(n,i),r=i.getAttribute("pinyin"),void e.prototype._func.request(!1)}r=i.getAttribute("pinyin");var s;(s=t.find("li")).removeClass("active"),i.parentNode.className="active",e.prototype._func.request(!1)}
}else Ctrip.Util.toggleClass(i.parentNode,"open")})}i(a?t(a).find("ul[class='inner-tabs-nav']"):t(".mod.buy>.mod-bd").find("ul[class='inner-tabs-nav']"))},unTabtab:function(){Ctrip.Util.addEventHandler(t(document)[0],"click",function(e){
if("dropdown-toggle dropdown-toggle_border"!=((e=e||window.event).target||e.srcElement).className){var a=t(".mod.buy>div>div[idx='"+n+"']").find("ul[class='inner-tabs-nav']>li[class='dropdown-li']>div")[0];null!=a&&"dropdown open"===a.className&&(a.className="dropdown")}})}},_func:{retry:function(){
t.loader.js(Ctrip.Util.PageConfig.url.staticJson,{type:"text/javascript",charset:"utf-8",async:!0,cache:!0,onload:function(){var a=Ctrip.Util.PageConfig.staticData;e.prototype._func.formatHTML(!0,a.shopping),e.prototype._event.tabtab(t(".mod.buy>div>div[idx='"+n+"']")),
t(".mod.buy .mod-bd").removeClass("onloading")}})},request:function(a,i){var d=this,l=o+"?ch="+n+"&gp="+r;t(".mod.buy .mod-bd").addClass("onloading"),t.ajax(l,{cache:!0,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(r){try{var o=t.parseJSON(r.responseText);d.formatHTML(a,o),
a&&e.prototype._event.tabtab(t(".mod.buy>div>div[idx='"+n+"']")),t(".mod.buy .mod-bd").removeClass("onloading")}catch(t){i&&Ctrip.Util.raiseError(s)}},onerror:function(t){i&&Ctrip.Util.raiseError(s)}})},formatHTML:function(e,a){var i;if(0==t(".mod.buy>div>div[idx='"+n+"']").length){
if(i=t(t(".mod.buy>div>div[idx='0']")[0].cloneNode(!0)),t.browser.isIE7||t.browser.isIE8){i.find("ul[class='inner-tabs-nav']").remove();var o=document.createElement("UL");o.className="inner-tabs-nav",t(o).appendTo(i.find(".product-hd"))}i.attr("idx",n)}else i=t(".mod.buy>div>div[idx='"+n+"']")
;var s={tabItem:'<li><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',tabItemCur:'<li class="active"><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tab7:'<li class="dropdown-li">                                    <div class="dropdown"><a href="javascript:void(0);" class="dropdown-toggle dropdown-toggle_border">更多<span class="caret"></span></a>                                    <div class="dropdown-cont"><div class="dropdown-menu-list">{$a7}</div></div></div></li>',
tab7Item:'<a href="{$url}" pinyin="{$pinyin}">{$name}</a>',
prdItem:'<div class="product-item" title="{$title}"><a href="{$url}" target="_blank"><p class="item-thumbnail"><img src="{$img}" alt="{$title}"/></p><p class="item-name">{$name}</p><p class="item-info">{$price}<span class="item-label">{$discount}</span>{$subt}</p></a></div>',
hotLinks:'<DD><span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span></DD>',hotLinksShort:'<span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span>'};if(e){
for(var d=[],l=[],c=0,p=a.tabs.length;c<p;c++)0!==c?c>=7?l[l.length]=s.tab7Item.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[d.length]=s.tabItem.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,
url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[0]=s.tabItemCur.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"});var m=s.tab7.replaceWith({a7:l.join("")}),u=t(i).find("ul[class='inner-tabs-nav']")
;l.length>0?t(u).html(d.join("")+m):t(u).html(d.join("")),r=t(u).find("a:eq(0)").attr("pinyin")}var h=[];for(c=0,p=a.prdLst.length;c<p;c++)h[h.length]=0==n?s.prdItem.replaceWith({name:a.prdLst[c].nme,title:a.prdLst[c].nme,img:a.prdLst[c].img,url:a.prdLst[c].lnk,discount:"",
price:0==a.prdLst[c].price.amt?"":'<span class="price"><dfn>¥</dfn>'+a.prdLst[c].price.amt+'<i class="price_info">起</i></span>',subt:a.prdLst[c].subNme?'<span class="item-type">'+a.prdLst[c].subNme+"</span>":""}):s.prdItem.replaceWith({name:a.prdLst[c].nme,title:a.prdLst[c].nme,img:a.prdLst[c].img,
url:a.prdLst[c].lnk,discount:a.prdLst[c].disct?a.prdLst[c].disct:"",price:"",subt:a.prdLst[c].subNme?'<span class="item-type">'+a.prdLst[c].subNme+"</span>":""});t(i).find("div[class='product-bd']>div").html(h.join(""));var f,g;null!=a.exLnk&&""!=a.exLnk?(f=a.exNme,g=a.exLnk):0==n?(f="更多随行购",
g="http://g.ctrip.com/mall"):(f="更多全球名店",g="http://g.ctrip.com/"),t(i).find("a[class='linked-more']").html(f+' <i class="i_index_next"></i>'),t(i).find("a[class='linked-more']").attr("href",g);var v,b=[];if(a.tags){v="LinearLayout"==a.tags.layout?s.hotLinks:s.hotLinksShort;for(c=0,
p=a.tags.itemLst.length;c<p&&("LinearLayout"!=a.tags.layout||5!=c)&&("RelativeLayout"!=a.tags.layout||20!=c);c++)b[b.length]=v.replaceWith({name:a.tags.itemLst[c].nme,url:a.tags.itemLst[c].lnk,hot:"Y"===a.tags.itemLst[c].isHot&&"LinearLayout"!=a.tags.layout?"<span class='icon_hot'></span>":""})}
var y;a.tags.nme=null!=a.tags.nme&&""!=a.tags.nme?a.tags.nme:t(i).find(".entrance>dl>dt").text(),"LinearLayout"==a.tags.layout?(t(i).find(".entrance>dl")[0].className="keyword-long",y=b.join("")):y="<DD>"+b.join("")+"</DD>",t(i).find(".entrance>dl").html("<dt>"+a.tags.nme+"</dt>"+y),i.show(),
t(i).appendTo(t(".mod.buy .mod-bd"));var _;switch(n){case"0":_="gw.ap";break;case"1":_="gw.sp"}Ctrip.Singleton.setStatistic(_,"prd",t(i).find(".product-item a")),Ctrip.Singleton.setStatistic(_,"more",t(i).find(".linked-more")),Ctrip.Singleton.setStatistic(_,"tag1",t(i).find(".entrance dl:eq(0) a"))
},lazyLoad:function(){for(var e=t(".mod.buy")[0].getElementsByTagName("img"),a=0,i=e.length;a<i;a++)e[a].getAttribute("_src")&&(e[a].src=e[a].getAttribute("_src"))},showRandom:function(){(new Date).getSeconds()%2==0&&(t(".mod.buy .mod-hd span:eq(1)").insertBefore(t(".mod.buy .mod-hd span:eq(0)")),
n="1",t(".mod.buy .mod-hd span").removeClass("current"),t(".mod.buy .mod-bd-panel").hide(),t(".mod.buy .mod-hd span:eq(0)").addClass("current"))}}},t.mod.reg(a)}catch(t){Ctrip.Util.log(t)}}(cQuery)),cQuery.run(function(t){function e(t,e){this.init(e)}try{var a={name:"HM_MainArea_You",version:"1.0",
init:function(){},uninit:function(){},module:e},i={loadingMask:"<div class='onloading'></div>",defaultTabId:0},n=0,r=-1,o=Ctrip.Util.PageConfig.url.youAjaxBI,s={};e.prototype={init:function(a){this.conf=this._setConf(a),n=this.conf.defaultTabId,s.msg="HM_MainArea_You_RemoteDataErr",
s.method=e.prototype._func.retry,t(".mod.guide .mod-bd").addClass("onloading"),this._event.bigTab(),this._event.unTabtab(),Ctrip.Util.asynScrollLoad({defObj:".mod.guide",defHeight:0,delayFunc:this._delayCall})},_setConf:function(e){return t.extend(!0,{},i,e||{})},_delayCall:function(){
e.prototype._func.request(!0,!0)},_event:{bigTab:function(){for(var a=t(".mod.guide>div>h2>span"),i=0,r=a.length;i<r;i++)!function(r){var o=i;Ctrip.Util.addEventHandler(t(a[o])[0],"click",function(){Ctrip.Singleton.setMetric("hp_raiderssection",o),
t(".mod.guide>div>h2>span[class='current']").removeClass("current"),t(a[o]).addClass("current"),n=t(a[o]).attr("idx");var i=t(".mod.guide>div>div[idx='"+t(a[o]).attr("idx")+"']");t(".mod.guide>div>div.mod-bd-panel").hide(),
0!=i.length&&i.find("div>div>ul>li").length>0?t(i).show():e.prototype._func.request(!0)})}()},tabtab:function(a){function i(t){Ctrip.Util.addEventHandler(t[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement;if("dropdown-toggle dropdown-toggle_border"!==i.className){
if("A"===i.nodeName){if("dropdown-menu-list"===i.parentNode.className){Ctrip.Util.toggleClass(i.parentNode.parentNode.parentNode,"open");i.parentNode.parentNode.parentNode;t.find("li").removeClass("active");var n=(s=t.find("li[class!='dropdown-li']>a"))[s.length-1],o=i.cloneNode(!0)
;return n.parentNode.replaceChild(o,n),o.parentNode.className="active",i.parentNode.replaceChild(n,i),r=i.getAttribute("pinyin"),void e.prototype._func.request(!1)}r=i.getAttribute("pinyin");var s;(s=t.find("li")).removeClass("active"),i.parentNode.className="active",e.prototype._func.request(!1)}
}else Ctrip.Util.toggleClass(i.parentNode,"open")})}i(a?t(a).find("ul[class='inner-tabs-nav']"):t(".mod.guide>.mod-bd").find("ul[class='inner-tabs-nav']"))},unTabtab:function(){Ctrip.Util.addEventHandler(t(document)[0],"click",function(e){
if("dropdown-toggle dropdown-toggle_border"!=((e=e||window.event).target||e.srcElement).className){var a=t(".mod.guide>div>div[idx='"+n+"']").find("ul[class='inner-tabs-nav']>li[class='dropdown-li']>div")[0];null!=a&&"dropdown open"===a.className&&(a.className="dropdown")}})}},_func:{
retry:function(){t.loader.js(Ctrip.Util.PageConfig.url.staticJson,{type:"text/javascript",charset:"utf-8",async:!0,cache:!0,onload:function(){var a=Ctrip.Util.PageConfig.staticData;e.prototype._func.formatHTML(!0,a.you),e.prototype._event.tabtab(t(".mod.guide>div>div[idx='"+n+"']")),
t(".mod.guide .mod-bd").removeClass("onloading")}})},request:function(a,i){var d=this,l=o+"?ch="+n+"&gp="+r;t(".mod.guide .mod-bd").addClass("onloading"),t.ajax(l,{cache:!0,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(r){try{var o=t.parseJSON(r.responseText);d.formatHTML(a,o),
a&&e.prototype._event.tabtab(t(".mod.guide>div>div[idx='"+n+"']")),t(".mod.guide .mod-bd").removeClass("onloading")}catch(t){i&&Ctrip.Util.raiseError(s)}},onerror:function(t){i&&Ctrip.Util.raiseError(s)}})},formatHTML:function(e,a){var i;if(0==t(".mod.guide>div>div[idx='"+n+"']").length){
if(i=t(t(".mod.guide>div>div[idx='1']")[0].cloneNode(!0)),t.browser.isIE7||t.browser.isIE8){i.find("ul[class='inner-tabs-nav']").remove();var o=document.createElement("UL");o.className="inner-tabs-nav",t(o).appendTo(i.find(".product-hd"))}i.attr("idx",n)}else i=t(".mod.guide>div>div[idx='"+n+"']")
;var s={tabItem:'<li><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',tabItemCur:'<li class="active"><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tab7:'<li class="dropdown-li">\t\t\t\t \t\t\t        <div class="dropdown"><a href="javascript:void(0);" class="dropdown-toggle dropdown-toggle_border">更多<span class="caret"></span></a>\t\t\t\t \t\t\t        <div class="dropdown-cont"><div class="dropdown-menu-list">{$a7}</div></div></div></li>',
tab7Item:'<a href="{$url}" pinyin="{$pinyin}">{$name}</a>',
prdItem:'<div class="product-item"><a href="{$url}" target="_blank"><p class="item-thumbnail"><img src="{$img}" alt="{$title}"/></p><div class="item-overlay">{$avator}<p class="item-name">{$name}</p><p class="item-info" style="display:none">{$subt}</p><p class="iefix-bg"></p></div></a></div>',
hotLinks:'<DD><span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a></span></DD>',hotLinksShort:'<span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a></span>'};if(e){
for(var d=[],l=[],c=0,p=a.tabs.length;c<p;c++)0!==c?c>=7?l[l.length]=s.tab7Item.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[d.length]=s.tabItem.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,
url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"}):d[0]=s.tabItemCur.replaceWith({pinyin:a.tabs[c].pinyin,name:a.tabs[c].tabNme,url:a.tabs[c].lnk?a.tabs[c].lnk:"javascript:void(0);"});var m=s.tab7.replaceWith({a7:l.join("")}),u=t(i).find("ul[class='inner-tabs-nav']")
;l.length>0?t(u).html(d.join("")+m):t(u).html(d.join("")),r=t(u).find("a:eq(0)").attr("pinyin")}var h=[];for(c=0,p=a.prdLst.length;c<p&&(1!=n||4!=c)&&(1==n||5!=c);c++)h[h.length]=s.prdItem.replaceWith({name:a.prdLst[c].nme,title:a.prdLst[c].nme,img:a.prdLst[c].img?a.prdLst[c].img:"",
url:a.prdLst[c].lnk,avator:a.prdLst[c].profile?'<p class="avator" style="display: none;"><img src="'+a.prdLst[c].profile+'" alt=""></p>':"",subt:a.prdLst[c].moreInfo?'<span class="item-info-detail">'+a.prdLst[c].moreInfo+"</span>":""});t(i).find("div[class='product-bd']>div").html(h.join("")),
null!=a.exLnk&&""!=a.exLnk?(t(i).find("a[class='linked-more']").show(),t(i).find("a[class='linked-more']").html(a.exNme+' <i class="i_index_next"></i>'),t(i).find("a[class='linked-more']").attr("href",a.exLnk)):t(i).find("a[class='linked-more']").hide();var f,g
;if(null!=a.exLnk&&""!=a.exLnk?(f=a.exNme,g=a.exLnk):1==n?(f="更多旅行攻略",g="http://you.ctrip.com/"):2==n&&(f="更多旗舰馆",g="http://you.ctrip.com/official/"),t(i).find("a[class='linked-more']").html(f+' <i class="i_index_next"></i>'),t(i).find("a[class='linked-more']").attr("href",g),1==n){var v,b=[]
;if(a.tags){v="LinearLayout"==a.tags.layout?s.hotLinks:s.hotLinksShort;for(c=0,p=a.tags.itemLst.length;c<p&&("LinearLayout"!=a.tags.layout||5!=c)&&("RelativeLayout"!=a.tags.layout||20!=c);c++)b[b.length]=v.replaceWith({name:a.tags.itemLst[c].nme,url:a.tags.itemLst[c].lnk,
hot:"Y"===a.tags.itemLst[c].isHot&&"LinearLayout"!=a.tags.layout?"<span class='icon_hot'></span>":""})}var y;a.tags.nme=null!=a.tags.nme&&""!=a.tags.nme?a.tags.nme:t(i).find(".entrance>dl>dt").text(),"LinearLayout"==a.tags.layout?(t(i).find(".entrance>dl")[0].className="keyword-long",
y=b.join("")):y="<DD>"+b.join("")+"</DD>",t(i).find(".entrance>dl").html("<dt>"+a.tags.nme+"</dt>"+y)}else t(i).find("div[class='entrance']").remove(),t(i).addClass("mod-bd-panel_noentry");t(i).find(".product-item").bind("mouseover",function(){t(this).find(".item-info").slideDown(),
t(this).find(".avator").fadeIn(800)}),t(i).find(".product-item").bind("mouseleave",function(){t(this).find(".item-info").slideUp(),t(this).find(".avator").fadeOut()}),i.show(),t(i).appendTo(t(".mod.guide .mod-bd"));var _;switch(n){case"1":_="you.dy";break;case"2":_="you.store"}
Ctrip.Singleton.setStatistic(_,"prd",t(i).find(".product-item a")),Ctrip.Singleton.setStatistic(_,"more",t(i).find(".linked-more")),Ctrip.Singleton.setStatistic(_,"tag1",t(i).find(".entrance dl:eq(0) a"))},lazyLoad:function(){
for(var e=t(".mod.guide")[0].getElementsByTagName("img"),a=0,i=e.length;a<i;a++)e[a].getAttribute("_src")&&(e[a].src=e[a].getAttribute("_src"))}}},t.mod.reg(a)}catch(t){Ctrip.Util.log(t)}}(cQuery)),cQuery.run(function(t){function e(t,e){this.init(e)}try{var a={
HotelDomestic:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$tocity}酒店">{$tocity}酒店</p><p class="item-info">{$starttime}{$endtime}</p><p class="item-info">{$keywords}</p></a></li>',
HotelInternational:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$tocity}酒店">{$tocity}酒店</p><p class="item-info">{$starttime}{$endtime}</p><p class="item-info">{$keywords}</p></a></li>',
FlightDomestic:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$fromcity}&nbsp;-&nbsp;{$tocity}（{$fltway}）">{$fromcity}&nbsp;-&nbsp;{$tocity}（{$fltway}）</p><p class="item-info">{$starttime}{$endtime}</p><p class="item-info">{$fltspace}</p></a></li>',
FlightInternational:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$fromcity}&nbsp;-&nbsp;{$tocity}（{$fltway}）">{$fromcity}&nbsp;-&nbsp;{$tocity}（{$fltway}）</p><p class="item-info">{$starttime}{$endtime}</p><p class="item-info">{$fltspace}</p></a></li>',
Train:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$fromcity}&nbsp;-&nbsp;{$tocity}">{$fromcity}&nbsp;-&nbsp;{$tocity}</p><p class="item-info">{$starttime}</p></a></li>',
QiChe:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$fromcity}&nbsp;-&nbsp;{$tocity}">{$fromcity}&nbsp;-&nbsp;{$tocity}</p><p class="item-info">{$starttime}</p></a></li>',
Tour:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$name}">{$name}</p><p class="item-info">{$fromcity}出发</p></a></li>',
DIY:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$name}">{$name}</p><p class="item-info">{$fromcity}出发</p></a></li>',
Piao:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$name}">{$name}</p><p class="item-info">{$tocity}</p></a></li>',
Activity:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$name}">{$name}</p><p class="item-info">{$tocity}</p></a></li>',
Cruise:'<li class="product-item product-item_simple product-item_search"><a href="{$url}" target="_blank"><p class="item-thumbnail"><i class="{$img}"></i></p><p class="item-name" title="{$name}">{$name}</p><p class="item-info">{$fromcity}{$fromcitydesc}</p></a></li>'
},i=["HotelDomestic","HotelInternational"],n={HotelDomestic:"icon-pd-hotel",HotelInternational:"icon-pd-hotel",FlightDomestic:"icon-pd-flight",FlightInternational:"icon-pd-flight",Train:"icon-pd-train",QiChe:"icon-pd-bus",Tour:"icon-pd-grouptravel",DIY:"icon-pd-grouptravel",Piao:"icon-pd-ticket",
Activity:"icon-pd-huodong",Cruise:"icon-pd-grouptravel"},r={name:"HM_MainArea_BI",version:"1.0",init:function(){},uninit:function(){},module:e},o={loadingMask:"<div class='onloading'></div>",defaultTabId:0},s=0,d=new Array,l=Ctrip.Util.PageConfig.url.biAjaxBI,c=!1;___LikeStatus=!1
;var p=new Array,m=1,u=!1;e.prototype={init:function(e){this.conf=this._setConf(e),s=this.conf.defaultTabId,t(".mod.bow-history .mod-bd").addClass("onloading"),t(".mod.bow-history>div>h2>span:eq(1)").hide(),this._event.bigTab(),this._event.tabtab(),this._event.unTabtab(),
this._event.bindScroller(t(".mod.bow-history .scrolling-wrap:eq(0)")),this._event.bindScroller(t(".mod.bow-history .scrolling-wrap:eq(1)")),Ctrip.Util.asynScrollLoad({defObj:".mod.bow-history",defHeight:0,delayFunc:this._delayCall})},_setConf:function(e){return t.extend(!0,{},o,e||{})},
_delayCall:function(){e.prototype._func.initSelector(!0),e.prototype._func.request()},_event:{bigTab:function(){for(var a=t(".mod.bow-history>div>h2>span"),i=0,n=a.length;i<n;i++)!function(n){var r=i;Ctrip.Util.addEventHandler(t(a[r])[0],"click",function(){
t(".mod.bow-history>div>h2>span[class='current']").removeClass("current"),t(a[r]).addClass("current"),s=t(a[r]).attr("idx");var i=t(".mod.bow-history>div>div[idx='"+s+"']");t(".mod.bow-history .mod-bd .mod-bd-panel").hide(),0!=i.length&&i.find("div>ul>li").length>0?(t(i).show(),
e.prototype._func.switchPullRight(s)):e.prototype._func.request(!1,d.join(",")),Ctrip.Singleton.setMetric("hp_historysection",r)})}()},tabtab:function(a){Ctrip.Util.addEventHandler(t(".mod.bow-history .pull-right .dropdown.dropdown-filter")[0],"click",function(a){
var i=(a=a||window.event).target||a.srcElement;if(e.prototype._func.initSelector(),"dropdown-toggle  dropdown-toggle_border"!=i.className&&"i_index_filter"!=i.className||(t(".mod.bow-history .dropdown.dropdown-filter .dropdown-cont").slideToggle(),
Ctrip.Util.toggleClass(t(".mod.bow-history .dropdown.dropdown-filter")[0],"open")),t(".mod.bow-history .dropdown.dropdown-filter .griddle").contains(t(i))){if("LI"===i.nodeName){if("icon-check-white"===t(i).find("span")[0].className){
if(1==t(".mod.bow-history .dropdown.dropdown-filter .griddle-list>li.selected").length)return void t(".mod.bow-history .dropdown.dropdown-filter .text-waring").show();t(i).find("span")[0].className="icon-plus",t(i).removeClass("selected")}else t(i).find("span")[0].className="icon-check-white",
t(i).addClass("selected");return d=new Array,t(".mod.bow-history .dropdown.dropdown-filter .griddle-list>li.selected").each(function(t){d.push(t.attr("data-cde"))}),void t.pageStorage.set("BI_TYPES",d.join(","))}
if(t(".mod.bow-history .btn-wrap").contains(t(i))&&"A"===i.nodeName&&(t(".mod.bow-history .dropdown.dropdown-filter .dropdown-cont").slideToggle(function(){Ctrip.Util.toggleClass(t(".mod.bow-history .dropdown.dropdown-filter")[0],"open")}),
"ok"==i.getAttribute("idx")))return void(___LikeStatus||e.prototype._func.request(!0,d.join(",")))}}),Ctrip.Util.addEventHandler(t(".mod.bow-history .pull-right .dropdown.dropdown-clear")[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement
;if("dropdown-toggle dropdown-toggle_border"!=i.className&&"icon-ash ml5"!=i.className||(t(".mod.bow-history .dropdown.dropdown-clear .dropdown-cont").slideToggle(function(){}),Ctrip.Util.toggleClass(t(".mod.bow-history .dropdown.dropdown-clear")[0],"open"),
Ctrip.Singleton.setMetric("hp_historysection","clear")),t(".mod.bow-history .confirm").contains(t(i))&&"A"===i.nodeName&&(t(".mod.bow-history .dropdown.dropdown-clear .dropdown-cont").slideToggle(function(){Ctrip.Util.toggleClass(t(".mod.bow-history .dropdown.dropdown-clear")[0],"open")}),
"ok"==i.getAttribute("idx")))return c||e.prototype._func.request2(i),void Ctrip.Singleton.setMetric("hp_historysection","clear_ok")})},unTabtab:function(){Ctrip.Util.addEventHandler(t(document)[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement
;t(".mod.bow-history .dropdown").length>0&&!t(".mod.bow-history .pull-right").contains(i)&&("button button-positive"==i.className?(e.prototype._func.initSelector(!0),t(".mod.bow-history .dropdown-filter .dropdown-cont").slideDown(function(){t(".mod.bow-history .dropdown-filter").addClass("open")}),
e.prototype._func.request(!0,d.join(",")),t(".scrolling-wrap").show(),t(".tips-waring").hide()):t(".mod.bow-history .dropdown").each(function(t){(t&&"dropdown dropdown-clear open"===t[0].className||"dropdown dropdown-filter open"===t[0].className)&&t.find(".dropdown-cont").slideToggle(function(){
Ctrip.Util.toggleClass(t[0],"open")})}))})},bindScroller:function(a){Ctrip.Util.addEventHandler(t(a).find(".btn-next")[0],"click",function(){e.prototype._func.scrollLeft(a)}),Ctrip.Util.addEventHandler(t(a).find(".btn-prev")[0],"click",function(){e.prototype._func.scrollRight(a)})}},_func:{
request:function(e,a){var i=this,n=l+"?ch="+s+"&ft="+escape(a)+"&pi="+m;t(".mod.bow-history .mod-bd .tips-mask[idx='load']").show(),t(".mod.bow-history .mod-bd").addClass("onloading"),___LikeStatus=!0,t.ajax(n,{cache:!1,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(a){
var n=t.parseJSON(a.responseText);null!=n&&(i.storageHis(n),u=n.hasnp,n.prdLst=p,i.formatHTML(e,n),t(".mod.bow-history .mod-bd").removeClass("onloading"),t(".mod.bow-history .mod-bd .tips-mask[idx='load']").hide(),m>1&&t(".mod.bow-history .scrolling-wrap:eq(0)").find(".btn-prev").show(),
___LikeStatus=!1)},onerror:function(){t(".mod.bow-history").remove(),t(".toogle-bar").remove()}})},request2:function(){var e=l+"?ch="+s+"&ft=clear";t(".mod.bow-history .mod-bd .tips-mask[idx='run']").show(),c=!0,t.ajax(e,{cache:!1,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(e){
"success"==e.responseText?setTimeout(function(){t(".mod.bow-history .mod-bd .mod-bd-panel.mod-bd-panel_history").fadeOut(),t(".mod.bow-history .mod-bd .tips-mask[idx='success']").show(),setTimeout(function(){t(".mod.bow-history").hide(),t(".mod.bow-history .mod-hd span[idx='0']").fadeOut()},1e3)
},1e3):(t(".mod.bow-history .mod-bd .tips-mask").hide(),t(".mod.bow-history .mod-bd .tips-mask[idx='failed']").show(),setTimeout(function(){t(".mod.bow-history .mod-bd .tips-mask[idx='failed']").fadeOut()},1e3)),c=!1,t(".toogle-bar").remove()},onerror:function(){
t(".mod.bow-history .mod-bd .tips-mask").hide(),t(".mod.bow-history .mod-bd .tips-mask[idx='failed']").show(),setTimeout(function(){t(".mod.bow-history .mod-bd .tips-mask[idx='failed']").fadeOut()},1e3),c=!1}})},formatHTML:function(r,o){var d,l=t(".mod.bow-history .mod-bd-panel[idx='"+s+"']"),c={
prdItem:'<li class="product-item" title="{$title}" typeEn="{$typeEn}" pid="{$pid}"><a href="{$url}" target="_blank" ><div class="item-thumbnail"><img src="{$img}" alt="{$title}"/><span class="tag tag_dark">{$typZh}</span>{$coupon}</div><p class="item-name">{$name}</p><p class="item-info">{$price}{$diamond}{$subtitle}</p></a></li>',
prdItemHotel:'<li class="product-item product-item_simple"><a href="{$url}" target="_blank"><p class="item-thumbnail"><img src="{$img}" alt="{$name}" onerror="Ctrip.Util.notFoundPic(event);"/><span class="tag tag_dark">{$typZh}</span></p><p class="item-name" title="{$name}">{$name}</p><p class="item-info"><span class="{$diamond}"></span></p><p class="item-info item-info-price">{$price}</p></a></li>',
prdItemNormal:'<li class="product-item product-item_simple"><a href="{$url}" target="_blank"><p class="item-thumbnail"><img src="{$img}" alt="{$name}" onerror="Ctrip.Util.notFoundPic(event);"/><span class="tag tag_dark">{$typZh}</span></p><p class="item-name item-line2" title="{$name}">{$nameVac}</p><p class="item-info item-info-price">{$price}</p></a></li>',
price:'<span class="price"><dfn>¥</dfn>{$amt}<i class="price_info">起</i></span>'},p=[];if(o&&o.prdLst&&o.prdLst.length>0){if(0!=s){d=c.prdItem;for(var m=0,u=o.prdLst.length;m<u;m++)p[p.length]=d.replaceWith({pid:o.prdLst[m].id?o.prdLst[m].id:"",name:o.prdLst[m].nme,title:o.prdLst[m].nme,
img:o.prdLst[m].img,url:o.prdLst[m].lnk,typZh:o.prdLst[m].zh?o.prdLst[m].zh:"",typeEn:o.prdLst[m].en?o.prdLst[m].en:"",price:0==o.prdLst[m].price?'<span class="price no-price">实时计价</span>':c.price.replaceWith({amt:parseInt(o.prdLst[m].price)}),diamond:o.prdLst[m].star?o.prdLst[m].star:"",
subtitle:o.prdLst[m].subTitle&&!o.prdLst[m].star?'<span class="item-type">'+o.prdLst[m].subTitle+"</span>":"",coupon:o.prdLst[m].coupon?'<div class="item-overlay" title='+o.prdLst[m].coupon+'><span class="tag_orange">惠</span>'+o.prdLst[m].coupon+'</p><p class="iefix-bg"></div>':""})}else for(m=0,
u=o.prdLst.length;m<u;m++){var h=o.prdLst[m].ext;o.prdLst[m].issearch?void 0!==(d=a[o.prdLst[m].biztype])&&(p[p.length]=d.replaceWith({name:o.prdLst[m].title,img:n[o.prdLst[m].biztype]?n[o.prdLst[m].biztype]:"icon-pd-normal",url:o.prdLst[m].deURL,typZh:o.prdLst[m].bizname?o.prdLst[m].bizname:"",
typeEn:o.prdLst[m].biztype?o.prdLst[m].biztype:"",fltway:null!=h&&h.hasOwnProperty("flightWay")?h.flightWay:"",fltspace:null!=h&&h.hasOwnProperty("flightSpace")?h.flightSpace:"",keywords:o.prdLst[m].kwords?o.prdLst[m].kwords:"",starttime:o.prdLst[m].stime?o.prdLst[m].stime:"",
endtime:o.prdLst[m].etime?"至"+o.prdLst[m].etime:null!=h&&h.hasOwnProperty("flightWay")&&"往返"==h.flightWay?"出发":"",fromcity:o.prdLst[m].fcname?o.prdLst[m].fcname:"",fromcitydesc:o.prdLst[m].fcname?"出发":"",tocity:o.prdLst[m].tcname?o.prdLst[m].tcname:"",
flightType:null!=h&&h.hasOwnProperty("flightWay")?"单程"==h.flightWay?'<i class="icon icon-single"></i>':'<i class="icon icon-round"></i>':""})):(d=i.indexOf(o.prdLst[m].biztype)>-1?c.prdItemHotel:c.prdItemNormal,"Meeting"==o.prdLst[m].biztype&&(o.prdLst[m].bizname="会议·团房"),p[p.length]=d.replaceWith({
name:o.prdLst[m].title,nameVac:o.prdLst[m].title,img:o.prdLst[m].picURL?o.prdLst[m].picURL:"//pic.c-ctrip.com/platform/online/home/pic-history-normal.jpg",url:o.prdLst[m].deURL,typZh:o.prdLst[m].bizname?o.prdLst[m].bizname:"",typeEn:o.prdLst[m].biztype?o.prdLst[m].biztype:"",
price:o.prdLst[m].price<=0?'<span class="price no-price">实时计价</span>':c.price.replaceWith({amt:parseInt(o.prdLst[m].price)}),diamond:null!=h&&h.hasOwnProperty("star")&&"0"!=h.star?"diamond diamond0"+h.star:""}))}t(l).find("ul[class='list-area']").html(p.join("")),
t(l).find(".list-area").css("left","0px"),t(l).find(".btn-prev").hide(),o.prdLst.length<=4?t(l).find(".btn-next").hide():5==o.prdLst.length?document.body.clientWidth>=1180&&t(l).find(".btn-next").hide():t(l).find(".btn-next").show()}
o&&o.prdLst&&o.prdLst.length>0&&p.length>0?(t(l).find(".list-area").css("width",250*o.prdLst.length+"px"),t(l).appendTo(t(".mod.bow-history .mod-bd")),t(".mod.bow-history .mod-bd div[idx='1'] .scrolling-wrap").show(),t(".mod.bow-history .mod-bd div[idx='1'] .tips-waring").hide(),
t(".mod.bow-history .text-waring").hide(),l.show(),t(".mod.bow-history").slideDown(),e.prototype._func.switchPullRight(s),
0==s?e.prototype._func.setTraceLog(1,t(".mod.bow-history .mod-bd-panel.mod-bd-panel_history .list-area li")):e.prototype._func.setTraceLog(1,t(".mod.bow-history .mod-bd-panel.mod-bd-panel_guess .list-area li"))):r?(t(".mod.bow-history .mod-bd div[idx='1'] .scrolling-wrap").hide(),
t(".mod.bow-history .mod-bd div[idx='1'] .tips-waring").show()):(l.remove(),t(".mod.bow-history .mod-hd span[idx='"+s+"']").remove(),0==s?t(".mod.bow-history .mod-bd-panel").remove():t(".mod.bow-history .mod-hd span[idx='"+(1^s)+"']").click()),
0==t(".mod.bow-history .mod-bd-panel").length&&(t(".mod.bow-history").remove(),t(".toogle-bar").remove());var f;return 0==s?(f="like.history",Ctrip.Singleton.setStatistic(f,"prd",t(l).find(".product-item.product-item_simple a"))):1==s&&(f="like.recommend",
Ctrip.Singleton.setStatistic(f,"hotel",t(l).find(".product-item:contains('酒店')").find("a:first")),Ctrip.Singleton.setStatistic(f,"tour",t(l).find(".product-item:contains('跟团游')").find("a:first")),Ctrip.Singleton.setStatistic(f,"tourFE",t(l).find(".product-item:contains('自由行')").find("a:first")),
Ctrip.Singleton.setStatistic(f,"flight",t(l).find(".product-item:contains('机票')").find("a:first")),Ctrip.Singleton.setStatistic(f,"ticket",t(l).find(".product-item:contains('门票')").find("a:first")),Ctrip.Singleton.setStatistic(f,"play",t(l).find(".product-item:contains('玩乐')").find("a:first"))),l},
storageHis:function(t){if(t&&t.prdLst&&t.prdLst.length>0)for(var e=0,a=t.prdLst.length;e<a;e++)p[p.length]=t.prdLst[e]},lazyLoad:function(){for(var e=t(".mod.bow-history")[0].getElementsByTagName("img"),a=0,i=e.length;a<i;a++)e[a].getAttribute("_src")&&(e[a].src=e[a].getAttribute("_src"))},
initSelector:function(e){e&&t.pageStorage.set("BI_TYPES",void 0),void 0!=t.pageStorage.get("BI_TYPES")?(d=t.pageStorage.get("BI_TYPES").split(",")).each(function(e){t(".mod.bow-history .griddle-list>li[data-cde='"+e+"']").addClass("selected"),
t(".mod.bow-history .griddle-list>li[data-cde='"+e+"']>span")[0].className="icon-check-white"}):(t(".mod.bow-history .griddle-list>li").each(function(e){d.push(e.attr("data-cde")),t(e).addClass("selected"),t(e).find("span")[0].className="icon-check-white"}),t.pageStorage.set("BI_TYPES",d.join(",")))
},scrollLeft:function(a){var i=t(a).find("li").length,n=0,r=0==s?238:240,o=0;o=0==s?document.body.clientWidth<1180?990:1190:document.body.clientWidth<1180?1e3:1200,i>=5&&(n=o-r*i);var d=t(a).find(".list-area").css("left");current=d.split("px")[0]-o,t(a).find(".list-area").animate({left:current+"px"
},"1000"),d.split("px")[0]-o<=n&&(u?(m+=1,e.prototype._func.request()):t(a).find(".btn-next").hide()),t(a).find(".btn-prev").show();var l=-1*parseInt(current/o)+1;e.prototype._func.setTraceLog(l,t(a).find(".list-area li"))},scrollRight:function(a,i){t(a).find("li").length
;offSet=0==s?document.body.clientWidth<1180?990:1190:document.body.clientWidth<1180?1e3:1200;var n=parseInt(t(a).find(".list-area").css("left").split("px")[0]);n<0&&(current=n+offSet,current>0&&(current=0),t(a).find(".list-area").animate({left:current+"px"},"1000"),
0==current&&t(a).find(".btn-prev").hide()),t(a).find(".btn-next").show();var r=-1*parseInt(current/offSet)+1;e.prototype._func.setTraceLog(r,t(a).find(".list-area li"))},setTraceLog:function(e,a){try{
for(var i="",n=document.body.clientWidth<1180?4:5,r=0==s?"his_hp_trace_txt_1":"fav_hp_trace_txt_2",o=(e-1)*n,d=o;d<o+n;d++){var l=a.get(d);if(void 0==l)break;i+="{$pid}&{$en},".replaceWith({pid:t(l).attr("pid").toLowerCase(),en:t(l).attr("typeEn").toLowerCase()})}
window.__bfi.push(["_tracklog",r,'{"page":"{$pageNum}","Show":"{$value}"}'.replaceWith({pageNum:e,value:i})])}catch(t){}},switchPullRight:function(e){t(".mod.bow-history .mod-hd .pull-right .dropdown").hide(),
"1"==e?t(".mod.bow-history .mod-hd .pull-right .dropdown.dropdown-filter").show():t(".mod.bow-history .mod-hd .pull-right .dropdown.dropdown-clear").show()}}},t.mod.reg(r)}catch(t){Ctrip.Util.log(t)}}(cQuery)),cQuery.run(function(t){function e(t,e){this.init(e)}try{var a={name:"HM_MainArea_Hotel",
version:"1.0",init:function(){},uninit:function(){},module:e},i={loadingMask:"<div class='onloading'></div>",defaultTabId:0
},n=1,r=-1,o=Ctrip.Util.PageConfig.url.hotelAjaxBI,s=Ctrip.Util.PageConfig.url.overseainnAjaxBI,d=new Array("","","","hotel_bluemedal","hotel_silvermedal","hotel_goldmedal","hotel_strategymedal"),l={};e.prototype={init:function(a){this.conf=this._setConf(a),n=this.conf.defaultTabId,
l.msg="HM_MainArea_Hotel_RemoteDataErr",l.method=e.prototype._func.retry,t(".mod.hotel .mod-bd").addClass("onloading"),this._event.bigTab(),this._event.unTabtab(),Ctrip.Util.asynScrollLoad({defObj:".mod.hotel",defHeight:0,delayFunc:this._delayCall})},_setConf:function(e){
return t.extend(!0,{},i,e||{})},_delayCall:function(){e.prototype._func.request(!0,!0)},_event:{bigTab:function(){for(var a=t(".mod.hotel>div>h2>span"),i=0,o=a.length;i<o;i++)!function(o){var s=i;Ctrip.Util.addEventHandler(t(a[s])[0],"click",function(){Ctrip.Singleton.setMetric("hp_hotelsection",s),
t(".mod.hotel>div>h2>span[class='current']").removeClass("current"),t(a[s]).addClass("current"),n=t(a[s]).attr("idx");var i=t(".mod.hotel>div>div[idx='"+t(a[s]).attr("idx")+"']");t(".mod.hotel>div>div.mod-bd-panel").hide(),0!=i.length&&i.find("div>div>ul>li").length>0?t(i).show():(r=-1,
e.prototype._func.request(!0))})}()},tabtab:function(a){function i(t){Ctrip.Util.addEventHandler(t[0],"click",function(a){var i=(a=a||window.event).target||a.srcElement;if("dropdown-toggle dropdown-toggle_border"!==i.className){if("A"===i.nodeName){if("dropdown-menu-list"===i.parentNode.className){
Ctrip.Util.toggleClass(i.parentNode.parentNode.parentNode,"open");i.parentNode.parentNode.parentNode;t.find("li").removeClass("active");var n=(s=t.find("li[class!='dropdown-li']>a"))[s.length-1],o=i.cloneNode(!0);return n.parentNode.replaceChild(o,n),o.parentNode.className="active",
i.parentNode.replaceChild(n,i),r=i.getAttribute("pinyin"),void e.prototype._func.request(!1)}r=i.getAttribute("pinyin");var s;(s=t.find("li")).removeClass("active"),i.parentNode.className="active",e.prototype._func.request(!1)}}else Ctrip.Util.toggleClass(i.parentNode,"open")})}
i(a?t(a).find("ul[class='inner-tabs-nav']"):t(".mod.hotel>.mod-bd").find("ul[class='inner-tabs-nav']"))},unTabtab:function(){Ctrip.Util.addEventHandler(t(document)[0],"click",function(e){if("dropdown-toggle dropdown-toggle_border"!=((e=e||window.event).target||e.srcElement).className){
var a=t(".mod.hotel>div>div[idx='"+n+"']").find("ul[class='inner-tabs-nav']>li[class='dropdown-li']>div")[0];null!=a&&"dropdown open"===a.className&&(a.className="dropdown")}})}},_func:{retry:function(){t.loader.js(Ctrip.Util.PageConfig.url.staticJson,{type:"text/javascript",charset:"utf-8",
async:!0,cache:!0,onload:function(){var a=Ctrip.Util.PageConfig.staticData;e.prototype._func.formatHTML(!0,a.hotel),e.prototype._event.tabtab(t(".mod.hotel>div>div[idx='"+n+"']")),t(".mod.hotel .mod-bd").removeClass("onloading")}})},request:function(a,i){var d=this
;url2=6==n?s+"?ch="+n+"&gp="+r:o+"?ch="+n+"&gp="+r,t(".mod.hotel .mod-bd").addClass("onloading"),t.ajax(url2,{cache:!0,async:!0,method:cQuery.AJAX_METHOD_GET,onsuccess:function(r){try{var o=t.parseJSON(r.responseText);d.formatHTML(a,o),
a&&e.prototype._event.tabtab(t(".mod.hotel>div>div[idx='"+n+"']")),t(".mod.hotel .mod-bd").removeClass("onloading")}catch(t){i&&Ctrip.Util.raiseError(l)}},onerror:function(t){i&&Ctrip.Util.raiseError(l)}})},formatHTML:function(a,i){var o;if(0==t(".mod.hotel>div>div[idx='"+n+"']").length){
if(o=t(t(".mod.hotel>div>div[idx='2']")[0].cloneNode(!0)),t.browser.isIE7||t.browser.isIE8){o.find("ul[class='inner-tabs-nav']").remove();var s=document.createElement("UL");s.className="inner-tabs-nav",t(s).appendTo(o.find(".product-hd"))}o.attr("idx",n)}else o=t(".mod.hotel>div>div[idx='"+n+"']")
;var d={tabItem:'<li><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',tabItemCur:'<li class="active"><a href="{$url}" pinyin="{$pinyin}">{$name}</a></li>',
tab7:'<li class="dropdown-li">\t\t\t\t \t\t\t        <div class="dropdown"><a href="javascript:void(0);" class="dropdown-toggle dropdown-toggle_border">更多<span class="caret"></span></a>\t\t\t\t \t\t\t        <div class="dropdown-cont"><div class="dropdown-menu-list">{$a7}</div></div></div></li>',
tab7Item:'<a href="{$url}" pinyin="{$pinyin}">{$name}</a>',
prdItemIntl:'<div class="product-item product-item_complex" title="{$title}"><a group="a" href="{$url}" target="_blank"><div class="item-thumbnail"><img src="{$img}" alt="{$title}"/></div><div class="item-msg"><p class="item-name">{$name}</p><p class="item-num">{$icount}家酒店</p><p class="item-info">{$price}</p></div><div class="iefix-bg"></div></a></div>',
prdItem:'<div class="product-item" title="{$title}"><div class="item-thumbnail"><a href="{$url}" target="_blank" group="a"><img src="{$img}" alt="{$title}"/></a></div><p class="item-name {$cssHack}"><a group="a" href="{$url}" target="_blank">{$name}{$medal}</a></p><p class="item-info">{$price}{$rates}{$subt}{$tcount}</p></div>',
prdItemCity:'<div class="product-item product-item_mask"><a href="{$url}" target="_blank" group="city"><div class="item-thumbnail"><img src="{$img}" alt="{$title}"/></div><p class="item-name">{$name}</p><p class="item-info">{$description}</p><p class="item-num">{$icount}家住宿</p></a></div>',
prdItemInn:'<div class="product-item product-item_mask"><a href="{$url}" target="_blank" group="pro"><div class="item-thumbnail"><img src="{$img}" alt="{$title}"/></div><p class="item-name">{$name}</p><p class="item-info">{$score}</p>{$innprice}</a></div>',
prdItemTopic:'<div class="extra-item product-item_mask"><a href="{$url}" target="_blank" ><div class="extra-thumbnail"><img src="{$img}" alt="{$title}"/></div><p class="item-name">{$name}</p><p class="item-info">{$description}</p></a></div>',
prdItemStory:'<div class="product-item product-item_mask"><a href="{$url}" target="_blank" group="sto"><div class="item-thumbnail"><img src="{$img}" alt="{$title}"/></div><div class="item-overlay"><p class="avator"><img src={$logourl} alt=""></p><p class="item-name">{$name}</p><p class="iefix-bg"></p></div></a></div>',
hotLinks:'<span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span>',hotLinksLong:'<span class="entrance-item" title="{$name}"><a href="{$url}" target="_blank">{$name}</a>{$hot}</span>',
adItem:'<div class="extra-item" title="{$title}"><a href="{$url}" target="_blank"><p class="extra-thumbnail"><img src="{$img}" alt="{$title}"></p><p class="extra-text">{$name}</p></a></div>'};if(a){for(var l=[],c=[],p=0,m=i.tabs.length;p<m&&6!=n;p++)0!==p?p>=7?c[c.length]=d.tab7Item.replaceWith({
pinyin:i.tabs[p].pinyin,name:i.tabs[p].tabNme,url:i.tabs[p].lnk?i.tabs[p].lnk:"javascript:void(0);"}):l[l.length]=d.tabItem.replaceWith({pinyin:i.tabs[p].pinyin,name:i.tabs[p].tabNme,url:i.tabs[p].lnk?i.tabs[p].lnk:"javascript:void(0);"}):l[0]=d.tabItemCur.replaceWith({pinyin:i.tabs[p].pinyin,
name:i.tabs[p].tabNme,url:i.tabs[p].lnk?i.tabs[p].lnk:"javascript:void(0);"});var u=d.tab7.replaceWith({a7:c.join("")}),h=t(o).find("ul[class='inner-tabs-nav']");c.length>0?t(h).html(l.join("")+u):t(h).html(l.join("")),r=t(h).find("a:eq(0)").attr("pinyin")}var f=[],g=0;for(p=0,
m=i.prdLst.length;p<m;p++){var v=1==n?d.prdItemIntl:d.prdItem;if(6==n){var b=i.prdLst[p].catgNme;switch(b){case"1":v=d.prdItemCity;break;case"2":v=d.prdItemInn;break;case"3":v=d.prdItemTopic;break;case"4":v=d.prdItemStory,g+=1}
4==b&&1==g?v='<div class="homestay-product">'+v:4==b&&g>=1&&(v+="</div>"),f[f.length]=v.replaceWith({name:i.prdLst[p].nme,title:i.prdLst[p].nme,img:i.prdLst[p].img,url:i.prdLst[p].lnk,icount:i.prdLst[p].count,description:i.prdLst[p].des,score:i.prdLst[p].score+"/5分",
innprice:i.prdLst[p].innprice<=0?'<span class="price"><i class="price_info">实时计价</i></span>':'<span class="price"><dfn>&yen;</dfn>'+i.prdLst[p].innprice+'<i class="price_info">起</i></span>',logourl:i.prdLst[p].logoLnk})}else f[f.length]=v.replaceWith({name:i.prdLst[p].nme,title:i.prdLst[p].nme,
img:i.prdLst[p].img,url:i.prdLst[p].lnk,icount:i.prdLst[p].count,tcount:5==n?'<span class="item-type">已售 '+i.prdLst[p].count+"</span>":"",
price:0==i.prdLst[p].price.amt?'<span class="price no-price">实时计价</span>':'<span class="price"><dfn>¥</dfn>'+i.prdLst[p].price.amt+'<i class="price_info">起</i></span>',
subt:i.prdLst[p].zoneLst?'<a class="item-type" target="_blank" href="'+i.prdLst[p].zoneLst[0].lnk+'">'+i.prdLst[p].zoneLst[0].nme+"</a>":"",medal:e.prototype._func.getMetalHTML(i.prdLst[p]),rates:e.prototype._func.getMetalRate(i.prdLst[p]),cssHack:2==n||3==n?"item-name-space":""})}if(i.adLst){
for(p=0,m=i.adLst.length;p<m;p++)if(""!=i.adLst[p].alt){f[f.length]=d.adItem.replaceWith({name:i.adLst[p].alt,title:i.adLst[p].alt,img:i.adLst[p].img,url:i.adLst[p].lnk});break}}else t(o).find("div[class='product-bd']>div").addClass("inner-tab-panel_noextra")
;t(o).find("div[class='product-bd']>div").html(f.join(""));var y,_;null!=i.exLnk&&""!=i.exLnk?(y=i.exNme,_=i.exLnk,5==n&&(y="更多团购产品")):1==n?(y="更多海外酒店",_="http://hotels.ctrip.com/international/"):2==n?(y="更多国内酒店",_="http://hotels.ctrip.com/"):3==n?(y="更多客栈民宿",
_="http://inn.ctrip.com/"):4==n?(y="更多套餐",_="http://taocan.ctrip.com/sh/"):6==n?(y="更多海外民宿",_="http://hotels.ctrip.com/apartment"):(y="更多团购产品",_="http://tuan.ctrip.com/hotel/"),t(o).find("a[class='linked-more']").html(y+' <i class="i_index_next"></i>'),
t(o).find("a[class='linked-more']").attr("href",_);v=d.hotLinksLong;if(i.tagUp){4!=n&&"RelativeLayout"!=i.tagUp.layout||(v=d.hotLinks);var C=[];for(p=0,
m=i.tagUp.itemLst.length;p<m&&("LinearLayout"!=i.tagUp.layout||5!=p)&&("RelativeLayout"!=i.tagUp.layout||15!=p)&&(4!=n||15!=p);p++)C[C.length]=v.replaceWith({name:i.tagUp.itemLst[p].nme,url:i.tagUp.itemLst[p].lnk,
hot:"Y"===i.tagUp.itemLst[p].isHot&&"LinearLayout"!=i.tagUp.layout?"<span class='icon_hot'></span>":""});var L="";4==n?(i.tagUp.nme="热门主题",t(o).find(".entrance>dl:eq(0)")[0].className="keyword-short",
L="<DD>"+C.join("")+"</DD>"):"LinearLayout"==i.tagUp.layout?(t(o).find(".entrance>dl:eq(0)")[0].className="keyword-long",C.each(function(t){L+="<DD>"+t+"</DD>"})):L="<DD>"+C.join("")+"</DD>",t(o).find(".entrance>dl:eq(0)").html("<dt>"+i.tagUp.nme+"</dt>"+L),t(o).find(".entrance>dl:eq(0)").show()
}else t(o).find(".entrance>dl:eq(0)").hide();if(i.tagDown){var w=[];4!=n&&"RelativeLayout"!=i.tagDown.layout||(v=d.hotLinks);for(p=0,m=i.tagDown.itemLst.length;p<m&&("LinearLayout"!=i.tagDown.layout||5!=p)&&("RelativeLayout"!=i.tagDown.layout||15!=p)&&(4!=n||15!=p);p++)w[w.length]=v.replaceWith({
name:i.tagDown.itemLst[p].nme,url:i.tagDown.itemLst[p].lnk,hot:"Y"===i.tagDown.itemLst[p].isHot&&"LinearLayout"!=i.tagDown.layout?"<span class='icon_hot'></span>":""});var $="";4==n?(i.tagDown.nme="促销",t(o).find(".entrance>dl:eq(1)")[0].className="keyword-long",
$="<DD>"+w.join("")+"</DD>"):"RelativeLayout"==i.tagDown.layout?(t(o).find(".entrance>dl:eq(1)")[0].className="keyword-short",$="<DD>"+w.join("")+"</DD>"):w.each(function(t){$+="<DD>"+t+"</DD>"}),t(o).find(".entrance>dl:eq(1)").html("<dt>"+i.tagDown.nme+"</dt>"+$),
t(o).find(".entrance>dl:eq(1)").show()}else t(o).find(".entrance>dl:eq(1)").hide();t(o).appendTo(t(".mod.hotel .mod-bd")),o.show();var k;1==n?k="hotel.hoi":2==n?(k="hotel.hod",Ctrip.Singleton.setStatistic("hotel.hod","area",t(o).find(".item-info .item-type"))):4==n?k="hotel.pah":3==n?(k="hotel.inn",
Ctrip.Singleton.setStatistic("hotel.hod","area",t(o).find(".item-info .item-type"))):5==n?(k="hotel.gp",Ctrip.Singleton.setStatistic("hotel.gp","area",t(o).find(".item-info .item-type"))):6==n&&(k="hotel.oinn",Ctrip.Singleton.setStatistic("hotel.oinn","area",t(o).find(".item-info .item-type"))),
Ctrip.Singleton.setStatistic(k,"city",t(o).find(".product-item a[group='city']")),Ctrip.Singleton.setStatistic(k,"pro",t(o).find(".product-item a[group='pro']")),Ctrip.Singleton.setStatistic(k,"sto",t(o).find(".product-item a[group='sto']")),
Ctrip.Singleton.setStatistic(k,"prd",t(o).find(".product-item a[group='a']")),Ctrip.Singleton.setStatistic(k,"more",t(o).find(".linked-more")),Ctrip.Singleton.setStatistic(k,"event",t(o).find(".extra-item a")),Ctrip.Singleton.setStatistic(k,"tag1",t(o).find(".entrance dl:eq(0) a")),
Ctrip.Singleton.setStatistic(k,"tag2",t(o).find(".entrance dl:eq(1) a"))},lazyLoad:function(){for(var e=t(".mod.hotel")[0].getElementsByTagName("img"),a=0,i=e.length;a<i;a++)e[a].getAttribute("_src")&&(e[a].src=e[a].getAttribute("_src"))},getMetalHTML:function(t){if(!t||void 0==t.rstar)return""
;var e='<span class="medal {$css}" title="{$title}"></span>';return t.rstar>=3?e=e.replaceWith({css:d[t.rstar],title:function(t){switch(t){case 3:return"蓝牌合作";case 4:return"银牌合作";case 5:return"金牌合作";case 6:return"特级牌合作";default:return""}}(t.rstar)}):""},getMetalRate:function(t){
if(!t||void 0==t.isStar)return"";if(!0===t.isStar&&(!t.star||""==t.star))return"";if(!1===t.isStar&&(!t.cusEval||""==t.cusEval))return"";var e='<span class="diamond {$css}"></span>';return t.rstar>0?e=e.replaceWith({css:!0===t.isStar?function(t){switch(t){case 1:return"star01";case 2:return"star02"
;case 3:return"star03";case 4:return"star04";case 5:return"star05";default:return}}(t.star):function(t){switch(t){case.5:return"diamond01_half";case 1:return"diamond01";case 1.5:return"diamond02_half";case 2:return"diamond02";case 2.5:return"diamond03_half";case 3:return"diamond03";case 3.5:
return"diamond04_half";case 4:return"diamond04";case 4.5:return"diamond05_half";case 5:return"diamond05";case 5.5:return"diamond06_half";case 6:return"diamond06";default:return""}}(t.cusEval)}):""}}},t.mod.reg(a)}catch(t){Ctrip.Util.log(t)}}(cQuery)),cQuery.run(function(t){function e(t,e){
this.init(e)}try{var a,i,n,r,o,s,d,l,c={name:"HM_MainArea_FloorSpy",version:"1.0",init:function(){},uninit:function(){},module:e},p={childClass:"mod",defaultTop:0,scrollTopOffset:75,relevancyClass:"nav",relevancyChildTag:"a",relevancyCurrentClass:"mix_active",relevancyToggleClass:"",
container:".container"},m=t("body,html"),u=-1;e.prototype={conf:{},init:function(c){e.prototype.conf=this._setConf(c),(a=t(this.conf.container)).find("."+this.conf.childClass).each(function(t){"none"==t[0].style.display&&t.remove()}),i=a.find("."+this.conf.childClass),n=i.length,
r=t("."+this.conf.relevancyClass),o=r.find(this.conf.relevancyChildTag),s=i.first().offset().top-this.conf.defaultTop,d=t(i.get(n-1)).offset().top-this.conf.defaultTop,l=new Array(n),0!=r.length&&(setInterval(function(){i.each(function(t,a){e.prototype._func.updataTop(t,a)
;var i=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;0==i?(r.css("top",e.prototype.conf.defaultTop+l[0]+"px"),e.prototype._func.changeNavState(o.first(),e.prototype.conf.relevancyCurrentClass)):(r.get(0).style.top=e.prototype.conf.defaultTop+l[0]-i+"px",
parseInt(r.get(0).style.top,10)<=e.prototype.conf.defaultTop&&(r.get(0).style.top=e.prototype.conf.defaultTop+"px"))})},500),e.prototype._event.bind(),r.fadeIn(500,function(){var t=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e.prototype._func.scroll(t)}),
r.addClass(this.conf.relevancyToggleClass))},_setConf:function(e){return t.extend(!0,{},p,e||{})},_event:{bind:function(){Ctrip.Util.addEventHandler(window,"scroll",function(t){if(-1==u){var a=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop;e.prototype._func.scroll(a)
}}),o.bind("click",function(a){var i=o.indexOf(t(this));u=i,e.prototype._func.scrollTo(i),Ctrip.Singleton.setMetric("hp_navloft",i)})},unbind:function(){t(window).unbind("scroll"),o.unbind("click")}},_func:{getTop:function(t){return t.offset().top},getScrollTop:function(t){return t.offset().top},
updataTop:function(t,a){l[a]=t.offset().top-e.prototype.conf.defaultTop},scrollTo:function(a,i){i=i||300;t.browser.isIE7?(m.attr("scrollTop",l[a]),e.prototype._func.changeNavState(t(o.get(a)),e.prototype.conf.relevancyCurrentClass),r.get(0).style.top=e.prototype.conf.defaultTop+"px"):m.animate({
scrollTop:l[a]},i,function(){e.prototype._func.changeNavState(t(o.get(a)),e.prototype.conf.relevancyCurrentClass),r.get(0).style.top=e.prototype.conf.defaultTop+"px"}),setTimeout(function(){u=-1},500)},changeNavState:function(e,a){var i=o.indexOf(e);e.addClass(a),o.each(function(e){
i!=o.indexOf(e)&&t(e).removeClass(a)})},scroll:function(a){a=a||0;var i,r=e.prototype.conf.defaultTop+e.prototype.conf.scrollTopOffset;if(a>=l[0]){for(i=0;i<n;i++)if(i!==n-1){if(a>=l[i]+r&&a<l[i+1]){this.changeNavState(t(o.get(i+1)),e.prototype.conf.relevancyCurrentClass);break}
if(a>=l[i]&&a<l[i+1]){this.changeNavState(t(o.get(i)),e.prototype.conf.relevancyCurrentClass);break}}else if(a>=l[i]){this.changeNavState(t(o.last()),e.prototype.conf.relevancyCurrentClass);break}}else this.changeNavState(t(o.get(0)),e.prototype.conf.relevancyCurrentClass)},
toggleNav:function(t,a,i){t>=a&&t<=i?r.addClass(e.prototype.conf.relevancyToggleClass):r.removeClass(e.prototype.conf.relevancyToggleClass)}}},t.mod.reg(c)}catch(t){Ctrip.Util.log(t)}}(cQuery));